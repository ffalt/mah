import{a as D,c as T,d as Y,f as z}from"./chunk-GFKEJDE3.js";import{n as j}from"./chunk-2BJ3Q6JT.js";import{C as H,s as G,t as R,u as N}from"./chunk-56S3VASB.js";import{Da as S,E as h,Ea as M,F as C,G as I,Ga as k,H as L,Ha as x,Ia as y,Na as r,Oa as a,Pa as O,Qa as E,Ra as _,Ta as u,Ua as g,Xa as V,Ya as A,b,bb as l,cb as s,db as w,eb as K,ga as t,gb as v,jb as c,kb as m,na as B,pb as $,ub as U,vb as F,y as P}from"./chunk-XLC3RWVP.js";var Q=["kyodaiInput"],q=(p,d)=>d.source;function Z(p,d){if(p&1){let e=E();r(0,"li")(1,"input",9),u("change",function(){let i=h(e).$implicit,o=g();return o.app.settings.lang=i.key,C(o.app.setLang())}),a(),r(2,"label",10),l(3),a()()}if(p&2){let e=d.$implicit,n=d.$index,i=g();t(),_("id","lang"+(n+1))("value",e.key)("checked",i.app.settings.lang===e.key),t(),_("htmlFor","lang"+(n+1)),t(),s(e.title)}}function X(p,d){if(p&1){let e=E();r(0,"li")(1,"input",11),u("change",function(){let i=h(e).$implicit,o=g();return o.app.settings.background=i.img||"",C(o.app.settings.save())}),a(),r(2,"label",10),l(3),c(4,"translate"),a()()}if(p&2){let e=d.$implicit,n=d.$index,i=g();t(),_("id",v("back",n))("value",e.img)("checked",i.app.settings.background===e.img),t(),_("htmlFor",v("back",n)),t(),s(m(4,7,e.name))}}function J(p,d){if(p&1){let e=E();r(0,"li")(1,"input",12),u("change",function(){let i=h(e).$implicit,o=g();return o.app.settings.theme=i.id||"",C(o.app.settings.save())}),a(),r(2,"label",10),l(3),c(4,"translate"),a()()}if(p&2){let e=d.$implicit,n=d.$index,i=g();t(),_("id",v("color",n))("value",e.id)("checked",i.app.settings.theme===e.id),t(),_("htmlFor",v("color",n)),t(),s(m(4,7,e.name))}}function W(p,d){if(p&1){let e=E();r(0,"li")(1,"input",13),u("change",function(){let i=h(e).$implicit,o=g();return o.app.settings.tileset=i.id,C(o.app.settings.save())}),a(),r(2,"label",10),l(3),a()()}if(p&2){let e=d.$implicit,n=d.$index,i=g();t(),_("id",v("imageset",n))("value",e.id)("checked",i.app.settings.tileset===e.id),t(),_("htmlFor",v("imageset",n)),t(),s(e.name)}}function ee(p,d){if(p&1){let e=E();r(0,"li")(1,"input",14),u("change",function(){h(e);let i=g();return i.app.settings.tileset="kyodai",C(i.app.settings.save())}),a(),r(2,"label",15),l(3),c(4,"translate"),a()()}if(p&2){let e=g();t(),_("checked",e.app.settings.tileset==="kyodai"),t(2),s(m(4,2,"KYODAI_TILESET"))}}function te(p,d){if(p&1&&(r(0,"option",24),l(1),a()),p&2){let e=d.$implicit;_("value",e.source),t(),K("",e.name," - ",e.author)}}function ne(p,d){if(p&1){let e=E();r(0,"div",1)(1,"p"),l(2),c(3,"translate"),a(),r(4,"div",16)(5,"textarea",17,0),u("change",function(i){h(e);let o=g();return C(o.updateKyodaiUrl(i))}),a(),r(7,"button",18),u("click",function(){h(e);let i=g();return C(i.clearKyodaiUrl())}),I(),r(8,"svg",19),O(9,"path",20)(10,"path",21),a()(),L(),r(11,"select",22),u("change",function(i){h(e);let o=g();return C(o.setKyodaiUrl(i))}),r(12,"option",23),l(13),c(14,"translate"),a(),x(15,te,2,3,"option",24,q),a()(),r(17,"button",25),u("click",function(){h(e);let i=g();return C(i.applyKyodaiUrl())}),l(18),c(19,"translate"),a()()}if(p&2){let e=g();t(2),s(m(3,4,"KYODAI_TILESET_SETTINGS")),t(3),_("value",e.app.settings.kyodaiUrl?e.app.settings.kyodaiUrl:""),t(8),s(m(14,6,"KYODAI_TILESET_EXAMPLES")),t(2),y(e.kyodaiTileSets),t(3),s(m(19,8,"KYODAI_TILESET_LOAD"))}}var _e=(()=>{let d=class d{constructor(){this.kyodaiInput=$.required("kyodaiInput"),this.canKyodai=D.kyodai,this.kyodaiTileSets=z,this.sets=N,this.backs=R,this.themes=G,this.languages=Object.keys(T).map(n=>({key:n,title:T[n].title})),this.app=P(Y),this.storage=P(H),this.layoutService=P(j),this.translate=P(U)}updateKyodaiUrl(n){this.app.settings.kyodaiUrl=n.target.value,this.app.settings.save()}clearKyodaiUrl(){this.app.settings.kyodaiUrl=void 0,this.app.settings.save()}setKyodaiUrl(n){let i=this.kyodaiInput();i.nativeElement&&(n.preventDefault(),n.stopPropagation(),i.nativeElement.value=n.target.value)}applyKyodaiUrl(){let n=this.kyodaiInput();n.nativeElement&&(this.app.settings.kyodaiUrl=n.nativeElement.value,this.app.settings.save())}clearTimes(){return b(this,null,function*(){let n=yield this.layoutService.get();for(let i of n.items)this.storage.clearScore(i.id)})}clearTimesClick(){confirm(this.translate.instant("BEST_TIMES_CLEAR_SURE"))&&this.clearTimes().catch(n=>{console.error(n)})}};d.\u0275fac=function(i){return new(i||d)},d.\u0275cmp=B({type:d,selectors:[["app-settings"]],viewQuery:function(i,o){i&1&&V(o.kyodaiInput,Q,5),i&2&&A()},decls:61,vars:35,consts:[["kyodaiInput",""],[1,"settings"],[1,"buttons"],[1,"radio"],["type","radio","name","lang","id","lang0","value","auto",3,"change","checked"],["for","lang0"],[1,"radio","radio-tilesets"],["type","checkbox",3,"change","checked"],[1,"clear-times",3,"click"],["type","radio","name","lang",3,"change","id","value","checked"],[3,"for"],["type","radio","name","back",3,"change","id","value","checked"],["type","radio","name","color",3,"change","id","value","checked"],["type","radio","name","imageset",3,"change","id","value","checked"],["type","radio","id","sd","name","imageset","value","kyodai","id","imageset-kyodai",3,"change","checked"],["for","imageset-kyodai"],[1,"input-wrapper"],["type","text","name","kyodai",3,"change","value"],[1,"clear-kyodai",3,"click"],["width","17px","height","17px","viewBox","0 0 35 35"],["d","M28.814,30.064a1.247,1.247,0,0,1-.884-.367L5.3,7.07A1.249,1.249,0,0,1,7.07,5.3L29.7,27.93a1.251,1.251,0,0,1-.884,2.134Z"],["d","M6.186,30.064A1.251,1.251,0,0,1,5.3,27.93L27.93,5.3A1.25,1.25,0,0,1,29.7,7.07L7.07,29.7A1.247,1.247,0,0,1,6.186,30.064Z"],[1,"example-kyodai",3,"change"],["value",""],[3,"value"],[3,"click"]],template:function(i,o){i&1&&(r(0,"div",1)(1,"p"),l(2),c(3,"translate"),a(),r(4,"div",2)(5,"form")(6,"ul",3)(7,"li")(8,"input",4),u("change",function(){return o.app.settings.lang="auto",o.app.setLang()}),a(),r(9,"label",5),l(10),c(11,"translate"),a()(),x(12,Z,4,5,"li",null,k),a()()(),r(14,"p"),l(15),c(16,"translate"),a(),r(17,"div",2)(18,"form")(19,"ul",3),x(20,X,5,9,"li",null,k),a()()(),r(22,"p"),l(23),c(24,"translate"),a(),r(25,"div",2)(26,"form")(27,"ul",3),x(28,J,5,9,"li",null,k),a()()()(),r(30,"div",1)(31,"p"),l(32),c(33,"translate"),a(),r(34,"div",2)(35,"form")(36,"ul",6),x(37,W,4,7,"li",null,k),S(39,ee,5,4,"li"),a()()(),S(40,ne,20,10,"div",1),r(41,"p"),l(42),c(43,"translate"),a(),r(44,"div")(45,"label")(46,"input",7),u("change",function(){return o.app.settings.contrast=!o.app.settings.contrast,o.app.settings.save()}),a(),l(47),c(48,"translate"),a(),O(49,"br"),r(50,"label")(51,"input",7),u("change",function(){return o.app.settings.dark=!o.app.settings.dark,o.app.settings.save()}),a(),l(52),c(53,"translate"),a()(),r(54,"p"),l(55),c(56,"translate"),a(),r(57,"div")(58,"button",8),u("click",function(){return o.clearTimesClick()}),l(59),c(60,"translate"),a()()()),i&2&&(t(2),s(m(3,15,"LANG")),t(6),_("checked",o.app.settings.lang==="auto"),t(2),s(m(11,17,"LANG_AUTO")),t(2),y(o.languages),t(3),s(m(16,19,"BACKGROUND")),t(5),y(o.backs),t(3),s(m(24,21,"THEME")),t(5),y(o.themes),t(4),s(m(33,23,"TILESET")),t(5),y(o.sets),t(2),M(o.canKyodai?39:-1),t(),M(o.canKyodai&&o.app.settings.tileset==="kyodai"?40:-1),t(2),s(m(43,25,"TILES")),t(4),_("checked",o.app.settings.contrast),t(),w(" ",m(48,27,"HIGHER_CONTRAST")," "),t(4),_("checked",o.app.settings.dark),t(),w(" ",m(53,29,"TILES_DARK")," "),t(3),s(m(56,31,"BEST_TIMES")),t(4),s(m(60,33,"BEST_TIMES_CLEAR")))},dependencies:[F],styles:['[_nghost-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;flex:1;overflow-y:auto}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:50%;padding-right:20px}@media only screen and (max-width: 700px){[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;padding-right:8px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{max-width:40%}[_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:1em;width:1em}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%], [_nghost-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:1em 0 4px;font-weight:700;border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:2;text-align:left;list-style:none;padding:0;margin:0;vertical-align:middle}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;margin-left:2px}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:right;margin-left:3px;font-size:.8em}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:19px;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:-19px}@media only screen and (max-width: 280px){[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   .clear-times[_ngcontent-%COMP%]{margin-top:10px;padding:12px 20px}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;border:1px solid var(--card-layout-color-border);background-color:var(--input-background-color);border-color:var(--input-border-color);color:var(--input-text-color);margin-top:8px;margin-bottom:8px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";right:8px;top:16px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid var(--input-text-color);pointer-events:none}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:none;resize:none;outline:none;font-size:10px;background-color:var(--input-background-color);color:var(--input-text-color)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-within{outline:2px solid var(--card-layout-color-border)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-background-color);border:none;width:30px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-text-color);border:none;width:30px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--input-text-color)}']});let p=d;return p})();export{_e as SettingsComponent};
