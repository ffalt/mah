import{a as $,c as T,d as N,f as Y}from"./chunk-IP5LNI66.js";import{n as j}from"./chunk-UAV36HKI.js";import{D as R,s as H,t as G,u as D,v as Z}from"./chunk-T4PI2SPK.js";import{E as u,Ea as S,F as v,Fa as O,G as x,H as q,Ha as M,Ia as y,Ja as P,Oa as l,Pa as a,Qa as C,Ra as f,Sa as m,Ua as h,Va as g,Ya as B,Za as A,b as I,ca as L,cb as d,db as _,eb as b,fb as z,ga as n,hb as E,kb as s,lb as c,qa as V,qb as F,vb as K,wb as U,y as k}from"./chunk-PC2ESRTN.js";var Q=["kyodaiInput"],X=(r,p)=>p.source;function J(r,p){if(r&1){let t=f();l(0,"li")(1,"input",10),h("change",function(){let i=u(t).$implicit,o=g();return o.app.settings.lang=i.key,v(o.app.setLang())}),a(),l(2,"label",11),d(3),a()()}if(r&2){let t=p.$implicit,e=p.$index,i=g();n(),m("id","lang"+(e+1))("value",t.key)("checked",i.app.settings.lang===t.key),n(),m("htmlFor","lang"+(e+1)),n(),_(t.title)}}function W(r,p){if(r&1){let t=f();l(0,"li")(1,"input",12),h("change",function(){let i=u(t).$implicit,o=g();return o.app.settings.background=i.img||"",v(o.app.settings.save())}),a(),l(2,"label",11),d(3),s(4,"translate"),a()()}if(r&2){let t=p.$implicit,e=p.$index,i=g();n(),m("id",E("back",e))("value",t.img)("checked",i.app.settings.background===t.img),n(),m("htmlFor",E("back",e)),n(),_(c(4,7,t.name))}}function ee(r,p){if(r&1){let t=f();l(0,"li")(1,"input",13),h("change",function(){let i=u(t).$implicit,o=g();return o.app.settings.theme=i.id||"",v(o.app.settings.save())}),a(),l(2,"label",11),d(3),s(4,"translate"),a()()}if(r&2){let t=p.$implicit,e=p.$index,i=g();n(),m("id",E("color",e))("value",t.id)("checked",i.app.settings.theme===t.id),n(),m("htmlFor",E("color",e)),n(),_(c(4,7,t.name))}}function te(r,p){r&1&&(x(),C(0,"path",18))}function ne(r,p){r&1&&(x(),C(0,"path",19))}function ie(r,p){r&1&&(x(),C(0,"path",20))}function oe(r,p){r&1&&(x(),C(0,"path",21))}function ae(r,p){r&1&&(x(),C(0,"path",22))}function re(r,p){if(r&1){let t=f();l(0,"li")(1,"input",14),h("change",function(){let i=u(t).$implicit,o=g();return o.app.settings.tileset=i.id,v(o.app.settings.save())}),a(),l(2,"label",11),d(3),a(),l(4,"a",15),x(),l(5,"svg",16),C(6,"path",17),S(7,te,1,0,":svg:path",18)(8,ne,1,0,":svg:path",19)(9,ie,1,0,":svg:path",20)(10,oe,1,0,":svg:path",21)(11,ae,1,0,":svg:path",22),a()()()}if(r&2){let t,e=p.$implicit,i=p.$index,o=g();n(),m("id",E("imageset",i))("value",e.id)("checked",o.app.settings.tileset===e.id),n(),m("htmlFor",E("imageset",i)),n(),b(" ",e.name," "),n(),m("href",E("https://github.com/ffalt/mah/blob/main/src/assets/svg/README.md#",e.id,"svg"),L)("title",o.licenses[e.license]||"?"),n(3),O((t=e.license)==="cca"?7:t==="gpl"?8:t==="free"?9:t==="per"?10:t==="pub"?11:-1)}}function le(r,p){if(r&1){let t=f();l(0,"li")(1,"input",23),h("change",function(){u(t);let i=g();return i.app.settings.tileset="kyodai",v(i.app.settings.save())}),a(),l(2,"label",24),d(3),s(4,"translate"),a()()}if(r&2){let t=g();n(),m("checked",t.app.settings.tileset==="kyodai"),n(2),_(c(4,2,"KYODAI_TILESET"))}}function pe(r,p){if(r&1&&(l(0,"option",33),d(1),a()),r&2){let t=p.$implicit;m("value",t.source),n(),z("",t.name," - ",t.author)}}function de(r,p){if(r&1){let t=f();l(0,"div",1)(1,"p"),d(2),s(3,"translate"),a(),l(4,"div",25)(5,"textarea",26,0),h("change",function(i){u(t);let o=g();return v(o.updateKyodaiUrl(i))}),a(),l(7,"button",27),h("click",function(){u(t);let i=g();return v(i.clearKyodaiUrl())}),x(),l(8,"svg",28),C(9,"path",29)(10,"path",30),a()(),q(),l(11,"select",31),h("change",function(i){u(t);let o=g();return v(o.setKyodaiUrl(i))}),l(12,"option",32),d(13),s(14,"translate"),a(),y(15,pe,2,3,"option",33,X),a()(),l(17,"button",34),h("click",function(){u(t);let i=g();return v(i.applyKyodaiUrl())}),d(18),s(19,"translate"),a()()}if(r&2){let t=g();n(2),_(c(3,4,"KYODAI_TILESET_SETTINGS")),n(3),m("value",t.app.settings.kyodaiUrl?t.app.settings.kyodaiUrl:""),n(8),_(c(14,6,"KYODAI_TILESET_EXAMPLES")),n(2),P(t.kyodaiTileSets),n(3),_(c(19,8,"KYODAI_TILESET_LOAD"))}}var fe=(()=>{let p=class p{constructor(){this.kyodaiInput=F.required("kyodaiInput"),this.canKyodai=$.kyodai,this.kyodaiTileSets=Y,this.sets=Z,this.backs=G,this.themes=H,this.licenses=D,this.languages=Object.keys(T).map(e=>({key:e,title:T[e].title})),this.app=k(N),this.storage=k(R),this.layoutService=k(j),this.translate=k(K)}updateKyodaiUrl(e){this.app.settings.kyodaiUrl=e.target.value,this.app.settings.save()}clearKyodaiUrl(){this.app.settings.kyodaiUrl=void 0,this.app.settings.save()}setKyodaiUrl(e){let i=this.kyodaiInput();i.nativeElement&&(e.preventDefault(),e.stopPropagation(),i.nativeElement.value=e.target.value)}applyKyodaiUrl(){let e=this.kyodaiInput();e.nativeElement&&(this.app.settings.kyodaiUrl=e.nativeElement.value,this.app.settings.save())}clearTimes(){return I(this,null,function*(){let e=yield this.layoutService.get();for(let i of e.items)this.storage.clearScore(i.id)})}clearTimesClick(){confirm(this.translate.instant("BEST_TIMES_CLEAR_SURE"))&&this.clearTimes().catch(e=>{console.error(e)})}};p.\u0275fac=function(i){return new(i||p)},p.\u0275cmp=V({type:p,selectors:[["app-settings"]],viewQuery:function(i,o){i&1&&B(o.kyodaiInput,Q,5),i&2&&A()},decls:61,vars:35,consts:[["kyodaiInput",""],[1,"settings"],[1,"buttons"],[1,"radio"],["type","radio","name","lang","id","lang0","value","auto",3,"change","checked"],["for","lang0"],[1,"radio","radio-tilesets"],[1,"check"],["type","checkbox",3,"change","checked"],[1,"clear-times",3,"click"],["type","radio","name","lang",3,"change","id","value","checked"],[3,"for"],["type","radio","name","back",3,"change","id","value","checked"],["type","radio","name","color",3,"change","id","value","checked"],["type","radio","name","imageset",3,"change","id","value","checked"],["target","_blank",3,"href","title"],["xmlns","http://www.w3.org/2000/svg",0,"xml","space","preserve","fill-rule","evenodd","stroke-linecap","round","clip-rule","evenodd","viewBox","0 0 1067 1067"],["fill","#fff","fill-rule","nonzero","stroke","#000","stroke-width","62.55","d","M1034.158 535.104c0 276.808-224.169 501.207-500.698 501.207-276.535 0-500.703-224.398-500.703-501.207S256.926 33.897 533.46 33.897c276.535 0 500.694 224.398 500.694 501.207h.005Z"],["fill-rule","nonzero","d","m463.156 546.582 68.977 28.564q-6.95 39.752-21.892 66.412t-37.095 40.228q-22.152 13.568-56.381 13.568-41.526 0-67.848-16.544-26.322-16.543-45.435-58.2-19.112-41.657-19.112-106.641 0-86.646 33.62-133.182t95.126-46.536q48.127 0 75.667 26.66t40.917 81.885l-69.499 21.185q-3.649-15.948-7.645-23.328-6.603-12.378-16.158-19.043t-21.371-6.665q-26.757 0-41.004 29.517-10.773 21.9-10.772 68.793 0 58.082 12.857 79.623 12.858 21.543 36.139 21.542 22.587 0 34.141-17.377t16.767-50.464Zm276.778 0 68.977 28.564q-6.95 39.752-21.892 66.412t-37.095 40.228-56.381 13.568q-41.526 0-67.848-16.544-26.322-16.543-45.435-58.2-19.112-41.657-19.112-106.641 0-86.646 33.62-133.182t95.126-46.536q48.127 0 75.667 26.66t40.917 81.885l-69.499 21.185q-3.649-15.948-7.645-23.328-6.603-12.378-16.158-19.043t-21.371-6.665q-26.757 0-41.004 29.517-10.773 21.9-10.772 68.793 0 58.082 12.857 79.623 12.858 21.543 36.139 21.542 22.587 0 34.141-17.377t16.767-50.464Z"],["fill-rule","nonzero","d","M288.297 575.269v-72.601H409.92v148.773q-34.923 32.611-61.767 44.394t-63.678 11.783q-45.348 0-73.929-21.185t-44.305-63.08q-15.724-41.894-15.724-96.167 0-57.13 17.201-99.38 17.2-42.251 50.387-64.151 25.889-16.9 69.672-16.901 42.22 0 63.157 10.474t34.749 32.492 20.763 55.82l-75.927 18.567q-4.691-19.756-15.898-30.231-11.207-10.474-28.581-10.474-25.889 0-41.265 24.637t-15.377 77.957q0 56.653 15.55 80.933t43.35 24.28q13.205 0 25.193-5.237t27.452-17.853V575.27zM456.31 352.704h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089v129.492H456.31zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm178.264-148.773h78.707v263.031h122.839v85.931H713.629z"],["fill-rule","nonzero","d","M156.426 390.204h151.806v58.494h-90.135v47.538h76.987v54.965h-76.987v111.231h-61.671zm185.691 272.228V390.205H444.45q28.464 0 43.509 6.685t24.262 24.79 9.217 44.102q0 22.655-7.048 39.089-7.049 16.434-19.382 26.647-7.862 6.5-21.551 10.77 10.978 5.013 15.994 10.027 3.389 3.342 9.827 14.298t8.607 16.898l29.683 78.92h-69.397L435.37 579.24q-6.235-16.155-11.114-20.983-6.642-6.314-15.045-6.314h-5.422v110.488zm61.671-161.925h25.888q4.202 0 16.265-3.714 6.1-1.67 9.962-8.542 3.863-6.87 3.863-15.784 0-13.184-6.099-20.241-6.1-7.056-22.906-7.056h-26.973zm153.296-110.303H721.63v58.122H618.619v43.267h95.556v55.522h-95.556v53.666h105.993v61.65H557.084zm200.465 0h164.546v58.122H819.084v43.267h95.556v55.522h-95.556v53.666h105.993v61.65H757.549z"],["fill-rule","nonzero","d","M309.898 348.538h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm177.916-148.773H697.7q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85-7.993-11.426-30.058-11.426h-22.413v77.838Z"],["fill-rule","nonzero","d","M309.898 348.538h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm179.306-148.773h116.932q34.575 0 55.86 12.854t35.184 36.896 20.155 55.939 6.255 67.603q0 55.938-9.295 86.765t-25.801 51.654-35.444 27.731q-25.888 9.521-46.912 9.521H568.261V348.539Zm78.707 79.028v190.668h19.286q24.672 0 35.097-7.498t16.332-26.184 5.907-60.58q0-55.462-13.205-75.934-13.205-20.47-43.784-20.471h-19.633Z"],["type","radio","name","imageset","value","kyodai","id","imageset-kyodai",3,"change","checked"],["for","imageset-kyodai"],[1,"input-wrapper"],["type","text","name","kyodai",3,"change","value"],[1,"clear-kyodai",3,"click"],["width","17px","height","17px","viewBox","0 0 35 35"],["d","M28.814,30.064a1.247,1.247,0,0,1-.884-.367L5.3,7.07A1.249,1.249,0,0,1,7.07,5.3L29.7,27.93a1.251,1.251,0,0,1-.884,2.134Z"],["d","M6.186,30.064A1.251,1.251,0,0,1,5.3,27.93L27.93,5.3A1.25,1.25,0,0,1,29.7,7.07L7.07,29.7A1.247,1.247,0,0,1,6.186,30.064Z"],[1,"example-kyodai",3,"change"],["value",""],[3,"value"],[3,"click"]],template:function(i,o){i&1&&(l(0,"div",1)(1,"p"),d(2),s(3,"translate"),a(),l(4,"div",2)(5,"form")(6,"ul",3)(7,"li")(8,"input",4),h("change",function(){return o.app.settings.lang="auto",o.app.setLang()}),a(),l(9,"label",5),d(10),s(11,"translate"),a()(),y(12,J,4,5,"li",null,M),a()()(),l(14,"p"),d(15),s(16,"translate"),a(),l(17,"div",2)(18,"form")(19,"ul",3),y(20,W,5,9,"li",null,M),a()()(),l(22,"p"),d(23),s(24,"translate"),a(),l(25,"div",2)(26,"form")(27,"ul",3),y(28,ee,5,9,"li",null,M),a()()()(),l(30,"div",1)(31,"p"),d(32),s(33,"translate"),a(),l(34,"div",2)(35,"form")(36,"ul",6),y(37,re,12,11,"li",null,M),S(39,le,5,4,"li"),a()()(),S(40,de,20,10,"div",1),l(41,"p"),d(42),s(43,"translate"),a(),l(44,"div")(45,"label",7)(46,"input",8),h("change",function(){return o.app.settings.contrast=!o.app.settings.contrast,o.app.settings.save()}),a(),d(47),s(48,"translate"),a(),C(49,"br"),l(50,"label",7)(51,"input",8),h("change",function(){return o.app.settings.dark=!o.app.settings.dark,o.app.settings.save()}),a(),d(52),s(53,"translate"),a()(),l(54,"p"),d(55),s(56,"translate"),a(),l(57,"div")(58,"button",9),h("click",function(){return o.clearTimesClick()}),d(59),s(60,"translate"),a()()()),i&2&&(n(2),_(c(3,15,"LANG")),n(6),m("checked",o.app.settings.lang==="auto"),n(2),_(c(11,17,"LANG_AUTO")),n(2),P(o.languages),n(3),_(c(16,19,"BACKGROUND")),n(5),P(o.backs),n(3),_(c(24,21,"THEME")),n(5),P(o.themes),n(4),_(c(33,23,"TILESET")),n(5),P(o.sets),n(2),O(o.canKyodai?39:-1),n(),O(o.canKyodai&&o.app.settings.tileset==="kyodai"?40:-1),n(2),_(c(43,25,"TILES")),n(4),m("checked",o.app.settings.contrast),n(),b(" ",c(48,27,"HIGHER_CONTRAST")," "),n(4),m("checked",o.app.settings.dark),n(),b(" ",c(53,29,"TILES_DARK")," "),n(3),_(c(56,31,"BEST_TIMES")),n(4),_(c(60,33,"BEST_TIMES_CLEAR")))},dependencies:[U],styles:['[_nghost-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;flex:1;overflow-y:auto}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:50%;padding-right:20px}@media only screen and (max-width: 700px){[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;padding-right:8px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{max-width:40%}[_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:1em;width:1em}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%], [_nghost-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:1em 0 4px;font-weight:700;border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:2;text-align:left;list-style:none;padding:0;margin:0;vertical-align:text-bottom}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;line-height:30px;white-space:nowrap;text-overflow:ellipsis;flex:1}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain;vertical-align:middle}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:3px;line-height:30px;font-size:.8em}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:19px;line-height:30px;display:flex;gap:3px;height:30ox;align-items:center}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:-14px}@media only screen and (max-width: 280px){[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   .check[_ngcontent-%COMP%]{padding:2px}[_nghost-%COMP%]   .check[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .clear-times[_ngcontent-%COMP%]{margin-top:10px;padding:12px 20px}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;border:1px solid var(--card-layout-color-border);background-color:var(--input-background-color);border-color:var(--input-border-color);color:var(--input-text-color);margin-top:8px;margin-bottom:8px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";right:8px;top:16px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid var(--input-text-color);pointer-events:none}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:none;resize:none;outline:none;font-size:10px;background-color:var(--input-background-color);color:var(--input-text-color)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-within{outline:2px solid var(--card-layout-color-border)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-background-color);border:none;width:30px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-text-color);border:none;width:30px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--input-text-color)}']});let r=p;return r})();export{fe as SettingsComponent};
