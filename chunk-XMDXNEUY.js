import{a as z}from"./chunk-OIYEXXB7.js";import{b,c as j,e as q}from"./chunk-MPSRV6SZ.js";import"./chunk-ATVME3AG.js";import{a as F}from"./chunk-TTFSU4TC.js";import{o as Q}from"./chunk-76WANFPN.js";import{E as Y,t as G,u as R,w as N,x as H}from"./chunk-JDE2M4PC.js";import{E as h,Ea as P,F as x,Fa as E,G as I,H as B,Ha as S,Ia as y,Ja as f,Ka as g,La as r,Ma as o,Na as w,Ra as C,Ta as u,Va as _,Ya as V,Za as A,b as T,cb as s,db as m,eb as M,fb as K,ga as t,hb as v,kb as c,lb as d,qa as L,rb as $,wb as U,xb as D,y as k}from"./chunk-4UN4TNNB.js";var Z=["kyodaiInput"],X=(l,p)=>p.source;function J(l,p){if(l&1){let e=C();r(0,"li")(1,"input",10),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.lang=i.key,x(a.app.setLang())}),o(),r(2,"label",11),s(3),o()()}if(l&2){let e=p.$implicit,n=p.$index,i=_();t(),g("id","lang"+(n+1))("value",e.key)("checked",i.app.settings.lang===e.key),t(),g("for","lang"+(n+1)),t(),m(e.title)}}function W(l,p){if(l&1){let e=C();r(0,"li")(1,"input",12),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.background=i.img||"",x(a.app.settings.save())}),o(),r(2,"label",11),s(3),c(4,"translate"),o()()}if(l&2){let e=p.$implicit,n=p.$index,i=_();t(),g("id",v("back",n))("value",e.img)("checked",i.app.settings.background===e.img),t(),g("for",v("back",n)),t(),m(d(4,7,e.name))}}function ee(l,p){if(l&1){let e=C();r(0,"li")(1,"input",13),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.theme=i.id||"",x(a.app.settings.save())}),o(),r(2,"label",11),s(3),c(4,"translate"),o()()}if(l&2){let e=p.$implicit,n=p.$index,i=_();t(),g("id",v("color",n))("value",e.id)("checked",i.app.settings.theme===e.id),t(),g("for",v("color",n)),t(),m(d(4,7,e.name))}}function te(l,p){if(l&1){let e=C();r(0,"li")(1,"input",14),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.tileset=i.id,x(a.app.settings.save())}),o(),r(2,"label",11),s(3),o(),w(4,"app-license-link",15),o()}if(l&2){let e=p.$implicit,n=p.$index,i=_();t(),g("id",v("imageset",n))("value",e.id)("checked",i.app.settings.tileset===e.id),t(),g("for",v("imageset",n)),t(),M(" ",e.name," "),t(),g("imagesetId",e.id)("licenseKey",e.license)}}function ne(l,p){if(l&1){let e=C();r(0,"li")(1,"input",16),u("change",function(){h(e);let i=_();return i.app.settings.tileset="kyodai",x(i.app.settings.save())}),o(),r(2,"label",17),s(3),c(4,"translate"),o()()}if(l&2){let e=_();t(),g("checked",e.app.settings.tileset==="kyodai"),t(2),m(d(4,2,"KYODAI_TILESET"))}}function ie(l,p){if(l&1&&(r(0,"option",26),s(1),o()),l&2){let e=p.$implicit;g("value",e.source),t(),K("",e.name," - ",e.author)}}function ae(l,p){if(l&1){let e=C();r(0,"fieldset")(1,"legend"),s(2),c(3,"translate"),o(),r(4,"div",18)(5,"textarea",19,0),u("change",function(i){h(e);let a=_();return x(a.updateKyodaiUrl(i))}),o(),r(7,"button",20),u("click",function(){h(e);let i=_();return x(i.clearKyodaiUrl())}),I(),r(8,"svg",21),w(9,"path",22)(10,"path",23),o()(),B(),r(11,"select",24),u("change",function(i){h(e);let a=_();return x(a.setKyodaiUrl(i))}),r(12,"option",25),s(13),c(14,"translate"),o(),y(15,ie,2,3,"option",26,X),o()(),r(17,"button",27),u("click",function(){h(e);let i=_();return x(i.applyKyodaiUrl())}),s(18),c(19,"translate"),o()()}if(l&2){let e=_();t(2),m(d(3,4,"KYODAI_TILESET_SETTINGS")),t(3),g("value",e.app.settings.kyodaiUrl?e.app.settings.kyodaiUrl:""),t(8),m(d(14,6,"KYODAI_TILESET_EXAMPLES")),t(2),f(e.kyodaiTileSets),t(3),m(d(19,8,"KYODAI_TILESET_LOAD"))}}var xe=(()=>{let p=class p{constructor(){this.kyodaiInput=$.required("kyodaiInput"),this.canKyodai=F.kyodai,this.kyodaiTileSets=q,this.sets=N,this.backs=R,this.themes=G,this.languages=Object.keys(b).map(n=>({key:n,title:b[n].title})),this.app=k(j),this.storage=k(Y),this.layoutService=k(Q),this.translate=k(U)}updateKyodaiUrl(n){this.app.settings.kyodaiUrl=n.target.value,this.app.settings.save()}clearKyodaiUrl(){this.app.settings.kyodaiUrl=void 0,this.app.settings.tileset=H,this.app.settings.save()}setKyodaiUrl(n){let i=this.kyodaiInput();i.nativeElement&&(n.preventDefault(),n.stopPropagation(),i.nativeElement.value=n.target.value)}applyKyodaiUrl(){let n=this.kyodaiInput();n.nativeElement&&(this.app.settings.kyodaiUrl=n.nativeElement.value,this.app.settings.save())}clearTimes(){return T(this,null,function*(){let n=yield this.layoutService.get();for(let i of n.items)this.storage.clearScore(i.id)})}clearTimesClick(){confirm(this.translate.instant("BEST_TIMES_CLEAR_SURE"))&&this.clearTimes().catch(n=>{console.error(n)})}};p.\u0275fac=function(i){return new(i||p)},p.\u0275cmp=L({type:p,selectors:[["app-settings"]],viewQuery:function(i,a){i&1&&V(a.kyodaiInput,Z,5),i&2&&A()},decls:59,vars:35,consts:[["kyodaiInput",""],[1,"settings"],[1,"radio"],["type","radio","name","lang","id","lang0","value","auto",3,"change","checked"],["for","lang0"],[1,"radio","radio-tilesets"],[1,"checks"],[1,"check"],["type","checkbox",3,"change","checked"],[1,"clear-times",3,"click"],["type","radio","name","lang",3,"change","id","value","checked"],[3,"for"],["type","radio","name","back",3,"change","id","value","checked"],["type","radio","name","color",3,"change","id","value","checked"],["type","radio","name","imageset",3,"change","id","value","checked"],[3,"imagesetId","licenseKey"],["type","radio","name","imageset","value","kyodai","id","imageset-kyodai",3,"change","checked"],["for","imageset-kyodai"],[1,"input-wrapper"],["type","text","name","kyodai",3,"change","value"],[1,"clear-kyodai",3,"click"],["width","17px","height","17px","viewBox","0 0 35 35"],["d","M28.814,30.064a1.247,1.247,0,0,1-.884-.367L5.3,7.07A1.249,1.249,0,0,1,7.07,5.3L29.7,27.93a1.251,1.251,0,0,1-.884,2.134Z"],["d","M6.186,30.064A1.251,1.251,0,0,1,5.3,27.93L27.93,5.3A1.25,1.25,0,0,1,29.7,7.07L7.07,29.7A1.247,1.247,0,0,1,6.186,30.064Z"],[1,"example-kyodai",3,"change"],["value",""],[3,"value"],[3,"click"]],template:function(i,a){i&1&&(r(0,"div",1)(1,"fieldset")(2,"legend"),s(3),c(4,"translate"),o(),r(5,"ul",2)(6,"li")(7,"input",3),u("change",function(){return a.app.settings.lang="auto",a.app.setLang()}),o(),r(8,"label",4),s(9),c(10,"translate"),o()(),y(11,J,4,5,"li",null,S),o()(),r(13,"fieldset")(14,"legend"),s(15),c(16,"translate"),o(),r(17,"ul",2),y(18,W,5,9,"li",null,S),o()(),r(20,"fieldset")(21,"legend"),s(22),c(23,"translate"),o(),r(24,"ul",2),y(25,ee,5,9,"li",null,S),o()()(),r(27,"div",1)(28,"fieldset")(29,"legend"),s(30),c(31,"translate"),o(),r(32,"ul",5),y(33,te,5,9,"li",null,S),P(35,ne,5,4,"li"),o()(),P(36,ae,20,10,"fieldset"),r(37,"fieldset")(38,"legend"),s(39),c(40,"translate"),o(),r(41,"ul",6)(42,"li")(43,"label",7)(44,"input",8),u("change",function(){return a.app.settings.contrast=!a.app.settings.contrast,a.app.settings.save()}),o(),s(45),c(46,"translate"),o()(),r(47,"li")(48,"label",7)(49,"input",8),u("change",function(){return a.app.settings.dark=!a.app.settings.dark,a.app.settings.save()}),o(),s(50),c(51,"translate"),o()()()(),r(52,"fieldset")(53,"legend"),s(54),c(55,"translate"),o(),r(56,"button",9),u("click",function(){return a.clearTimesClick()}),s(57),c(58,"translate"),o()()()),i&2&&(t(3),m(d(4,15,"LANG")),t(4),g("checked",a.app.settings.lang==="auto"),t(2),m(d(10,17,"LANG_AUTO")),t(2),f(a.languages),t(4),m(d(16,19,"BACKGROUND")),t(3),f(a.backs),t(4),m(d(23,21,"THEME")),t(3),f(a.themes),t(5),m(d(31,23,"TILESET")),t(3),f(a.sets),t(2),E(a.canKyodai?35:-1),t(),E(a.canKyodai&&a.app.settings.tileset==="kyodai"?36:-1),t(3),m(d(40,25,"TILES")),t(5),g("checked",a.app.settings.contrast),t(),M(" ",d(46,27,"HIGHER_CONTRAST")," "),t(4),g("checked",a.app.settings.dark),t(),M(" ",d(51,29,"TILES_DARK")," "),t(4),m(d(55,31,"BEST_TIMES")),t(3),m(d(58,33,"BEST_TIMES_CLEAR")))},dependencies:[z,D],styles:['[_nghost-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-between;flex:1;overflow-y:auto;gap:16px}@media only screen and (max-width: 1000px){[_nghost-%COMP%]{flex-flow:column;gap:8px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{width:50%;flex-flow:column;display:flex;gap:16px}@media only screen and (max-width: 1000px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width: 700px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{gap:8px}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:1px solid var(--main-bg-color-lt);border-radius:8px;padding:8px 12px 12px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding:0 6px;font-weight:700}[_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:1em;width:1em}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%], [_nghost-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   li[_ngcontent-%COMP%]{padding-left:19px;line-height:34px;display:flex;gap:3px;height:34px;align-items:center;border-radius:8px}[_nghost-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:2;text-align:left;list-style:none;padding:0;margin:0;vertical-align:text-bottom}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;line-height:34px;white-space:nowrap;text-overflow:ellipsis;flex:1}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:-14px}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   .checks[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}[_nghost-%COMP%]   .checks[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:0}[_nghost-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{padding:2px}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;border:1px solid var(--card-layout-color-border);background-color:var(--input-background-color);border-color:var(--input-border-color);color:var(--input-text-color);margin-top:8px;margin-bottom:8px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";right:8px;top:16px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid var(--input-text-color);pointer-events:none}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:none;resize:none;outline:none;font-size:10px;background-color:var(--input-background-color);color:var(--input-text-color)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-within{outline:2px solid var(--card-layout-color-border)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-background-color);border:none;width:34px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-text-color);border:none;width:34px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--input-text-color)}']});let l=p;return l})();export{xe as SettingsComponent};
