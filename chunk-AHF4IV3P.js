import{a as Q,b as W,c as Ot,d as tt,e as Mt}from"./chunk-44HZOIJ3.js";import{a as Ct,b as ht,g as xt,h as H,j as vt,l as ft,n as F}from"./chunk-MWUYH7ZA.js";import{g as it,m as I}from"./chunk-XMPER2Q5.js";import{$a as T,Ca as z,Da as y,E as C,Ea as b,F as h,Fa as st,G,Ga as U,Ha as B,Ia as V,Ja as x,Ka as s,L as Y,La as c,Ma as v,Na as Z,Oa as A,Pa as K,Qa as w,Sa as u,Ta as q,Ua as d,Xa as ct,Ya as pt,ab as dt,b as at,bb as g,cb as P,db as E,eb as L,fa as nt,fb as M,ga as a,hb as mt,ib as _t,jb as m,kb as _,nb as k,ob as R,pb as ut,qa as D,qb as gt,sa as lt,ub as J,vb as N,y as S}from"./chunk-UWITPWPI.js";var X=class{constructor(){this.levels=[],this.init(2,2,1)}init(r,i,e){let t=[];for(let n=0;n<e;n++){t[n]=[];for(let l=0;l<r;l++){t[n][l]=[];for(let p=0;p<i;p++)t[n][l][p]=0}}this.levels=t}clear(){let r=this.levels;for(let i of r)for(let e of i)for(let t=0;t<e.length;t++)e[t]=0}inBounds(r,i,e){let t=r>=0&&i>=0&&e>=0,n=r<this.levels.length&&i<this.levels[0].length&&e<this.levels[0][0].length;return t&&n}isTile(r,i,e){return this.levels[r][i][e]>0}isTilePosInvalid(r,i,e){let t=this.levels[r];if(!t[i+1]||t[i].length-1===e)return!0;let n=(p,f)=>{let O=t[i+p];return O&&O[e+f]||0};return[[0,1],[-1,1],[-1,-1],[1,0],[1,-1],[1,1]].some(([p,f])=>n(p,f)>0)}isTilePosBlocked(r,i,e){let t=this.levels[r];return t[i][e-1]>0?!0:t[i-1]?t[i-1][e]>0?!0:t[i-1][e-1]>0:!1}get(r,i,e){return this.levels[r][i][e]||0}setValue(r,i,e,t){this.levels[r][i][e]=t}applyMapping(r,i,e,t){let n=H(r,i,e,t);this.init(n.x+1,n.y+1,n.z);for(let l of r){let p=l[0],f=l[1],O=l[2];this.setValue(p,f,O,1)}}};function Pt(o){return yt([o])}function yt(o){return JSON.stringify(Bt(o))}function ot(o){let r=tt(o.mapping);return{id:xt(r),name:o.name,by:!o.by||o.by.length===0?void 0:o.by,cat:!o.category||o.category.length===0?void 0:o.category,map:Ot(r)}}function Bt(o){return{mah:"1.0",boards:o.map(i=>ot(i))}}function bt(o){let r=new X,i=H(o.mapping,0,0,0);r.init(i.x+1,i.y+1,i.z);for(let t of o.mapping){let n=t[0],l=t[1],p=t[2];r.setValue(n,l,p,1),r.setValue(n,l+1,p,2),r.setValue(n,l,p+1,4),r.setValue(n,l+1,p+1,3)}let e=["mahjongg-layout-v1.1",`# name: ${o.name}`,`# by: ${o.by}`,`# category: ${o.category}`,"# Board size in quarter tiles",`w${i.x+1}`,`h${i.y+1}`,"# Board depth",`d${i.z}`];for(let[t,n]of r.levels.entries()){let l=`# Level ${t} `;e.push(`${l}${"-".repeat(Math.max(i.x-l.length,0))}`);for(let p=0;p<=i.y;p++){let f=[];for(let O=0;O<=i.x;O++)f.push(n[O][p]||".");e.push(f.join(""))}}return e.join(`
`)}function Vt(o,r,i){let e=H(o,0,0,0),t=Math.max(0,Math.floor((i-e.y)/2)),n=Math.max(0,Math.floor((r-e.x)/2));return o.map(l=>[l[0],l[1]+n,l[2]+t])}function Rt(o){let r=new X,i=20,e=34,t=5,n=Vt(o,e,i);r.applyMapping(n,t,e,i);let l=[];for(let p=0;p<t;p++)for(let f=0;f<i;f++)for(let O=0;O<e;O++)l.push(r.get(p,O,f).toString());return l.join("")}function wt(o){let r=o.by?` by ${o.by}`:"",i=o.category?` :: ${o.category}`:"";return`Kyodai 6.0
${o.name}${r}${i}
${Rt(o.mapping)}
`}function Et(o){rt("mah-layouts.mah",yt(o),"text/json")}function rt(o,r,i){let e=new Blob([r],{type:i}),t=document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=o,t.click()}function Ft(o,r){if(o&1){let i=w();s(0,"div",0)(1,"div",6)(2,"label"),g(3),m(4,"translate"),c(),s(5,"input",7),u("input",function(t){C(i);let n=d();return h(n.layout().name=t.target.value)})("change",function(){C(i);let t=d();return h(t.update())})("blur",function(){C(i);let t=d();return h(t.update())}),c(),s(6,"label"),g(7),m(8,"translate"),c(),s(9,"input",7),u("input",function(t){C(i);let n=d();return h(n.layout().by=t.target.value)})("change",function(){C(i);let t=d();return h(t.update())})("blur",function(){C(i);let t=d();return h(t.update())}),c(),s(10,"label"),g(11),m(12,"translate"),c(),s(13,"input",7),u("input",function(t){C(i);let n=d();return h(n.layout().category=t.target.value)})("change",function(){C(i);let t=d();return h(t.update())})("blur",function(){C(i);let t=d();return h(t.update())}),c()(),s(14,"div",8),v(15,"app-layout-preview",9),c()()}if(o&2){let i=d();a(3),P(_(4,7,"EDITOR_LAYOUT_NAME")),a(2),x("value",i.layout().name),a(2),P(_(8,9,"EDITOR_LAYOUT_BY")),a(2),x("value",i.layout().by),a(2),P(_(12,11,"EDITOR_LAYOUT_CATEGORY")),a(2),x("value",i.layout().category),a(2),x("layout",i.layout())}}function Zt(o,r){if(o&1){let i=w();s(0,"li")(1,"input",10),u("change",function(){let t=C(i).$implicit,n=d();return h(n.chooseFormat(t))}),c(),s(2,"label",11),g(3),c()()}if(o&2){let i=r.$implicit,e=d();a(),x("id","format_"+i.name)("value",i)("checked",e.format===i),a(),x("for","format_"+i.name),a(),P(i.name)}}function Nt(o,r){if(o&1){let i=w();s(0,"button",4),u("click",function(){C(i);let t=d();return h(t.saveAsCopy())}),g(1),m(2,"translate"),c()}o&2&&(a(),P(_(2,1,"EDITOR_LAYOUT_SAVE_AS_COPY")))}var Yt=[{name:"Mah",ext:"mah",func:Pt,type:"text/json"},{name:"Kyodai",ext:"lay",func:wt,type:"text/lay"},{name:"Kmahjongg",ext:"layout",func:bt,type:"text/layout"}],Tt=(()=>{let r=class r{constructor(){this.layout=R.required(),this.savedEvent=k(),this.exportFormats=Yt,this.format=this.exportFormats[0],this.translate=S(J),this.layoutService=S(F)}ngOnInit(){this.layout()&&this.update()}ngOnChanges(e){e.layout&&this.update()}saveAsCopy(){this.layoutService.storeCustomBoards([this.exportLayout]);let e=this.layout();e.originalId=this.exportLayout.id,this.savedEvent.emit(!0)}save(){if(this.layoutService.layouts.items.some(n=>!n.custom&&n.id===this.exportLayout.id)){alert(this.translate.instant("EDITOR_BUILD_IN_EXISTS"));return}let e=[this.exportLayout.id],t=this.layout();t.originalId&&e.push(t.originalId),this.layoutService.removeCustomLayout(e),this.saveAsCopy()}chooseFormat(e){this.format=e,this.update()}download(){rt(this.filename,this.result,this.format.type),this.savedEvent.emit(!0)}update(){let e=this.layout();this.layoutName=e.name.toLocaleLowerCase().replace(/ /g,"_"),this.result=this.format.func(e),this.filename=`${this.layoutName}.${this.format.ext}`,this.exportLayout=ot(e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=D({type:r,selectors:[["app-editor-export-component"]],inputs:{layout:[1,"layout"]},outputs:{savedEvent:"savedEvent"},features:[Y],decls:24,vars:16,consts:[[1,"section"],[1,"export"],[1,"export-preview"],[1,"buttons"],[1,"text-button",3,"click"],[1,"text-button"],[1,"inputs"],["type","text",3,"input","change","blur","value"],[1,"preview"],[1,"svg-board",3,"layout"],["type","radio","name","format",3,"change","id","value","checked"],[3,"for"]],template:function(t,n){t&1&&(s(0,"h3"),g(1),m(2,"translate"),m(3,"translate"),c(),y(4,Ft,16,13,"div",0),s(5,"div",1)(6,"label"),g(7,"Format"),c(),s(8,"fieldset")(9,"ul"),B(10,Zt,4,5,"li",null,U),c()(),s(12,"div",2)(13,"pre"),g(14),c()(),v(15,"br"),s(16,"div",3)(17,"button",4),u("click",function(){return n.download()}),g(18),m(19,"translate"),c(),y(20,Nt,3,3,"button",5),s(21,"button",4),u("click",function(){return n.save()}),g(22),m(23,"translate"),c()()()),t&2&&(a(),L("",_(2,8,"EDITOR_SAVE")," / ",_(3,10,"EDITOR_EXPORT")),a(3),b(n.layout()?4:-1),a(6),V(n.exportFormats),a(4),P(n.result),a(4),L("",_(19,12,"EDITOR_LAYOUT_DOWNLOAD")," ",n.filename),a(2),b(n.layout()&&n.layout().originalId&&n.exportLayout.id!==n.layout().originalId?20:-1),a(2),P(_(23,14,"EDITOR_LAYOUT_SAVE")))},dependencies:[W,N],styles:["[_nghost-%COMP%]{color:var(--main-text-color)}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;padding-top:0;text-align:center}[_nghost-%COMP%]   .preview[_ngcontent-%COMP%]{max-height:180px;min-width:100px;padding-left:10px}[_nghost-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}[_nghost-%COMP%]   .inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:4px;font-size:16px;margin-bottom:8px}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .preview[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;cursor:pointer}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-left:10px}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   .export-preview[_ngcontent-%COMP%]{margin-top:16px}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   .export-preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{white-space:pre-line;overflow-wrap:break-word;font-family:monospace;text-align:left;overflow:auto;min-height:180px;max-height:180px;font-size:.8em;line-height:1em;background-color:#000}[_nghost-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{text-align:center;display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;background-color:#0000000d;background-image:none;border:1px solid var(--dialog-border-color);cursor:pointer;color:var(--main-text-color)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--main-text-color-hover);background-color:#0000001a;border:1px solid var(--dialog-border-color-hover)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button.text-button[_ngcontent-%COMP%]{padding:10px 16px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{color:var(--text-disabled-color);cursor:default}"]});let o=r;return o})();function kt(o,r){return this.gridID(r)}function At(o,r){if(o&1){let i=w();G(),Z(0,"rect",9),q("click",function(t){let n=C(i).$implicit,l=d();return h(l.onClickDraw(t,n))}),A()}if(o&2){let i=r.$implicit;dt(i.className),z("x",i.pos.x)("y",i.pos.y)}}function $t(o,r){if(o&1){let i=w();G(),Z(0,"g",10),q("mousedown",function(t){let n=C(i).$implicit,l=d();return h(l.onClickStone(t,n))}),Z(1,"g",11),K(2,"rect",12)(3,"rect",13)(4,"use",14),A()()}if(o&2){let i=r.$implicit;T("selected",i.source.selected)("hidden",i.source.picked)("hinted",i.source.hinted),z("transform",i.pos.translate)}}var St=(()=>{let r=class r{constructor(){this.imageSet=R(),this.level=R(),this.matrix=R.required(),this.isBoard=R(),this.clickBoardEvent=k(),this.clickDrawEvent=k(),this.clickStoneEvent=k(),this.drawStones=[],this.drawCells=[],this.rotate=!1,this.translate="",this.viewport="0 0 1470 960",this.emptySource=new it(0,0,0,0,0)}ngOnInit(){let e=this.level();e&&this.updateLevel(e)}gridID(e){return`${e.z}-${e.x}-${e.y}`}drawClass(e,t,n){let l="",p=this.matrix();return p.inBounds(e,t,n)||(l="invalid"),(p.isTile(e,t,n)||p.isTilePosBlocked(e,t,n))&&(l="tile"),p.isTilePosInvalid(e,t,n)&&(l="blocked"),e>0&&(p.isTile(e-1,t,n)||p.isTilePosBlocked(e-1,t,n))&&(l+=" below"),l}ngOnChanges(e){e.level&&this.updateLevel(e.level.currentValue)}onClickStone(e,t){this.clickStoneEvent.emit(t?.source),e.stopPropagation()}onClickBoard(e){this.clickBoardEvent.emit()}onClickDraw(e,t){this.clickDrawEvent.emit(t),e.stopPropagation()}calcDrawPos(e,t,n){let l={x:(I.tileWidth+2)*t/2+4,y:(I.tileHeight+2)*n/2+4,z:n+I.mY*(t+I.mX*e),translate:""};return l.translate=`translate(${l.x},${l.y})`,l}updateLevel(e){if(this.drawCells=[],this.drawStones=[],!e?.rows)return;let t=[];for(let[n,l]of e.rows.entries())for(let[p,f]of l.entries()){let O={x:n,y:p,z:e.z,v:f,visible:!0,pos:this.calcDrawPos(e.z,n,p),className:this.drawClass(e.z,n,p),source:f>0?new it(e.z,n,p,f,0):this.emptySource};this.drawCells.push(O),O.v>0&&t.push(O)}this.drawStones=vt(t),this.viewport=ft(this.drawCells,1470,960,!1)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=D({type:r,selectors:[["app-editor-board"]],inputs:{imageSet:[1,"imageSet"],level:[1,"level"],matrix:[1,"matrix"],isBoard:[1,"isBoard"]},outputs:{clickBoardEvent:"clickBoardEvent",clickDrawEvent:"clickDrawEvent",clickStoneEvent:"clickStoneEvent"},features:[Y],decls:15,vars:7,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMin meet",1,"board-svg",3,"mousedown"],["id","filter4198-8",2,"color-interpolation-filters","sRGB"],["in","SourceGraphic","stdDeviation","8"],["id","front","width","300","height","400","viewBox","0 0 300 400"],["d","m 151.73588,1025.0177 c -3.32683,-9.3138 -10.24843,-68.45389 5.31821,-90.62655 20.27717,-26.12032 219.43558,-16.45796 231.55506,-9.93184 11.07433,5.31702 -178.60366,0.0589 -204.85126,34.86646 -21.59349,30.0006 -26.50086,82.17843 -32.02201,65.69193 z","transform","rotate(180,229,666.5)",2,"fill","#000000","fill-opacity","0.15","fill-rule","evenodd","stroke","none","filter","url(#filter4198-8)"],["transform","translate(28,-614)","d","M -4.7687833,775.07096 C -9.6501835,741.99485 -16.84552,674.23676 -1.2788716,652.0641 18.998297,625.94378 233.50094,631.63117 263.31435,653.90999 276.21398,662.64856 70.349579,663.12124 47.099353,691.74479 24.390958,719.11242 0.65060847,818.18718 -4.7687833,775.07096 Z",2,"fill","#ffffff","fill-opacity","0.4","fill-rule","evenodd","stroke","none","filter","url(#filter4198-8)"],[1,"stage"],["stroke","black","stroke-width","1","width","37.5px","height","50px",1,"draw",3,"class"],[1,"draw",3,"selected","hidden","hinted"],["stroke","black","stroke-width","1","width","37.5px","height","50px",1,"draw",3,"click"],[1,"draw",3,"mousedown"],[1,"tile"],["x","3","y","3","width","75px","height","100px","rx","10","ry","10",1,"shadow"],["x","0","y","0","width","75","height","100","rx","10","ry","10",1,"stone"],[0,"xlink","href","#front","x","0","y","0","width","75","height","100"]],template:function(t,n){t&1&&(G(),Z(0,"svg",0),q("mousedown",function(p){return n.onClickBoard(p)}),Z(1,"defs")(2,"filter",1),K(3,"feGaussianBlur",2),A(),Z(4,"svg",3),K(5,"path",4)(6,"path",5),A()(),Z(7,"style"),g(8," g.tile { transform-origin: 50px 32.5px; opacity: 1; } g.selected g.tile { transform: scale(1.04); } g.selected g.tile rect.stone { stroke: black; fill: #F8EABB; } g.draw rect.shadow { fill: #191919; opacity: 0.6; stroke-width: 1; stroke: black; } g.draw rect.stone { fill: #FFF9E5; stroke-width: 1; stroke: black; } g.hidden { opacity: 0; } "),A(),Z(9,"g",6),B(10,At,1,4,":svg:rect",7,kt,!0),A(),Z(12,"g",6),B(13,$t,5,7,":svg:g",8,kt,!0),A()()),t&2&&(T("rotate",n.rotate)("edit",n.isBoard()),z("viewBox",n.viewport),a(9),z("transform",n.translate),a(),V(n.drawCells),a(2),z("transform",n.translate),a(),V(n.drawStones))},styles:["[_nghost-%COMP%]{flex:1}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]{height:100%;width:100%;max-height:960px;background-color:var(--main-background-color);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]   g.stage[_ngcontent-%COMP%]{transition:opacity .5s}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]   .draw[_ngcontent-%COMP%]{fill:#2b424f}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]   .draw.tile[_ngcontent-%COMP%]{fill:#fff9e5}[_nghost-%COMP%]   .board-svg.edit[_ngcontent-%COMP%]   .draw[_ngcontent-%COMP%]{fill:transparent;cursor:pointer}[_nghost-%COMP%]   .board-svg.edit[_ngcontent-%COMP%]   .draw.invalid[_ngcontent-%COMP%]{fill:#000;cursor:default}[_nghost-%COMP%]   .board-svg.edit[_ngcontent-%COMP%]   .draw.below[_ngcontent-%COMP%]{stroke:#d2691e;stroke-width:1px}[_nghost-%COMP%]   .board-svg.edit[_ngcontent-%COMP%]   .draw.tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .board-svg.edit[_ngcontent-%COMP%]   .draw.blocked[_ngcontent-%COMP%]{fill:#0c1a1e;cursor:not-allowed}"]});let o=r;return o})();var Xt=o=>({selected:o}),Gt=(o,r)=>({z:o,rows:r,showStones:!0});function zt(o,r){if(o&1){let i=w();s(0,"li",29),u("click",function(){let t=C(i).$index,n=d(2);return h(n.selectLevel(t))}),s(1,"div"),g(2),c(),s(3,"div",30)(4,"app-editor-board",31),u("clickBoardEvent",function(){let t=C(i).$index,n=d(2);return h(n.selectLevel(t))}),c()()()}if(o&2){let i=r.$implicit,e=r.$index,t=d(2);x("ngClass",mt(4,Xt,e===t.currentZ)),a(2),E("Level ",e),a(2),x("level",_t(6,Gt,e,i))("matrix",t.matrix)}}function Ut(o,r){if(o&1&&(s(0,"div",26),G(),s(1,"svg",32)(2,"g",33),v(3,"path",34),c(),s(4,"text",35),g(5),c(),s(6,"text",36),g(7),c(),s(8,"text",37),g(9),c()()()),o&2){let i=d(2);a(5),L("x",i.stats.minX," \u2026 x",i.stats.maxX),a(2),L("z",i.stats.minZ," \u2026 z",i.stats.maxZ),a(2),L("y",i.stats.minY," \u2026 y",i.stats.maxY)}}function Wt(o,r){if(o&1){let i=w();s(0,"button",38),u("click",function(){C(i);let t=d(2);return h(t.solve())}),g(1),m(2,"translate"),c()}o&2&&(a(),E(" ",_(2,1,"EDITOR_TEST_RUN")," "))}function jt(o,r){if(o&1){let i=w();s(0,"button",38),u("click",function(){C(i);let t=d(2);return h(t.cancelSolve())}),g(1),m(2,"translate"),c()}o&2&&(a(),E(" ",_(2,1,"EDITOR_TEST_CANCEL")," "))}function Ht(o,r){if(o&1&&(s(0,"div")(1,"div"),g(2),m(3,"translate"),c(),s(4,"div"),g(5),m(6,"translate"),s(7,"span"),g(8),c()()()),o&2){let i=d(2);a(2),L("",_(3,6,"EDITOR_TEST_SOLVED"),": ",i.solveStats.won),a(3),E("",_(6,8,"EDITOR_TEST_FAILED"),": "),a(2),T("fail",i.solveStats.fail>0),a(),P(i.solveStats.fail)}}function Kt(o,r){if(o&1){let i=w();s(0,"div",1)(1,"ul",2),B(2,zt,5,9,"li",3,st),c(),s(4,"div",4)(5,"div",5)(6,"button",6),m(7,"translate"),u("click",function(){C(i);let t=d();return h(t.newLayerBelow(t.currentZ))}),v(8,"i",7),c()()()(),s(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",4)(13,"div",11)(14,"div",12),g(15),c(),s(16,"button",13),m(17,"translate"),u("click",function(){C(i);let t=d();return h(t.moveLayerZ(-1,t.currentZ))}),v(18,"i",14),c(),s(19,"button",13),m(20,"translate"),u("click",function(){C(i);let t=d();return h(t.moveLayerZ(1,t.currentZ))}),v(21,"i",15),c(),s(22,"button",6),m(23,"translate"),u("click",function(){C(i);let t=d();return h(t.duplicateLayerZ(t.currentZ))}),v(24,"i",16),c(),s(25,"button",6),m(26,"translate"),u("click",function(){C(i);let t=d();return h(t.clearLayerZ(t.currentZ))}),v(27,"i",17),c(),s(28,"button",6),m(29,"translate"),u("click",function(){C(i);let t=d();return h(t.deleteLayerZ(t.currentZ))}),v(30,"i",18),c(),s(31,"button",6),m(32,"translate"),u("click",function(){C(i);let t=d();return h(t.toggleMirrorX())}),g(33," \uFE31 "),c(),s(34,"button",6),m(35,"translate"),u("click",function(){C(i);let t=d();return h(t.toggleMirrorY())}),g(36," \u23AF "),c()(),s(37,"div",5)(38,"span"),g(39),c(),s(40,"button",6),m(41,"translate"),u("click",function(){C(i);let t=d();return h(t.moveLayerY(-1))}),v(42,"i",14),c(),s(43,"button",6),m(44,"translate"),u("click",function(){C(i);let t=d();return h(t.moveLayerY(1))}),v(45,"i",15),c(),s(46,"button",6),m(47,"translate"),u("click",function(){C(i);let t=d();return h(t.moveLayerX(-1))}),v(48,"i",19),c(),s(49,"button",6),m(50,"translate"),u("click",function(){C(i);let t=d();return h(t.moveLayerX(1))}),v(51,"i",20),c()()(),s(52,"div",21)(53,"app-editor-board",22),u("clickDrawEvent",function(t){C(i);let n=d();return h(n.onCellClick(t))})("clickStoneEvent",function(t){C(i);let n=d();return h(n.onStoneClick(t))}),c()()(),s(54,"div",23)(55,"div",4)(56,"div",5)(57,"div",12),g(58),m(59,"translate"),c()(),s(60,"div",5)(61,"span"),g(62),c(),s(63,"button",6),m(64,"translate"),u("click",function(){C(i);let t=d();return h(t.moveY(-1))}),v(65,"i",14),c(),s(66,"button",6),m(67,"translate"),u("click",function(){C(i);let t=d();return h(t.moveY(1))}),v(68,"i",15),c(),s(69,"button",6),m(70,"translate"),u("click",function(){C(i);let t=d();return h(t.moveX(-1))}),v(71,"i",19),c(),s(72,"button",6),m(73,"translate"),u("click",function(){C(i);let t=d();return h(t.moveX(1))}),v(74,"i",20),c()()(),s(75,"div",24),v(76,"app-layout-preview",25),y(77,Ut,10,6,"div",26),c(),s(78,"div",27)(79,"div",5)(80,"div"),y(81,Wt,3,3,"button",28),y(82,jt,3,3,"button",28),c()(),y(83,Ht,9,10,"div"),c()()()()}if(o&2){let i=d();a(2),V(i.matrix.levels),a(4),x("title",M(_(7,52,"EDITOR_NEW_LAYER_LONG"))),a(9),E("Level ",i.currentZ),a(),x("title",M(_(17,54,"EDITOR_MOVE_LAYER_DOWN_LONG")))("disabled",i.currentZ===0),a(3),x("title",M(_(20,56,"EDITOR_MOVE_LAYER_UP_LONG")))("disabled",i.currentZ===i.matrix.levels.length-1),a(3),x("title",M(_(23,58,"EDITOR_DUPLICATE_LAYER_LONG"))),a(3),x("title",M(_(26,60,"EDITOR_CLEAR_LAYER_LONG"))),a(3),x("title",M(_(29,62,"EDITOR_DELETE_LAYER_LONG"))),a(3),T("checked",i.mirrorX),x("title",M(_(32,64,"MIRROR_X"))),a(3),T("checked",i.mirrorY),x("title",M(_(35,66,"MIRROR_X"))),a(5),E("Tiles: ",i.stats.layerCount),a(),x("title",M(_(41,68,"EDITOR_MOVE_TILES_UP_LONG"))),a(3),x("title",M(_(44,70,"EDITOR_MOVE_TILES_DOWN_LONG"))),a(3),x("title",M(_(47,72,"EDITOR_MOVE_TILES_LEFT_LONG"))),a(3),x("title",M(_(50,74,"EDITOR_MOVE_TILES_RIGHT_LONG"))),a(4),x("level",i.level)("isBoard",!0)("matrix",i.matrix),a(5),P(_(59,76,"EDITOR_VIEW_FULL")),a(3),T("fail",i.stats.countInvalid),a(),E("Tiles: ",i.stats.totalCount),a(),x("title",M(_(64,78,"EDITOR_MOVE_ALL_TILES_UP_LONG"))),a(3),x("title",M(_(67,80,"EDITOR_MOVE_ALL_TILES_DOWN_LONG"))),a(3),x("title",M(_(70,82,"EDITOR_MOVE_ALL_TILES_LEFT_LONG"))),a(3),x("title",M(_(73,84,"EDITOR_MOVE_ALL_TILES_RIGHT_LONG"))),a(4),x("svg",i.svg),a(),b(i.stats?77:-1),a(4),b(i.solveWorker?-1:81),a(),b(i.solveWorker?82:-1),a(),b(i.solveStats?83:-1)}}function qt(o,r){if(o&1){let i=w();s(0,"div",39),u("click",function(){C(i);let t=d();return h(t.toggleSave())}),s(1,"div",40),u("click",function(t){return C(i),h(t.stopPropagation())}),s(2,"span",41),m(3,"translate"),u("click",function(){C(i);let t=d();return h(t.toggleSave())}),v(4,"i",42),c(),s(5,"app-editor-export-component",43),u("savedEvent",function(){C(i);let t=d();return h(t.toggleAfterSave())}),c()()()}if(o&2){let i=d();a(2),x("title",M(_(3,3,"CLOSE"))),a(3),x("layout",i.layout())}}var et=(()=>{let r=class r{constructor(){this.layout=gt.required(),this.currentZ=0,this.totalZ=1,this.totalY=I.mY,this.totalX=I.mX,this.matrix=new X,this.saveDialog=!1,this.hasChanged=!1,this.mirrorX=!1,this.mirrorY=!1,this.worker=S(Q),this.layoutService=S(F)}ngOnDestroy(){this.cancelSolve()}getStats(e){let t={name:e.name,totalCount:e.mapping.length,layerCount:e.mapping.filter(n=>n[0]===this.currentZ).length,countInvalid:e.mapping.length>144||!!(e.mapping.length%2),minX:100,maxX:0,minY:100,maxY:0,minZ:100,maxZ:0,height:0,width:0,depth:0};for(let n of e.mapping)n[0]<t.minZ&&(t.minZ=n[0]),n[0]>t.maxZ&&(t.maxZ=n[0]),n[1]<t.minX&&(t.minX=n[1]),n[1]>t.maxX&&(t.maxX=n[1]),n[2]<t.minY&&(t.minY=n[2]),n[2]>t.maxY&&(t.maxY=n[2]);return t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.depth=t.maxZ-t.minZ,t}ngOnInit(){this.layout()&&(this.refresh(),this.hasChanged=!1)}ngOnChanges(e){e.layout&&(this.refresh(),this.hasChanged=!1)}removeStone(e,t,n){this.layout().mapping=this.layout().mapping.filter(l=>l[0]!==e||l[1]!==t||l[2]!==n),this.matrix.applyMapping(this.layout().mapping,this.totalZ,this.totalX,this.totalY)}addStone(e,t,n){this.layout().mapping.push([e,t,n]),this.matrix.applyMapping(this.layout().mapping,this.totalZ,this.totalX,this.totalY)}mirrorXValue(e){return this.totalX-2-e}mirrorYValue(e){return this.totalY-2-e}onPosClick(e,t,n){if(!(this.matrix.isTilePosBlocked(e,t,n)||this.matrix.isTilePosInvalid(e,t,n))){if(this.matrix.isTile(e,t,n)){this.removeStone(e,t,n);let l=[];this.mirrorX&&l.push([e,this.mirrorXValue(t),n]),this.mirrorY&&l.push([e,t,this.mirrorYValue(n)]),this.mirrorX&&this.mirrorY&&l.push([e,this.mirrorXValue(t),this.mirrorYValue(n)]);for(let[p,f,O]of l)this.matrix.isTile(p,f,O)&&this.removeStone(p,f,O)}else{this.addStone(e,t,n);let l=[];if(this.mirrorX){let p=this.mirrorXValue(t);l.push([e,p,n])}if(this.mirrorY){let p=this.mirrorYValue(n);l.push([e,t,p])}if(this.mirrorX&&this.mirrorY){let p=this.mirrorXValue(t),f=this.mirrorYValue(n);l.push([e,p,f])}for(let[p,f,O]of l)!this.matrix.isTilePosBlocked(p,f,O)&&!this.matrix.isTilePosInvalid(p,f,O)&&!this.matrix.isTile(p,f,O)&&this.addStone(p,f,O)}this.refresh()}}onCellClick(e){this.onPosClick(e.z,e.x,e.y)}onStoneClick(e){e&&this.onPosClick(e.z,e.x,e.y)}selectLevel(e){this.level={z:e,rows:this.matrix.levels[e],showTiles:!0},this.currentZ=e,this.refresh()}refresh(){let e=this.layout();e&&(this.hasChanged=!0,this.matrix.applyMapping(e.mapping,this.totalZ,this.totalX,this.totalY),this.stats=this.getStats(e),this.level={z:this.currentZ,rows:this.matrix.levels[this.currentZ],showTiles:!0},this.svg=this.layoutService.generatePreview(tt(e.mapping)),e.previewSVG=this.svg)}moveX(e){if(this.stats.minX+e<0||this.stats.maxX+e>=I.mX-1)return;let t=this.layout().mapping;for(let n of t)n[1]=n[1]+e;this.refresh()}moveY(e){if(this.stats.minY+e<0||this.stats.maxY+e>=I.mY-1)return;let t=this.layout().mapping;for(let n of t)n[2]=n[2]+e;this.refresh()}moveLayer(e,t){let n=this.layout().mapping.filter($=>$[0]===this.currentZ),l=e?1:2,p=e?I.mX:I.mY,f=n[0][l],O=n[0][l];for(let $ of n)f=Math.min($[l],f),O=Math.max($[l],O);if(!(f+t<0||O+t>=p-1)){for(let $ of n)$[l]=$[l]+t;this.refresh()}}toggleMirrorX(){this.mirrorX=!this.mirrorX}toggleMirrorY(){this.mirrorY=!this.mirrorY}moveLayerX(e){this.moveLayer(!0,e)}moveLayerY(e){this.moveLayer(!1,e)}duplicateLayerZ(e){let t=[],n=this.layout().mapping;for(let l of n)l[0]>e?l[0]=l[0]+1:l[0]===e&&t.push(l);for(let l of t)n.push([e+1,l[1],l[2]]);this.refresh()}clearLayerZ(e){this.layout().mapping=this.layout().mapping.filter(t=>t[0]!==e),this.refresh()}deleteLayerZ(e){this.layout().mapping=this.layout().mapping.filter(t=>t[0]!==e);for(let t of this.layout().mapping)t[0]>e&&(t[0]=t[0]-1);this.totalZ=Math.max(this.totalZ-1,1),this.refresh()}newLayerBelow(e){this.totalZ+=1;let t=this.layout().mapping;for(let n of t)n[0]>e&&(n[0]=n[0]+1);this.refresh()}moveLayerZ(e,t){if(t+e<0||t+e>=this.matrix.levels.length)return;let n=this.layout().mapping;for(let l of n)l[0]===t?l[0]=l[0]+e:l[0]===t+e&&(l[0]=t);t===this.currentZ&&(this.currentZ=this.currentZ+e),this.refresh()}toggleSave(){this.saveDialog=!this.saveDialog}toggleAfterSave(){this.saveDialog=!1,this.hasChanged=!1}cancelSolve(){this.solveWorker&&(this.solveWorker.terminate(),this.solveWorker=void 0)}solve(){if(this.solveWorker)return;let e={fail:0,won:0};this.solveWorker=this.worker.solve(this.layout().mapping,1e3,t=>{e.won=t[0],e.fail=t[1]},t=>{e.won=t[0],e.fail=t[1],this.solveWorker=void 0}),this.solveStats=e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=D({type:r,selectors:[["app-editor-layout-component"]],inputs:{layout:[1,"layout"]},outputs:{layout:"layoutChange"},features:[Y],decls:2,vars:2,consts:[[1,"overlay","overlay-save"],[1,"editor-matrix-list"],[1,"matrix-list"],[3,"ngClass"],[1,"buttonbar"],[1,"buttons"],[3,"click","title"],[1,"icon-editor-list-add"],[1,"editor-selected"],[1,"matrix-edit"],[1,"matrix-edit-top"],[1,"buttons","buttons-current-level"],[1,"buttonbar-title"],[3,"click","disabled","title"],[1,"icon-editor-up-small"],[1,"icon-editor-down-small"],[1,"icon-editor-docs"],[1,"icon-editor-cancel-alt"],[1,"icon-editor-trash"],[1,"icon-editor-left-small"],[1,"icon-editor-right-small"],[1,"matrix-board"],[3,"clickDrawEvent","clickStoneEvent","level","isBoard","matrix"],[1,"matrix-edit-bottom"],[1,"matrix-preview"],[1,"svg-board",3,"svg"],[1,"dimensions"],[1,"stats","stats-bottom"],[1,"text-button"],[3,"click","ngClass"],[1,"matrix-level"],[3,"clickBoardEvent","level","matrix"],["xmlns","http://www.w3.org/2000/svg","height","100%","width","100%","x","0px","y","0px","viewBox","0 0 1600 1500"],["transform","translate(0, 300)"],["fill","#47b00a","d","M10,309.7c40.7-99.4,81.5-198.7,122.3-298c39.6,99.2,78.6,198.7,117.9,298c-31.6,0.1-63.2,0-94.8,0.1c0,167-0.1,334.1,0,501.1c148.5-103.4,296.4-207.8,444.8-311.4c-16.9-26.8-37-51.7-53.8-78.5c102.1-22.8,204.1-46,306.2-69C795.4,439.2,738,526.3,680.3,613.2c-17.6-25.2-35.1-50.4-52.9-75.4C480.9,640,334.5,742.4,188.5,845.4c167.8,0.3,335.6,0.1,503.4,0.1c0.1-32.5-0.1-64.9,0.1-97.3c99.4,40.7,198.7,81.5,298,122.3C890.8,910,791.3,949,691.9,988.3c-0.1-31.6,0-63.2-0.1-94.8c-193.7-0.1-387.4-0.1-581.1,0c-1.2,0-2.3-0.5-3.5-0.8c0.1-194.3,0.1-388.6,0-582.9C74.9,309.7,42.5,309.8,10,309.7L10,309.7z"],["x","100","y","1500","fill","#47b00a",2,"font","200px monospace"],["x","0","y","200","fill","#47b00a",2,"font","200px monospace"],["x","600","y","500","fill","#47b00a",2,"font","200px monospace"],[1,"text-button",3,"click"],[1,"overlay","overlay-save",3,"click"],[1,"overlay-popup",3,"click"],[1,"close",3,"click","title"],[1,"icon-cancel-circled2"],[3,"savedEvent","layout"]],template:function(t,n){t&1&&(y(0,Kt,84,86),y(1,qt,6,5,"div",0)),t&2&&(b(n.layout()?0:-1),a(),b(n.saveDialog?1:-1))},dependencies:[ht,Ct,St,W,Tt,N],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:row;color:var(--main-text-color);overflow:hidden}[_nghost-%COMP%]   .save-button[_ngcontent-%COMP%]{position:fixed;right:50px;top:6px}[_nghost-%COMP%]   .overlay-save[_ngcontent-%COMP%]   .overlay-popup[_ngcontent-%COMP%]{width:98%;height:98%;max-height:640px;max-width:640px;overflow-y:auto}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{padding-right:6px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .fail[_ngcontent-%COMP%]{color:var(--text-fail-color)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;background-image:none;color:var(--text-highlight-color);border:1px solid var(--main-bg-color-dk);cursor:pointer}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--main-text-color-hover);border:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button.checked[_ngcontent-%COMP%]{background-color:#0000004d;border:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button.text-button[_ngcontent-%COMP%]{padding:10px 16px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{color:var(--text-disabled-color);cursor:default}[_nghost-%COMP%]   .buttons-current-level[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .buttonbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}[_nghost-%COMP%]   .buttonbar[_ngcontent-%COMP%]   .buttonbar-title[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]{width:220px;max-height:100%;height:100%;border-right:1px solid var(--dialog-border-color);overflow-y:auto;background-color:var(--editor-color-bg)}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:4px;max-height:100%}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]   .matrix-level[_ngcontent-%COMP%]{display:flex;max-width:80%;margin:0 auto}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;cursor:pointer;border:1px solid var(--dialog-border-color);margin-bottom:4px;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{border-color:var(--dialog-border-color-hover)}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{border-color:var(--dialog-border-color-selected)}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;display:inline-block;min-width:.8em}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:auto}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .editor-commands[_ngcontent-%COMP%]{border-bottom:1px solid #ececec;padding-bottom:10px}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .editor-commands[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{font-size:.9em;display:inline-block;vertical-align:top;margin-right:10px}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .editor-commands[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;text-align:center;max-height:100%;overflow:hidden}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:hidden}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-top[_ngcontent-%COMP%]   .matrix-board[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]{border-top:1px solid var(--dialog-border-color);height:25%;display:flex;flex-direction:column;position:relative;min-height:120px}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]   .matrix-preview[_ngcontent-%COMP%]{position:relative;overflow:hidden}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]   .matrix-preview[_ngcontent-%COMP%]   .dimensions[_ngcontent-%COMP%]{opacity:0;background-color:#000000b3;position:absolute;padding:8px;inset:0}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]   .matrix-preview[_ngcontent-%COMP%]:hover   .dimensions[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{position:absolute;background-color:#000000b3;bottom:0;font-size:.9em;border-radius:6px;text-align:left;padding:10px;font-variant-numeric:slashed-zero tabular-nums}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]   .stats-bottom[_ngcontent-%COMP%]{text-align:right;right:0}@media only screen and (max-width: 700px){[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]{height:80px;width:100%;overflow:auto hidden;margin-bottom:2px;border-right:none;border-bottom:1px solid var(--dialog-border-color)}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]{white-space:nowrap;border-right:none;height:92%}[_nghost-%COMP%]   .editor-matrix-list[_ngcontent-%COMP%]   .matrix-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100px;height:100%;display:inline-flex}}@media only screen and (width >= 400px) and (height <= 600px){[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]{flex-direction:row}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-top[_ngcontent-%COMP%]{max-height:100%}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]{height:100%;width:30%;border-top:none}[_nghost-%COMP%]   .editor-selected[_ngcontent-%COMP%]   .matrix-edit[_ngcontent-%COMP%]   .matrix-edit-bottom[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}}"]});let o=r;return o})();var Lt=(()=>{let r=class r{constructor(){this.appDropZone=k(),this.appDropZoneOver=k(),this.preventBodyDrop=R(!0),this.active=!1}onDrop(e){e.preventDefault(),this.active=!1;let{dataTransfer:t}=e;if(t?.items){let n=[],l=Array.from(t.items);for(let p of l)if(p?.kind==="file"){let f=p.getAsFile();f&&n.push(f)}t.items.clear(),this.appDropZone.emit(n)}else if(t){let n=t?.files;t.clearData(),n&&this.appDropZone.emit(Array.from(n))}}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active||this.appDropZoneOver.emit(),this.active=!0}onDragLeave(e){this.active=!1}onBodyDragOver(e){this.preventBodyDrop()&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop()&&e.preventDefault()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=lt({type:r,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(t,n){t&1&&u("drop",function(p){return n.onDrop(p)})("dragover",function(p){return n.onDragOver(p)})("dragleave",function(p){return n.onDragLeave(p)})("dragover",function(p){return n.onBodyDragOver(p)},nt)("drop",function(p){return n.onBodyDrop(p)},nt),t&2&&T("drop-zone-active",n.active)},inputs:{preventBodyDrop:[1,"preventBodyDrop"]},outputs:{appDropZone:"appDropZone",appDropZoneOver:"appDropZoneOver"}});let o=r;return o})();function Jt(o,r){if(o&1){let i=w();s(0,"a",7),u("click",function(){C(i);let t=d().$implicit,n=d();return h(n.selectLayout(t.id))}),v(1,"i",8),g(2),c()}if(o&2){let i=d().$implicit;a(2),E(" ",i.msg)}}function Qt(o,r){if(o&1&&g(0),o&2){let i=d().$implicit;E(" ",i.msg," ")}}function te(o,r){if(o&1&&(s(0,"p",6),y(1,Jt,3,1,"a"),y(2,Qt,1,1),c()),o&2){let i=r.$implicit;T("is-error",i.isError),a(),b(i.id?1:-1),a(),b(i.id?-1:2)}}var Dt=(()=>{let r=class r{constructor(){this.editEvent=k(),this.layoutService=S(F),this.logs=[]}selectFiles(e){let n=e.currentTarget.files;n&&this.importFiles(Array.from(n))}importLayouts(e){return at(this,null,function*(){this.logs=[];let t=[];for(let n of e)try{let l=yield Mt(n);for(let p of l){let f=this.layoutService.expandLayout(p,!0);!this.layoutService.layouts.items.some(O=>O.id===f.id)&&!t.some(O=>O.id===f.id)?(t.push(F.layout2loadLayout(f,p.map)),this.logs.push({msg:`Imported: "${n.name}"`,id:f.id})):(console.error(`Similar layout to "${f.name}" already available. Import rejected`),this.logs.push({msg:`Similar layout to "${f.name}" already available. Import rejected.`,isError:!0}))}}catch(l){console.error("Error importing",n,l),this.logs.push({msg:`ERROR importing "${n.name}". Invalid file.`,isError:!0})}t.length>0&&this.layoutService.storeCustomBoards(t)})}selectLayout(e){let t=this.layoutService.layouts.items.find(n=>n.id===e);t&&this.editEvent.emit(t)}importFiles(e){this.importLayouts(e).catch(t=>{console.error(t)})}onDropFiles(e){this.importFiles(e)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=D({type:r,selectors:[["app-import-component"]],outputs:{editEvent:"editEvent"},decls:19,vars:12,consts:[[1,"import-section",3,"appDropZone"],[1,"drop-zone"],[1,"title"],["name","file","type","file","multiple","",3,"change"],[1,"log-zone"],[1,"layout",3,"is-error"],[1,"layout"],[3,"click"],[1,"icon-editor-ok"]],template:function(t,n){t&1&&(s(0,"div",0),u("appDropZone",function(p){return n.onDropFiles(p)}),s(1,"div",1)(2,"div",2),g(3),m(4,"translate"),v(5,"br"),g(6),m(7,"translate"),v(8,"br"),g(9),m(10,"translate"),v(11,"br"),g(12),m(13,"translate"),v(14,"br"),c(),s(15,"input",3),u("change",function(p){return n.selectFiles(p)}),c()(),s(16,"div",4),B(17,te,3,4,"p",5,U),c()()),t&2&&(a(3),P(_(4,4,"EDITOR_IMPORT_DROP")),a(3),E(" ",_(7,6,"EDITOR_FORMAT_KYODAI")),a(3),E(" ",_(10,8,"EDITOR_FORMAT_KMAHJONGG")),a(3),E(" ",_(13,10,"EDITOR_FORMAT_MAH")),a(5),V(n.logs))},dependencies:[Lt,N],styles:["[_nghost-%COMP%]{flex:1;display:flex;color:var(--main-text-color);width:100%}[_nghost-%COMP%]   .import-section[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%}[_nghost-%COMP%]   .import-section[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{padding:80px 30px;width:100%;max-width:800px;border:2px dashed var(--dialog-border-color);border-radius:20px;text-align:center;position:relative}[_nghost-%COMP%]   .import-section[_ngcontent-%COMP%]   .log-zone[_ngcontent-%COMP%]{margin-top:20px;max-height:300px;width:100%;max-width:800px;color:var(--main-text-color);overflow-y:auto}[_nghost-%COMP%]   .import-section[_ngcontent-%COMP%]   .log-zone[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .import-section[_ngcontent-%COMP%]   .log-zone[_ngcontent-%COMP%]   p.is-error[_ngcontent-%COMP%]{color:var(--text-fail-color)}[_nghost-%COMP%]   .import-section.drop-zone-active[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{border:2px dashed var(--dialog-border-color)}"]});let o=r;return o})();function ee(o,r){if(o&1&&(s(0,"div"),g(1),m(2,"translate"),c()),o&2){let i=d(2).$implicit,e=d();a(),L("",_(2,2,"EDITOR_TEST_SOLVED"),": ",e.test[i.id]==null?null:e.test[i.id].win)}}function ne(o,r){if(o&1&&(s(0,"div",20),g(1),m(2,"translate"),c()),o&2){let i=d(2).$implicit,e=d();a(),L("",_(2,2,"EDITOR_TEST_FAILED"),": ",e.test[i.id]==null?null:e.test[i.id].fail)}}function ie(o,r){if(o&1&&(s(0,"div"),y(1,ee,3,4,"div"),y(2,ne,3,4,"div",20),c()),o&2){let i=d().$implicit,e=d();a(),b(e.test[i.id]!=null&&e.test[i.id].win?1:-1),a(),b(e.test[i.id]!=null&&e.test[i.id].fail?2:-1)}}function oe(o,r){if(o&1){let i=w();s(0,"button",9),m(1,"translate"),u("click",function(t){C(i);let n=d().$implicit,l=d();return h(l.removeCustomBoard(t,n))}),v(2,"i",12),c()}o&2&&x("title",M(_(1,2,"CUSTOM_BOARD_DELETE")))}function re(o,r){if(o&1){let i=w();s(0,"tr",14),u("click",function(){let t=C(i).$implicit,n=d();return h(n.editLayout(t))}),s(1,"td",2),v(2,"app-layout-preview",15),c(),s(3,"td",16),g(4),c(),s(5,"td",17),g(6),c(),s(7,"td",18),g(8),c(),s(9,"td",8)(10,"button",9),m(11,"translate"),u("click",function(t){let n=C(i).$implicit,l=d();return h(l.testLayout(t,n))}),v(12,"i",10),c(),y(13,ie,3,2,"div"),c(),s(14,"td",11),y(15,oe,3,4,"button",19),c()()}if(o&2){let i=r.$implicit,e=d();a(2),x("layout",i),a(2),P(i.name),a(2),P(i.category),a(2),P(i.mapping.length),a(2),x("title",M(_(11,8,"EDITOR_TEST_RUN"))),a(3),b(e.test[i.id]?13:-1),a(2),b(i.custom?15:-1)}}var It=(()=>{let r=class r{constructor(){this.inputLayouts=R(),this.editEvent=k(),this.test={},this.sortColumn=1,this.sortDesc=!0,this.showBuildIn=!0,this.layoutService=S(F),this.workerService=S(Q),this.update()}ngOnChanges(e){e.inputLayouts&&this.update()}ngOnDestroy(){this.worker&&(this.worker.terminate(),this.worker=void 0)}editLayout(e){this.editEvent.emit(e)}toggleBuildIn(){this.showBuildIn=!this.showBuildIn,this.update()}clickSortBy(e,t){this.sortColumn===t&&(this.sortDesc=!this.sortDesc),this.sortBy(t)}update(){let e=this.inputLayouts();e&&(this.layouts=e.sort((t,n)=>t.name.localeCompare(n.name)),this.showBuildIn||(this.layouts=this.layouts.filter(t=>t.custom)),this.sortBy(this.sortColumn))}removeCustomBoard(e,t){e.stopPropagation(),this.layoutService.removeCustomLayout([t.id]),this.update()}removeCustomLayouts(e){e.stopPropagation(),this.layoutService.removeAllCustomLayouts(),this.update()}sortBy(e){this.sortColumn=e,this.layouts=this.layouts.sort((t,n)=>{let l;switch(e){case 1:{l=t.name.localeCompare(n.name);break}case 2:{l=(t.by??"").localeCompare(n.by??"");break}case 3:{l=(t.category??"").localeCompare(n.category??"");break}case 4:{l=t.mapping.length-n.mapping.length;break}default:l=0}return(this.sortDesc?1:-1)*l})}testLayout(e,t){e.stopPropagation(),this.startTestLayout(t)}startTestLayout(e,t){if(this.worker){this.worker.terminate(),this.worker=void 0;return}this.test[e.id]=void 0,this.worker=this.workerService.solve(e.mapping,10,n=>{this.test[e.id]={win:n[0],fail:n[1]}},n=>{this.test[e.id]={win:n[0],fail:n[1]},this.worker=void 0,t&&t()})}testLayouts(e){if(this.worker){this.worker.terminate();return}this.testNextLayout()}testNextLayout(){let e=this.layouts.find(t=>!this.test[t.id]);e&&this.startTestLayout(e,()=>{this.testNextLayout()})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=D({type:r,selectors:[["app-manager-component"]],inputs:{inputLayouts:[1,"inputLayouts"]},outputs:{editEvent:"editEvent"},features:[Y],decls:36,vars:39,consts:[[1,"layout-table"],[1,"layout","layout-header"],[1,"col-image"],[1,"col-name","sortable",3,"click"],[1,"arrow"],[1,"col-cat","sortable",3,"click"],["type","checkbox",3,"change","checked"],[1,"col-stats","sortable",3,"click"],[1,"col-test"],[3,"click","title"],[1,"icon-editor-paper-plane-empty"],[1,"col-delete"],[1,"icon-trash-empty"],[1,"layout"],[1,"layout",3,"click"],[1,"svg-board",3,"layout"],[1,"col-name"],[1,"col-cat"],[1,"col-stats"],[3,"title"],[1,"fail"]],template:function(t,n){t&1&&(s(0,"table",0)(1,"thead")(2,"tr",1)(3,"td",2),g(4),m(5,"translate"),c(),s(6,"td",3),u("click",function(p){return n.clickSortBy(p,1)}),g(7),m(8,"translate"),v(9,"span",4),c(),s(10,"td",5),u("click",function(p){return n.clickSortBy(p,3)}),g(11),m(12,"translate"),v(13,"span",4),s(14,"div")(15,"label")(16,"input",6),u("change",function(){return n.toggleBuildIn()}),c(),g(17),m(18,"translate"),c()()(),s(19,"td",7),u("click",function(p){return n.clickSortBy(p,4)}),g(20),m(21,"translate"),v(22,"span",4),c(),s(23,"td",8),g(24),m(25,"translate"),s(26,"button",9),m(27,"translate"),u("click",function(p){return n.testLayouts(p)}),v(28,"i",10),c()(),s(29,"td",11)(30,"button",9),m(31,"translate"),u("click",function(p){return n.removeCustomLayouts(p)}),v(32,"i",12),c()()()(),s(33,"tbody"),B(34,re,16,10,"tr",13,U),c()()),t&2&&(a(4),P(_(5,23,"EDITOR_COLUMN_PREVIEW")),a(2),T("sort-up",n.sortColumn===1&&n.sortDesc)("sort-down",n.sortColumn===1&&!n.sortDesc),a(),E("",_(8,25,"EDITOR_LAYOUT_NAME")," "),a(3),T("sort-up",n.sortColumn===3&&n.sortDesc)("sort-down",n.sortColumn===3&&!n.sortDesc),a(),E("",_(12,27,"EDITOR_LAYOUT_CATEGORY")," "),a(5),x("checked",n.showBuildIn),a(),E(" ",_(18,29,"EDITOR_SHOW_BUILDIN")," "),a(2),T("sort-up",n.sortColumn===4&&n.sortDesc)("sort-down",n.sortColumn===4&&!n.sortDesc),a(),E("",_(21,31,"EDITOR_LAYOUT_NR_OF_STONES")," "),a(4),E("",_(25,33,"EDITOR_COLUMN_TEST")," "),a(2),x("title",M(_(27,35,"EDITOR_TEST_RUN"))),a(4),x("title",M(_(31,37,"CUSTOM_BOARD_DELETE_ALL"))),a(4),V(n.layouts))},dependencies:[W,N],styles:["[_nghost-%COMP%]{overflow-y:auto;flex:1}[_nghost-%COMP%]   .fail[_ngcontent-%COMP%]{color:var(--text-fail-color)}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]{color:var(--editor-table-row-color);width:100%}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]{cursor:pointer;background-color:var(--editor-table-row-color-bg);height:80px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]:hover{background-color:var(--editor-table-row-color-bg-hover)}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{vertical-align:middle;padding:4px 15px;border-top:1px solid var(--dialog-border-color);border-right:1px solid var(--dialog-border-color)}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid var(--main-text-color);display:none;margin-bottom:3px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%] > div.sortable[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%] > div.sort-up[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%] > div.sort-down[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:inline-block;transform:rotate(180deg)}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .col-image[_ngcontent-%COMP%]{width:80px;height:80px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .col-id[_ngcontent-%COMP%]{font-variant-numeric:slashed-zero tabular-nums}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .col-test[_ngcontent-%COMP%]{width:140px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .col-cat[_ngcontent-%COMP%]{width:200px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .col-stats[_ngcontent-%COMP%]{width:140px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .col-delete[_ngcontent-%COMP%]{width:80px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout-header[_ngcontent-%COMP%]{max-height:30px}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-top:none}[_nghost-%COMP%]   .layout-table[_ngcontent-%COMP%]   .layout-header[_ngcontent-%COMP%]:hover{background-color:#0000001a}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;background-image:none;color:var(--text-highlight-color);border:1px solid var(--main-bg-color-dk);cursor:pointer;text-align:center}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--main-text-color-hover);border:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   button.text-button[_ngcontent-%COMP%]{padding:10px 16px}[_nghost-%COMP%]   button[disabled][_ngcontent-%COMP%]{color:var(--text-disabled-color);cursor:default}"]});let o=r;return o})();function ae(o,r){if(o&1){let i=w();s(0,"div")(1,"div",9)(2,"ul")(3,"li"),g(4),m(5,"translate"),m(6,"translate"),c()()(),s(7,"div",10)(8,"app-import-component",11),u("editEvent",function(t){C(i);let n=d();return h(n.editLayout(t))}),c()()()}o&2&&(a(4),L("",_(5,2,"EDITOR_TITLE"),": ",_(6,4,"EDITOR_IMPORT")))}function le(o,r){if(o&1){let i=w();s(0,"div")(1,"div",4)(2,"ul")(3,"li"),g(4),m(5,"translate"),c(),v(6,"li",5),s(7,"li")(8,"button",6),m(9,"translate"),u("click",function(){C(i);let t=d();return h(t.save())}),g(10),m(11,"translate"),c()()()(),s(12,"div",10),v(13,"app-editor-layout-component",12),c()()}if(o&2){let i=d();a(4),L("",_(5,6,"EDITOR_TITLE"),": ",i.layout.name),a(4),x("title",M(_(9,8,"EDITOR_SAVE_LONG"))),a(2),P(_(11,10,"EDITOR_SAVE")),a(3),x("layout",i.layout)}}var un=(()=>{let r=class r{constructor(){this.closeEvent=k(),this.layoutComponent=ut(et),this.mode="manager",this.layoutService=S(F),this.translate=S(J)}save(){let e=this.layoutComponent();e&&e.toggleSave()}close(){if(this.mode==="manager"){this.closeEvent.emit();return}let e=this.layoutComponent();(!(this.layout&&e?.hasChanged)||confirm(this.translate.instant("EDITOR_DISCARD_CHANGES_SURE")))&&(this.layout=void 0,this.mode="manager")}editLayout(e){this.mode="edit",this.layout={id:"",originalId:e.id,name:e.name,by:e.by??"",category:(e.custom?e.category:void 0)??"Custom",mapping:e.mapping.map(t=>[t[0],t[1],t[2]])}}exportLayouts(){Et(this.layoutService.layouts.items)}newLayout(){this.editLayout({id:"",name:"New Board",category:"Custom",by:"",mapping:[]})}onDropFiles(){}onDragFiles(){this.mode="import"}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=D({type:r,selectors:[["app-editor-component"]],viewQuery:function(t,n){t&1&&ct(n.layoutComponent,et,5),t&2&&pt()},outputs:{closeEvent:"closeEvent"},decls:30,vars:33,consts:[[1,"editor-content"],[1,"close",3,"click","title"],[1,"icon-cancel-circled2"],[1,"editor-manager"],[1,"editor-nav","buttons"],[1,"sep"],[3,"click","title"],[1,"editor-main",3,"appDropZone","appDropZoneOver"],[3,"editEvent","inputLayouts"],[1,"editor-nav"],[1,"editor-main"],[3,"editEvent"],[3,"layout"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"a",1),m(2,"translate"),u("click",function(){return n.close()}),v(3,"i",2),c(),s(4,"div",3)(5,"div",4)(6,"ul")(7,"li"),g(8),m(9,"translate"),c(),v(10,"li",5),s(11,"li")(12,"button",6),m(13,"translate"),u("click",function(){return n.newLayout()}),g(14),m(15,"translate"),c()(),s(16,"li")(17,"button",6),m(18,"translate"),u("click",function(){return n.mode="import"}),g(19),m(20,"translate"),c()(),s(21,"li")(22,"button",6),m(23,"translate"),u("click",function(){return n.exportLayouts()}),g(24),m(25,"translate"),c()()()(),s(26,"div",7),u("appDropZone",function(){return n.onDropFiles()})("appDropZoneOver",function(){return n.onDragFiles()}),s(27,"app-manager-component",8),u("editEvent",function(p){return n.editLayout(p)}),c()()(),y(28,ae,9,6,"div"),y(29,le,14,12,"div"),c()),t&2&&(a(),x("title",M(_(2,17,"CLOSE"))),a(3),T("visible",n.mode==="manager"),a(4),P(_(9,19,"EDITOR_TITLE")),a(4),x("title",M(_(13,21,"EDITOR_NEW_LONG"))),a(2),P(_(15,23,"EDITOR_NEW")),a(3),x("title",M(_(18,25,"EDITOR_IMPORT_LONG"))),a(2),P(_(20,27,"EDITOR_IMPORT")),a(3),x("title",M(_(23,29,"EDITOR_EXPORT_LONG"))),a(2),P(_(25,31,"EDITOR_EXPORT")),a(3),x("inputLayouts",n.layoutService.layouts.items),a(),b(n.mode==="import"?28:-1),a(),b(n.mode==="edit"&&n.layout?29:-1))},dependencies:[et,Dt,It,N],styles:["[_nghost-%COMP%]{--editor-table-row-color: #fff;--editor-color-bg: #1e2e37;--editor-table-row-color-bg: #1e2e37;--editor-table-row-color-bg-hover: #2b424f;position:absolute;inset:0;background-color:var(--editor-color-bg);z-index:10001}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{color:var(--main-content-link-color);cursor:pointer}[_nghost-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--main-content-link-hover-color)}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;right:10px;top:8px;cursor:pointer}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;background-image:none;border:1px solid var(--main-bg-color-dk);cursor:pointer;font-size:1em;color:var(--text-highlight-color);padding:2px 16px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--main-text-color-hover);border:1px solid var(--main-text-color-hover)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{color:var(--text-disabled-color);cursor:default}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-manager[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-manager.visible[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-nav[_ngcontent-%COMP%]{padding:4px 8px 8px;border-bottom:1px solid var(--dialog-border-color)}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0 40px 0 0;list-style:none;display:flex}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#fff;font-size:1.3em;padding-left:8px}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sep[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#ff0;cursor:default}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .editor-wrapper[_ngcontent-%COMP%]{text-align:center;width:100%;max-width:800px}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .editor-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:30px;padding:10px}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-selects[_ngcontent-%COMP%]{height:430px;max-width:800px;margin-top:20px;display:flex}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]{border:1px solid var(--dialog-border-color);border-radius:6px;text-align:left;width:50%;overflow-y:hidden;color:var(--main-text-color);display:flex;flex-direction:column}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   .by[_ngcontent-%COMP%]{font-size:.7em}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-bottom:1px solid var(--dialog-border-color);padding:4px 8px;display:flex}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex:1;margin:0;padding:0;overflow-y:auto}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:var(--main-text-color);padding:4px;border-bottom:1px solid var(--dialog-border-color);cursor:pointer}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .editor-content[_ngcontent-%COMP%]   .editor-main[_ngcontent-%COMP%]   .editor-select[_ngcontent-%COMP%]   .layout-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .svg-board[_ngcontent-%COMP%]{height:30px;width:40px;margin-right:6px;display:inline-block;vertical-align:middle}"]});let o=r;return o})();export{un as EditorComponent};
