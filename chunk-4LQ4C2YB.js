import{a as q}from"./chunk-VFX7SRLZ.js";import{a as F,c as w,d as Y,f as Q}from"./chunk-6APEWFAZ.js";import{n as j}from"./chunk-HFNUQUTO.js";import{E as H,t as G,u as R,w as N}from"./chunk-GNDVCJDM.js";import{E as h,Ea as E,F as C,Fa as b,G as I,H as B,Ha as M,Ia as y,Ja as k,Ka as g,La as r,Ma as o,Na as O,Ra as v,Ta as u,Va as _,Ya as V,Za as A,b as T,cb as c,db as m,eb as S,fb as K,ga as t,hb as x,kb as s,lb as d,qa as L,qb as $,vb as U,wb as D,y as f}from"./chunk-PC2ESRTN.js";var z=["kyodaiInput"],Z=(p,l)=>l.source;function X(p,l){if(p&1){let e=v();r(0,"li")(1,"input",10),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.lang=i.key,C(a.app.setLang())}),o(),r(2,"label",11),c(3),o()()}if(p&2){let e=l.$implicit,n=l.$index,i=_();t(),g("id","lang"+(n+1))("value",e.key)("checked",i.app.settings.lang===e.key),t(),g("for","lang"+(n+1)),t(),m(e.title)}}function J(p,l){if(p&1){let e=v();r(0,"li")(1,"input",12),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.background=i.img||"",C(a.app.settings.save())}),o(),r(2,"label",11),c(3),s(4,"translate"),o()()}if(p&2){let e=l.$implicit,n=l.$index,i=_();t(),g("id",x("back",n))("value",e.img)("checked",i.app.settings.background===e.img),t(),g("for",x("back",n)),t(),m(d(4,7,e.name))}}function W(p,l){if(p&1){let e=v();r(0,"li")(1,"input",13),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.theme=i.id||"",C(a.app.settings.save())}),o(),r(2,"label",11),c(3),s(4,"translate"),o()()}if(p&2){let e=l.$implicit,n=l.$index,i=_();t(),g("id",x("color",n))("value",e.id)("checked",i.app.settings.theme===e.id),t(),g("for",x("color",n)),t(),m(d(4,7,e.name))}}function ee(p,l){if(p&1){let e=v();r(0,"li")(1,"input",14),u("change",function(){let i=h(e).$implicit,a=_();return a.app.settings.tileset=i.id,C(a.app.settings.save())}),o(),r(2,"label",11),c(3),o(),O(4,"app-license-link",15),o()}if(p&2){let e=l.$implicit,n=l.$index,i=_();t(),g("id",x("imageset",n))("value",e.id)("checked",i.app.settings.tileset===e.id),t(),g("for",x("imageset",n)),t(),S(" ",e.name," "),t(),g("imagesetId",e.id)("licenseKey",e.license)}}function te(p,l){if(p&1){let e=v();r(0,"li")(1,"input",16),u("change",function(){h(e);let i=_();return i.app.settings.tileset="kyodai",C(i.app.settings.save())}),o(),r(2,"label",17),c(3),s(4,"translate"),o()()}if(p&2){let e=_();t(),g("checked",e.app.settings.tileset==="kyodai"),t(2),m(d(4,2,"KYODAI_TILESET"))}}function ne(p,l){if(p&1&&(r(0,"option",26),c(1),o()),p&2){let e=l.$implicit;g("value",e.source),t(),K("",e.name," - ",e.author)}}function ie(p,l){if(p&1){let e=v();r(0,"div",1)(1,"p"),c(2),s(3,"translate"),o(),r(4,"div",18)(5,"textarea",19,0),u("change",function(i){h(e);let a=_();return C(a.updateKyodaiUrl(i))}),o(),r(7,"button",20),u("click",function(){h(e);let i=_();return C(i.clearKyodaiUrl())}),I(),r(8,"svg",21),O(9,"path",22)(10,"path",23),o()(),B(),r(11,"select",24),u("change",function(i){h(e);let a=_();return C(a.setKyodaiUrl(i))}),r(12,"option",25),c(13),s(14,"translate"),o(),y(15,ne,2,3,"option",26,Z),o()(),r(17,"button",27),u("click",function(){h(e);let i=_();return C(i.applyKyodaiUrl())}),c(18),s(19,"translate"),o()()}if(p&2){let e=_();t(2),m(d(3,4,"KYODAI_TILESET_SETTINGS")),t(3),g("value",e.app.settings.kyodaiUrl?e.app.settings.kyodaiUrl:""),t(8),m(d(14,6,"KYODAI_TILESET_EXAMPLES")),t(2),k(e.kyodaiTileSets),t(3),m(d(19,8,"KYODAI_TILESET_LOAD"))}}var he=(()=>{let l=class l{constructor(){this.kyodaiInput=$.required("kyodaiInput"),this.canKyodai=F.kyodai,this.kyodaiTileSets=Q,this.sets=N,this.backs=R,this.themes=G,this.languages=Object.keys(w).map(n=>({key:n,title:w[n].title})),this.app=f(Y),this.storage=f(H),this.layoutService=f(j),this.translate=f(U)}updateKyodaiUrl(n){this.app.settings.kyodaiUrl=n.target.value,this.app.settings.save()}clearKyodaiUrl(){this.app.settings.kyodaiUrl=void 0,this.app.settings.save()}setKyodaiUrl(n){let i=this.kyodaiInput();i.nativeElement&&(n.preventDefault(),n.stopPropagation(),i.nativeElement.value=n.target.value)}applyKyodaiUrl(){let n=this.kyodaiInput();n.nativeElement&&(this.app.settings.kyodaiUrl=n.nativeElement.value,this.app.settings.save())}clearTimes(){return T(this,null,function*(){let n=yield this.layoutService.get();for(let i of n.items)this.storage.clearScore(i.id)})}clearTimesClick(){confirm(this.translate.instant("BEST_TIMES_CLEAR_SURE"))&&this.clearTimes().catch(n=>{console.error(n)})}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=L({type:l,selectors:[["app-settings"]],viewQuery:function(i,a){i&1&&V(a.kyodaiInput,z,5),i&2&&A()},decls:61,vars:35,consts:[["kyodaiInput",""],[1,"settings"],[1,"buttons"],[1,"radio"],["type","radio","name","lang","id","lang0","value","auto",3,"change","checked"],["for","lang0"],[1,"radio","radio-tilesets"],[1,"check"],["type","checkbox",3,"change","checked"],[1,"clear-times",3,"click"],["type","radio","name","lang",3,"change","id","value","checked"],[3,"for"],["type","radio","name","back",3,"change","id","value","checked"],["type","radio","name","color",3,"change","id","value","checked"],["type","radio","name","imageset",3,"change","id","value","checked"],[3,"imagesetId","licenseKey"],["type","radio","name","imageset","value","kyodai","id","imageset-kyodai",3,"change","checked"],["for","imageset-kyodai"],[1,"input-wrapper"],["type","text","name","kyodai",3,"change","value"],[1,"clear-kyodai",3,"click"],["width","17px","height","17px","viewBox","0 0 35 35"],["d","M28.814,30.064a1.247,1.247,0,0,1-.884-.367L5.3,7.07A1.249,1.249,0,0,1,7.07,5.3L29.7,27.93a1.251,1.251,0,0,1-.884,2.134Z"],["d","M6.186,30.064A1.251,1.251,0,0,1,5.3,27.93L27.93,5.3A1.25,1.25,0,0,1,29.7,7.07L7.07,29.7A1.247,1.247,0,0,1,6.186,30.064Z"],[1,"example-kyodai",3,"change"],["value",""],[3,"value"],[3,"click"]],template:function(i,a){i&1&&(r(0,"div",1)(1,"p"),c(2),s(3,"translate"),o(),r(4,"div",2)(5,"form")(6,"ul",3)(7,"li")(8,"input",4),u("change",function(){return a.app.settings.lang="auto",a.app.setLang()}),o(),r(9,"label",5),c(10),s(11,"translate"),o()(),y(12,X,4,5,"li",null,M),o()()(),r(14,"p"),c(15),s(16,"translate"),o(),r(17,"div",2)(18,"form")(19,"ul",3),y(20,J,5,9,"li",null,M),o()()(),r(22,"p"),c(23),s(24,"translate"),o(),r(25,"div",2)(26,"form")(27,"ul",3),y(28,W,5,9,"li",null,M),o()()()(),r(30,"div",1)(31,"p"),c(32),s(33,"translate"),o(),r(34,"div",2)(35,"form")(36,"ul",6),y(37,ee,5,9,"li",null,M),E(39,te,5,4,"li"),o()()(),E(40,ie,20,10,"div",1),r(41,"p"),c(42),s(43,"translate"),o(),r(44,"div")(45,"label",7)(46,"input",8),u("change",function(){return a.app.settings.contrast=!a.app.settings.contrast,a.app.settings.save()}),o(),c(47),s(48,"translate"),o(),O(49,"br"),r(50,"label",7)(51,"input",8),u("change",function(){return a.app.settings.dark=!a.app.settings.dark,a.app.settings.save()}),o(),c(52),s(53,"translate"),o()(),r(54,"p"),c(55),s(56,"translate"),o(),r(57,"div")(58,"button",9),u("click",function(){return a.clearTimesClick()}),c(59),s(60,"translate"),o()()()),i&2&&(t(2),m(d(3,15,"LANG")),t(6),g("checked",a.app.settings.lang==="auto"),t(2),m(d(11,17,"LANG_AUTO")),t(2),k(a.languages),t(3),m(d(16,19,"BACKGROUND")),t(5),k(a.backs),t(3),m(d(24,21,"THEME")),t(5),k(a.themes),t(4),m(d(33,23,"TILESET")),t(5),k(a.sets),t(2),b(a.canKyodai?39:-1),t(),b(a.canKyodai&&a.app.settings.tileset==="kyodai"?40:-1),t(2),m(d(43,25,"TILES")),t(4),g("checked",a.app.settings.contrast),t(),S(" ",d(48,27,"HIGHER_CONTRAST")," "),t(4),g("checked",a.app.settings.dark),t(),S(" ",d(53,29,"TILES_DARK")," "),t(3),m(d(56,31,"BEST_TIMES")),t(4),m(d(60,33,"BEST_TIMES_CLEAR")))},dependencies:[q,D],styles:['[_nghost-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;flex:1;overflow-y:auto}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:50%;padding-right:20px}@media only screen and (max-width: 700px){[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;padding-right:8px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{max-width:40%}[_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{height:1em;width:1em}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=checkbox][_ngcontent-%COMP%], [_nghost-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:1em 0 4px;font-weight:700;border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:2;text-align:left;list-style:none;padding:0;margin:0;vertical-align:text-bottom}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;line-height:30px;white-space:nowrap;text-overflow:ellipsis;flex:1}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:19px;line-height:30px;display:flex;gap:3px;height:30ox;align-items:center}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:-14px}@media only screen and (max-width: 280px){[_nghost-%COMP%]   .radio[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   .check[_ngcontent-%COMP%]{padding:2px}[_nghost-%COMP%]   .check[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .clear-times[_ngcontent-%COMP%]{margin-top:10px;padding:12px 20px}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;border:1px solid var(--card-layout-color-border);background-color:var(--input-background-color);border-color:var(--input-border-color);color:var(--input-text-color);margin-top:8px;margin-bottom:8px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";right:8px;top:16px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid var(--input-text-color);pointer-events:none}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:none;resize:none;outline:none;font-size:10px;background-color:var(--input-background-color);color:var(--input-text-color)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-within{outline:2px solid var(--card-layout-color-border)}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-background-color);border:none;width:30px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-text-color);border:none;width:30px}[_nghost-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--input-text-color)}']});let p=l;return p})();export{he as SettingsComponent};
