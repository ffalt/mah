import{$ as ye,$a as fn,A as Ue,Aa as Te,B as _e,Ba as on,C as Kt,Ca as rn,D as be,Da as an,E as Q,Ea as sn,F as T,Fa as xe,G as L,Ga as W,Ha as ln,I as $,Ia as cn,J as G,Ja as dn,K as N,Ka as pn,L as b,La as Xe,M as p,Ma as gn,N as m,Na as qe,O as k,P as I,Pa as oe,Q as D,Qa as Le,R as re,Ra as mn,S as F,Sa as vt,T as ze,Ta as hn,U as v,Ua as yt,V as le,Va as un,W as M,Wa as We,X as Xt,Xa as _n,Y as qt,Ya as Ze,Z as ce,Za as Se,_ as ve,_a as xt,a as Rt,aa as Ye,ab as wt,b as he,ba as q,bb as kt,c as Ft,ca as ge,cb as Cn,d as Gt,da as f,db as Qe,e as Nt,ea as C,eb as we,f as jt,fa as U,fb as St,g as Me,ga as Re,h as Ht,ha as V,i as S,ia as J,j as $t,jb as Mn,k as y,kb as Pn,l as x,la as h,lb as Et,m as X,ma as u,n as Ve,na as Wt,nb as On,o as Pt,oa as Zt,ob as me,p as Pe,pa as ue,pb as Je,q as Oe,qa as B,qb as bn,r as Ut,ra as de,s as zt,sa as Ke,sb as vn,t as He,ta as Qt,u as Yt,v as $e,va as Jt,wa as en,x as l,xa as tn,y as Ot,ya as nn,z as H,za as bt}from"./chunk-FGCHGWGH.js";var Ie={APP_VERSION:"1.14.0",APP_NAME:"Mah",APP_FEATURE_EDITOR:!0,APP_FEATURE_KYODAI:!0,APP_FEATURE_MOBILE:!1};var Z={production:!0,version:Ie.APP_VERSION,name:Ie.APP_NAME,mobile:Ie.APP_FEATURE_MOBILE,editor:Ie.APP_FEATURE_EDITOR,kyodai:Ie.APP_FEATURE_KYODAI,modules:[],openExternal:void 0};var et=class{constructor(){this.free=[],this.stones=[],this.count=0,this.hints={groups:[],current:void 0},this.selected=void 0,this.undo=[]}clearSelection(){this.selected&&(this.selected.selected=!1),this.selected=void 0}setStoneSelected(o){this.clearSelection(),o&&(o.selected=!0,this.selected=o)}clearHints(){if(this.hints.current)for(let o of this.hints.current.stones)o.hinted=!1;this.hints={groups:[],current:void 0}}hint(){if(this.hintNext()||(this.clearHints(),this.free.length===0))return;let o=this.collectHints();if(this.selected){let t=this.selected.groupNr;o.sort((n,r)=>n.group===t?-1:r.group===t?1:0)}let e=o[0];this.hints={groups:o,current:e};for(let t of e.stones)t.hinted=!0}reset(){this.clearSelection(),this.clearHints(),this.free=[],this.count=0,this.stones=[],this.undo=[]}canRemove(o){return o.group.some(e=>!e.picked&&!e.isBlocked())}update(){let o=[],e=0;for(let t of this.stones)t.state={blocked:!t.picked&&t.isBlocked(),removable:!1},e+=t.picked?0:1;for(let t of this.stones)t.state.removable=!t.picked&&!t.state.blocked&&this.canRemove(t),t.state.removable&&o.push(t);this.free=o,this.count=e}back(){if(this.undo.length<2)return;this.clearSelection(),this.clearHints();let o=this.undo.pop(),e=this.undo.pop();if(!(!o||!e)){for(let t of this.stones)(t.z===o[0]&&t.x===o[1]&&t.y===o[2]||t.z===e[0]&&t.x===e[1]&&t.y===e[2])&&(t.picked=!1);this.update()}}shuffle(){this.clearSelection(),this.clearHints();let o=[],e=new Qe(this.stones.length);for(let a of this.stones)a.picked||o.push([a.z,a.x,a.y]);let n=new qe(e).build(Xe,o);if(!n)return;let r=e.list.filter(a=>!n.some(s=>s.v===a.v));for(let a of this.undo){let s=r.shift();if(s){let c=new cn(a[0],a[1],a[2],s.v,s.groupNr);c.picked=!0,n.push(c)}}pn.fillStones(n,e),this.stones=n,this.update()}load(o,e){if(!o)return;this.undo=e;let n=new qe(new Qe(o.length+e.length)).load(o);if(n){for(let r of e){let a=dn(n,r[0],r[1],r[2]);a&&(a.picked=!0)}this.stones=n,this.update()}}save(){return this.stones.map(o=>[o.z,o.x,o.y,o.v])}applyMapping(o,e){let t=new qe(new Qe(o.length));this.stones=t.build(e,o)||[]}pick(o,e){this.clearSelection(),this.undo.push([o.z,o.x,o.y],[e.z,e.x,e.y]),this.clearHints(),o.picked=!0,e.picked=!0,this.update()}countUnblocked(){return this.stones.filter(o=>!o.picked&&!o.isBlocked()).length}hintNext(){if(!this.hints.current)return!1;for(let e of this.hints.current.stones)e.hinted=!1;let o=this.hints.groups.indexOf(this.hints.current);if(o>=0&&(o++,o>=this.hints.groups.length&&(o=0),o<this.hints.groups.length)){this.hints.current=this.hints.groups[o];for(let e of this.hints.current.stones)e.hinted=!0;return!0}return!1}collectHints(){let o={};for(let e of this.free){let t=e.groupNr.toString();o[t]=o[t]||[],o[t].push(e)}return Object.keys(o).map(e=>({group:o[e][0].groupNr,stones:o[e]}))}};var tt=class{constructor(){this.elapsed=0,this.lastTime=0,this.timer=void 0}start(){this.timer||(this.elapsed=this.elapsed||0)}reset(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0),this.lastTime=0,this.elapsed=0}run(){this.timer||(this.lastTime=Date.now(),this.timer=window.setTimeout(()=>{this.step()},1e3))}pause(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0,this.elapsed+=Date.now()-this.lastTime)}step(){let o=Date.now();this.elapsed+=o-this.lastTime,this.lastTime=o,this.timer=window.setTimeout(()=>{this.step()},1e3)}};var De={NOPE:"invalid",SELECT:"select",MATCH:"match",OVER:"over"},nt=class{constructor(){this.enabled=!0,this.audioplayers={}}play(o){if(this.enabled){if(!this.audioplayers[o]){let e=new Audio;e.src=`assets/sounds/${o}.ogg`,e.load(),this.audioplayers[o]=e}this.audioplayers[o].play().catch(e=>{console.error(e)})}}pause(o){this.audioplayers[o]&&this.audioplayers[o].pause()}};var it=class{constructor(){this.enabled=!1}play(){}pause(){}toggle(){}toggleMusic(){}};var ot="random-";var rt=class{constructor(o){this.storage=o,this.clock=new tt,this.board=new et,this.sound=new nt,this.music=new it,this.state=oe.idle,this.layoutID=void 0,this.mode=yt,this.saveTimer=void 0}init(){this.load(),this.board.update(),this.state===oe.run&&this.pause(),this.message={messageID:this.isPaused()?"MSG_CONTINUE_SAVE":"MSG_START"}}click(o){return o?!this.isRunning()||o.state.blocked?(this.sound.play(De.NOPE),this.wiggleStone(o),!0):(this.clock.elapsed===0&&this.clock.run(),this.board.selected&&o&&o!==this.board.selected&&o.groupNr===this.board.selected.groupNr?(this.resolveMatchingStone(o),!0):(this.board.setStoneSelected(this.board.selected===o?void 0:o),this.sound.play(De.SELECT),!0)):(this.board.clearSelection(),!1)}wiggleStone(o){o&&(o.effects=o.effects||{},o.effects.wiggle=!0,setTimeout(()=>{o.effects&&(o.effects.wiggle=!1)},300))}isRunning(){return this.state===oe.run}isPaused(){return this.state===oe.pause}isIdle(){return this.state===oe.idle}resume(){this.run(),this.clock.run(),this.music.play()}run(){this.board.clearHints(),this.board.update(),this.setState(oe.run)}toggle(){this.state===oe.run?this.pause():this.state===oe.pause&&this.resume()}pause(){this.clock.pause(),this.setState(oe.pause,"MSG_CONTINUE_PAUSE"),this.save(),this.music.pause()}reset(){this.clock.reset(),this.setState(oe.idle),this.board.reset()}start(o,e,t){this.layoutID=o.id,this.mode=t,this.board.applyMapping(o.mapping,e),this.board.update(),this.run()}hint(){this.mode!==vt&&this.board.hint()}shuffle(){this.mode===Le&&this.board.shuffle()}back(){this.mode!==vt&&this.isRunning()&&this.board.back()}load(){try{let o=this.storage.getState();if(o?.stones)return this.clock.elapsed=o.elapsed??0,this.layoutID=o.layout,this.mode=o.gameMode??yt,this.state=o.state??oe.idle,this.board.load(o.stones,o.undo??[]),!0}catch(o){console.error("load state failed",o)}return!1}save(){if(this.layoutID)try{this.storage.storeState({elapsed:this.clock.elapsed,state:this.state,layout:this.layoutID,gameMode:this.mode,undo:this.board.undo,stones:this.board.save()})}catch(o){console.error("storing state failed",o)}}isStorableLayoutId(){return this.layoutID!==void 0&&!this.layoutID.startsWith(ot)}storeLostGame(){if(this.isStorableLayoutId()){let o=this.layoutID??"unknown",e=this.storage.getScore(o)??{};e.playCount=(e.playCount??0)+1,this.storage.storeScore(o,e)}}gameOverLosing(){this.storeLostGame(),this.gameOver("MSG_FAIL")}gameOverEasyModeShuffle(){for(let o=0;o<10;o++)if(this.shuffle(),this.board.free.length>0){this.resume();return}this.gameOverEasyMode()}surrender(){this.storeLostGame(),this.sound.play(De.OVER),this.setState(oe.idle),this.clock.reset()}checkGameState(){if(this.board.count<2)this.gameOverWinning();else if(this.board.free.length===0){if(this.mode===Le&&this.board.countUnblocked()>1)return this.gameOverEasyMode(),!1;this.gameOverLosing()}else return this.sound.play(De.MATCH),this.delayedSave(),!0;return!1}gameOverWinning(){let o=this.clock.elapsed;if(!this.isStorableLayoutId()){this.gameOver("MSG_GOOD",o);return}let e=this.layoutID??"unknown",t=this.storage.getScore(e)??{};t.playCount=(t.playCount??0)+1,!t.bestTime||t.bestTime>o?(t.bestTime=o,this.gameOver("MSG_BEST",o)):this.gameOver("MSG_GOOD",o),this.storage.storeScore(e,t)}delayedSave(){clearTimeout(this.saveTimer),this.saveTimer=setTimeout(()=>{this.save()},300)}gameOverEasyMode(){this.clock.pause(),this.message={messageID:"MSG_FAIL",askShuffle:!0},this.state=oe.pause,this.delayedSave(),this.music.pause()}resolveMatchingStone(o){let e=this.board.selected;e&&(this.board.pick(e,o),this.checkGameState())}gameOver(o,e){this.sound.play(De.OVER),this.setState(oe.idle,o,e),this.clock.reset(),this.delayedSave()}setState(o,e,t){this.message=e?{messageID:e,playTime:t}:void 0,this.state=o}};var Fe={en:{title:"English"},de:{title:"Deutsch"},nl:{title:"Nederlands"},pt:{title:"Portugu\xEAs"},ru:{title:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439"},es:{title:"Espa\xF1ol"},eu:{title:"Euskara"},jp:{title:"\u65E5\u672C\u8A9E"},fr:{title:"Fran\xE7ais"},zh:{title:"\u4E2D\u6587"}};var at=class{constructor(o){this.storageProvider=o,this.lang=wt,this.sounds=!0,this.tileset=Se,this.music=!1,this.contrast=!1,this.dark=!1,this.background="",this.theme=xt,this.stats={games:0,bestTime:0}}load(){try{let o=this.storageProvider.getSettings();return o&&(this.lang=o.lang??wt,this.tileset=o.tileset??Se,this.background=o.background??this.background,this.theme=o.theme??xt,this.contrast=o.contrast??!1,this.dark=o.dark??!1,this.sounds=o.sounds??this.sounds,this.music=o.music??this.music,this.kyodaiUrl=o.kyodaiUrl),!0}catch(o){console.error("load settings failed",o)}return!1}save(){try{return this.storageProvider.storeSettings({lang:this.lang,sounds:this.sounds,music:this.music,contrast:this.contrast,dark:this.dark,background:this.background,theme:this.theme,tileset:this.tileset,kyodaiUrl:this.kyodaiUrl}),!0}catch(o){console.error("storing settings failed",o)}return!1}};var pe=(()=>{class i{constructor(){this.name="Mah Jong",this.storage=S(we),this.translate=S(xe),this.game=new rt(this.storage),this.settings=new at(this.storage),this.settings.load(),this.setLang(),this.game.init(),this.game.sound.enabled=this.settings.sounds,this.game.music.enabled=this.settings.music}setLang(){let e=!this.settings.lang||this.settings.lang===fn?(navigator.language.split("-")[0]||"en").toLowerCase():this.settings.lang;Object.keys(Fe).includes(e)?this.translate.use(e):this.translate.use("en")}toggleSound(){this.settings.sounds=!this.settings.sounds,this.game.sound.enabled=this.settings.sounds,this.settings.save()}toggleMusic(){this.settings.music=!this.settings.music,this.game.music.enabled=this.settings.music,this.game.music.toggle(),this.settings.save()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ci=["*"];function di(i,o){if(i&1&&(I(0,"h1"),re(1,"i",5),f(2),D()),i&2){let e=M(2);l(2),C(e.title())}}function pi(i,o){if(i&1){let e=F();I(0,"a",6),h(1,"translate"),le("click",function(){y(e);let n=M(2);return x(n.toggle())}),re(2,"i",7),D()}i&2&&ze("title",V(u(1,2,"CLOSE")))}function gi(i,o){if(i&1){let e=F();I(0,"div",1),le("click",function(){y(e);let n=M();return x(n.toggle())}),I(1,"div",2),le("click",function(n){return y(e),x(n.stopPropagation())}),I(2,"div",3),T(3,di,3,1,"h1"),T(4,pi,3,4,"a",4),D(),qt(5),D()()}if(i&2){let e=M();ge(J("overlay ",e.className())),l(3),L(e.title()?3:-1),l(),L(e.noCloseButton()?-1:4)}}var xn=(()=>{class i{constructor(){this.title=B(),this.className=B(),this.visible=Ke(!1),this.noCloseButton=B(!1),this.clickEvent=ue()}toggle(){this.visible.set(!this.visible()),this.clickEvent.emit(this.visible())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-dialog"]],inputs:{title:[1,"title"],className:[1,"className"],visible:[1,"visible"],noCloseButton:[1,"noCloseButton"]},outputs:{visible:"visibleChange",clickEvent:"clickEvent"},ngContentSelectors:ci,decls:1,vars:1,consts:[[3,"class"],[3,"click"],[1,"overlay-popup",3,"click"],[1,"dialog-header"],["role","button",1,"close",3,"title"],[1,"icon-logo"],["role","button",1,"close",3,"click","title"],[1,"icon-cancel-circled2"]],template:function(t,n){t&1&&(Xt(),T(0,gi,6,5,"div",0)),t&2&&L(n.visible()?0:-1)},dependencies:[W],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;color:var(--main-content-text-color)}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:var(--dialog-headline-color);margin-top:-8px;margin-bottom:10px;line-height:1.3em}@media only screen and (max-width:700px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em}}@media only screen and (max-width:400px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1em}}"]})}}return i})();function Be(i){if(Z.openExternal){i.preventDefault();try{let o=i.target;for(;o&&!(o instanceof HTMLAnchorElement);)o=o.parentElement;if(o&&o instanceof HTMLAnchorElement){let e=o.getAttribute("href")??"";Z.openExternal(e)}}catch(o){console.error(o)}}}function mi(i,o){if(i&1&&(I(0,"li")(1,"div")(2,"span",13),f(3),D(),re(4,"i"),I(5,"span",4),f(6),h(7,"translate"),D()(),I(8,"span",14),f(9),h(10,"translate"),D()()),i&2){let e=o.$implicit;l(3),C(e.key),l(),ge(e.icon),l(2),C(u(7,5,e.name)),l(3),C(u(10,7,e.name+"_LONG"))}}var wn=(()=>{class i{constructor(){this.shortcuts=[{icon:"icon-lightbulb",key:"T",name:"HINT"},{icon:"icon-spin1",key:"M",name:"SHUFFLE"},{icon:"icon-undo",key:"U",name:"UNDO"},{icon:"icon-loop",key:"N",name:"RESTART"},{icon:"icon-pause",key:"P",name:"PAUSE"},{icon:"icon-calendar",key:"I",name:"INFO"},{icon:"icon-cog",key:"S",name:"SETTINGS"},{icon:"icon-logo",key:"H",name:"HELP"}],this.clickExternalHref=Be}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-help"]],decls:70,vars:42,consts:[[1,"top"],[1,"help"],[1,"license"],[1,"license-list"],[1,"name"],[1,"info"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/tree/main/src/assets/svg/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/assets/sounds/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/fonts/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/assets/img/README.md",3,"click"],[1,"keyboard"],[1,"keyboard-list"],[1,"key"],[1,"func"]],template:function(t,n){t&1&&(I(0,"div",0)(1,"fieldset",1)(2,"legend"),f(3),h(4,"translate"),D(),I(5,"p"),f(6),h(7,"translate"),D(),I(8,"p")(9,"b"),f(10),h(11,"translate"),D(),f(12),h(13,"translate"),D(),I(14,"p")(15,"b"),f(16),h(17,"translate"),D(),f(18),h(19,"translate"),D(),I(20,"p"),f(21),h(22,"translate"),D()(),I(23,"fieldset",2)(24,"legend"),f(25),h(26,"translate"),D(),I(27,"div",3)(28,"div")(29,"div",4),f(30),h(31,"translate"),D(),I(32,"div",5)(33,"a",6),le("click",function(a){return n.clickExternalHref(a)}),f(34,"MIT"),D()()(),I(35,"div")(36,"div",4),f(37),h(38,"translate"),D(),I(39,"div",5)(40,"a",7),le("click",function(a){return n.clickExternalHref(a)}),f(41,"Free | Public Domain | CCA4.0 | GNU"),D()()(),I(42,"div")(43,"div",4),f(44),h(45,"translate"),D(),I(46,"div",5)(47,"a",8),le("click",function(a){return n.clickExternalHref(a)}),f(48,"CC0 | CC-BY3.0"),D()()(),I(49,"div")(50,"div",4),f(51),h(52,"translate"),D(),I(53,"div",5)(54,"a",9),le("click",function(a){return n.clickExternalHref(a)}),f(55,"SIL"),D()()(),I(56,"div")(57,"div",4),f(58),h(59,"translate"),D(),I(60,"div",5)(61,"a",10),le("click",function(a){return n.clickExternalHref(a)}),f(62,"Public Domain"),D()()()()()(),I(63,"fieldset",11)(64,"legend"),f(65),h(66,"translate"),D(),I(67,"ul",12),G(68,mi,11,9,"li",null,$),D()()),t&2&&(l(3),C(u(4,14,"HOW_TO_PLAY")),l(3),C(u(7,16,"HOW_GOAL")),l(4),C(u(11,18,"HOW_OPEN")),l(2),U(": ",u(13,20,"HOW_OPEN_DESC")),l(4),C(u(17,22,"HOW_PAIR")),l(2),U(": ",u(19,24,"HOW_PAIR_DESC")),l(3),C(u(22,26,"HOW_DO")),l(4),C(u(26,28,"LICENSE")),l(5),C(u(31,30,"GAME")),l(7),C(u(38,32,"DESIGNS")),l(7),C(u(45,34,"SOUNDS")),l(7),C(u(52,36,"FONTS")),l(7),C(u(59,38,"BACKGROUNDS")),l(7),C(u(66,40,"SHORTCUTS")),l(3),N(n.shortcuts))},dependencies:[W],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;flex:1;overflow:hidden auto;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:1px solid var(--main-bg-color-lt);border-radius:8px;padding:8px 12px 12px;flex:1}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding:0 6px;font-weight:700}[_nghost-%COMP%]   .top[_ngcontent-%COMP%]{flex:1;padding-right:6px;display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   .help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:4px}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .license-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{min-width:40%;max-width:40%}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]{padding:0;list-style:none;columns:2}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:14px}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .func[_ngcontent-%COMP%]{margin-top:8px;font-size:.8em;display:block}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:8px;vertical-align:middle;color:var(--main-content-text-color)}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;padding-left:4px;padding-right:4px;border:2px solid #ddd;border-radius:6px;min-height:20px;min-width:28px;font-size:.7em;vertical-align:top;display:inline-block;letter-spacing:1px;background:#000;color:#ddd;box-shadow:0 5px #000;text-align:center}@media only screen and (max-width:700px){[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]{columns:1}}@media only screen and (max-width:1000px){[_nghost-%COMP%]{flex-flow:column nowrap}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .top[_ngcontent-%COMP%]{flex-flow:column nowrap}[_nghost-%COMP%]   .help[_ngcontent-%COMP%], [_nghost-%COMP%]   .license[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .license-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-wrap:wrap;margin-bottom:8px}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{min-width:100%;max-width:100%}}"]})}}return i})();function st(i){return["kyodai","kyodai-black"].includes(i)}var Sn=[{name:"Traditional",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191758/https://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/79546_orig.jpg"},{name:"Cards",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/4962942_orig.jpg"},{name:"Board Games",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/3862268_orig.jpg"},{name:"Motorcycles",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8438984_orig.jpg"},{name:"NHL",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/630927_orig.jpg"},{name:"Social Media",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/241535_orig.jpg"},{name:"Monopoly",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9084861_orig.jpg"},{name:"Horror Films",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/849930_orig.jpg"},{name:"Animated Movies",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2303366_orig.jpg"},{name:"Stephen King",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/4168429_orig.jpg"},{name:"Lord of the Rings",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/3966297_orig.jpg"},{name:"007",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9617288_orig.jpg"},{name:"Disney Princess",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2281343_orig.jpg"},{name:"Religions",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191748im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2620625_orig.jpg"},{name:"Happy Eastern",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/1396173_orig.jpg"},{name:"Halloween",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8455923_orig.jpg"},{name:"Neck Ties",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9349600_orig.jpg"},{name:"Floral",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/3178635_orig.jpg"},{name:"Easter Eggs",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8685131_orig.jpg"},{name:"St. Patricks Day",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/7310933_orig.jpg"},{name:"Valentine's Day",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/1140822_orig.jpg"},{name:"Christmas",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/1525811_orig.jpg"},{name:"Canada Flower & Birds",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2953105_orig.jpg"},{name:"Canada Scenery",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8401335_orig.jpg"},{name:"Nova Scotia",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2933195_orig.jpg"},{name:"Canada Birds",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9756515_orig.jpg"},{name:"Arabic Alphabet & Numbers",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170902065732im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/5652995_orig.jpg"},{name:"Mahjongg Platinum 2 Dark",author:"Pavel Osharin",source:"https://web.archive.org/web/20170903191723im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2479283_orig.jpg"},{name:"Mahjongg Platinum 2 Red",author:"Pavel Osharin",source:"https://web.archive.org/web/20170903191723im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2090721_orig.jpg"},{name:"Mahjongg Titans",author:"Microsoft Vista",source:"https://web.archive.org/web/20170903191723im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/6604294_orig.jpg"},{name:"Viking Artifacts 1",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/VikingArtifacts.jpg"},{name:"Viking Artifacts 2",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/VikingArtifacts2.jpg"},{name:"Art of the Scythians",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/ScythianArt.jpg"},{name:"Waite-Rider Tarot",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/WaiteRiderTarot.jpg"},{name:"Waite-Rider Tarot Images",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725im_/http://www.vikinganswerlady.com/kyodai/WaiteRiderTarotImagesThumbnail.jpg"},{name:"Morgan-Greer Tarot",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/MorganGreerTarot.jpg"},{name:"Xena: Tarot of the Bitter Suite",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/BitterSuite.jpg"},{name:"A Rainbow of Bearded Irises",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/RainbowIris.jpg"},{name:"Antique Roses",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/AntiqueRoses.jpg"},{name:"Flags of the World",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725im_/http://www.vikinganswerlady.com/kyodai/FlagsThumbnail.jpg"},{name:"X-Men",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/XMen.jpg"},{name:"Age of Empires II: Age of Kings",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/AOEII.jpg"}];function hi(i){return he(this,null,function*(){return new Promise((o,e)=>{let t=new Image;t.addEventListener("load",()=>{o(t)}),t.addEventListener("error",n=>{console.error(n),e(new Error(`Image ${i} could not be loaded.`))}),t.src=i})})}function kn(i,o,e,t){let n="";for(let[r,a]of i.entries()){let s=r*e;for(let[c,d]of a.entries()){let g=c*t;n+=`<svg preserveAspectRatio="xMidYMid slice" id="${d}" width="75" height="100" viewBox="${g} ${s} ${t} ${e}"><use xlink:href="#${o}"></use></svg>`}}return n}function En(i){return he(this,null,function*(){if(!i)return"<svg><defs></defs></svg>";let o=(d,g)=>[...Array.from({length:g}).keys()].map(_=>_+d),e=[o(1,9).map(d=>`do${d}`),o(1,9).map(d=>`ba${d}`),o(1,9).map(d=>`ch${d}`),["se_winter","se_spring","se_summer","se_fall","wi_north","wi_south","wi_east","wi_west"],["fl_bamboo","fl_plum","fl_orchid","fl_chrysanthemum","dr_green","dr_white","dr_red"]].map(d=>d.map(g=>`t_${g}`)),t=[o(1,9).map(d=>`g${d}`),o(10,9).map(d=>`g${d}`),o(1,9).map(d=>`e${d}`)].map(d=>d.map(g=>`t_${g}`)),n=yield hi(i),r=n.height/5,a=n.width/9,s=St(i),c=St("kyodai-extra");return`<svg><defs>
<image id="${s}" xlink:href="${i}" x="0" y="0" height="${n.height}" width="${n.width}"/>
<image id="${c}" xlink:href="/assets/svg/kyodai-extra.png" x="0" y="0" height="300" width="675"/>
${kn(e,s,r,a)}
${kn(t,c,100,75)}
</defs></svg>
`})}var lt=(()=>{class i{constructor(){this.http=S(Te),this.cache={}}get(e,t){return he(this,null,function*(){if(st(e))return En(t);let n=this.cache[e];if(n){if(n.data)return n.data;if(n.request!==void 0)return n.request}n={};let r=new Promise((a,s)=>{setTimeout(()=>{this.http.get(`assets/svg/${e}.svg`,{responseType:"text"}).subscribe({next:c=>{n.data=c,n.request=void 0,a(c)},error:c=>{s(c)}})})});return n.request=r,this.cache[e]=n,r})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Tn='<svg id="mah-error-icon" width="60" height="60" shape-rendering="geometricPrecision" text-rendering="geometricPrecision"image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="10 0 560 431.15"><g fill-rule="nonzero"><path fill="#D92D27" d="M492.56 431.15H19.42v-.05c-14.72.03-24.33-16.08-16.78-29.12L234.51 9.64c7.35-12.57 25.75-13.05 33.42-.23l240.41 390.96c9.12 12.64.2 30.78-15.78 30.78z"/><path fill="#fff" d="M41.15 399.63h431.88L252.71 47.08c-.63-.99-1.38-.98-1.97 0L40.02 397.9c-.63 1.12-.31 1.74 1.13 1.73z"/><path d="M243.18 246.58h25.46v20.32h-25.46v-20.32zm-78.9 102.8h-17.43v7.87h21.35v12.7h-38.78v-54.47h38.35l-2.18 12.69h-18.74v8.58h17.43v12.63zm58.16 20.57h-19.16l-7.15-16.21h-5v16.21h-16.18v-54.47h27.45c12.49 0 18.74 6.36 18.74 19.08 0 8.72-2.7 14.47-8.11 17.26l9.41 18.13zm-31.31-41.78v12.15h5.26c2.09 0 3.62-.23 4.57-.66.95-.43 1.44-1.44 1.44-3v-4.82c0-1.57-.49-2.58-1.44-3.01-.95-.43-2.49-.66-4.57-.66h-5.26zm84.25 41.78h-19.17l-7.15-16.21h-4.99v16.21h-16.18v-54.47h27.45c12.49 0 18.74 6.36 18.74 19.08 0 8.72-2.7 14.47-8.11 17.26l9.41 18.13zm-31.31-41.78v12.15h5.25c2.1 0 3.63-.23 4.58-.66.95-.43 1.44-1.44 1.44-3v-4.82c0-1.57-.49-2.58-1.44-3.01-.95-.43-2.5-.66-4.58-.66h-5.25zm34.14 14.59c0-9.94 1.86-17.18 5.58-21.74 3.71-4.57 10.43-6.85 20.13-6.85s16.41 2.28 20.13 6.85c3.72 4.56 5.58 11.8 5.58 21.74 0 4.94-.4 9.09-1.18 12.46-.78 3.37-2.14 6.3-4.05 8.8-1.92 2.5-4.57 4.33-7.93 5.49-3.37 1.16-7.551.74-12.55 1.74-4.99 0-9.18-.58-12.55-1.74-3.37-1.16-6.01-2.99-7.93-5.49s-3.27-5.43-4.05-8.8c-.79-3.37-1.18-7.52-1.18-12.46zm18.74-9.07v22.66h7.23c2.38 0 4.11-.27 5.19-.831.07-.55 1.61-1.81 1.61-3.79v-22.66h-7.33c-2.32 0-4.02.28-5.09.83-1.07.55-1.61 1.81-1.61 3.79zm85.62 36.26H363.4l-7.15-16.21h-4.99v16.21h-16.18v-54.47h27.44c12.5 0 18.756.36 18.75 19.08 0 8.72-2.71 14.47-8.11 17.26l9.41 18.13zm-31.31-41.78v12.15h5.25c2.1 0 3.63-.23 4.58-.66.95-.43 1.43-1.44 1.43-3v-4.82c0-1.57-.48-2.58-1.43-3.01-.95-.43-2.5-.66-4.58-.66h-5.25zm-82.62-93h-25.46c-1.82-22.29-4.73-26.26-5.95-40.78-1.25-14.61-2.12-35.58 18.73-35.58 21.86 0 20.1 23.36 18.45 38.47-1.37 12.45-4.05 17.16-5.77 37.89z"/></g></svg>',Ln='<svg id="mah-tile-spinner" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><rect x="11" y="1" width="2" height="5" opacity=".14"/><rect x="11" y="1" width="2" height="5" transform="rotate(30 12 12)" opacity=".29"/><rect x="11" y="1" width="2" height="5" transform="rotate(60 12 12)" opacity=".43"/><rect x="11" y="1" width="2" height="5" transform="rotate(90 12 12)" opacity=".57"/><rect x="11" y="1" width="2" height="5" transform="rotate(120 12 12)" opacity=".71"/><rect x="11" y="1" width="2" height="5" transform="rotate(150 12 12)" opacity=".86"/><rect x="11" y="1" width="2" height="5" transform="rotate(180 12 12)"/><animateTransform attributeName="transform" type="rotate" calcMode="discrete" dur="0.75s" values="0 12 12;30 12 12;60 12 12;90 12 12;120 12 12;150 12 12;180 12 12;210 12 12;240 12 12;270 12 12;300 12 12;330 12 12;360 12 12" repeatCount="indefinite"/></g></svg>';var ui=["app-image-set-loader",""],ct=(()=>{class i{constructor(){this.imageSet=B(),this.kyodaiUrl=B(),this.prefix=B(),this.dark=B(!1),this.elementRef=S(Oe),this.svgDef=S(lt)}ngOnChanges(e){this.getImageSet()}setLoading(){let e=[Ln];for(let t of kt)for(let n of t)e.push(`<svg id="${n}" width="75" height="100"><use xlink:href="#mah-tile-spinner" transform="translate(26,42)"></use></svg>`);this.setImageSet(`<svg><defs>${e.join("")}</defs></svg>`)}prepareDefs(e){let t=e.indexOf("<defs>"),n=e.lastIndexOf("</defs>");return(t!==-1&&n!==-1&&n>t+6?e.slice(t+6,n):"").replace(/xlink:href="\./g,'xlink:href="assets/svg').replace(/ id="t_/g,` id="${this.prefix()}t_`)}setError(){let e=[Tn];for(let t of kt)for(let n of t)e.push(`<svg id="${n}" width="75" height="100"><use xlink:href="#mah-error-icon" transform="translate(8,18)"></use></svg>`);this.setImageSet(`<svg><defs>${e.join("")}</defs></svg>`)}setImageSet(e){this.elementRef.nativeElement.innerHTML="";let t=this.prepareDefs(e);setTimeout(()=>{this.elementRef.nativeElement.innerHTML=t},0)}loadImageSet(){let e=this.imageSet()+(this.dark()?"-black":"");this.svgDef.get(e,this.kyodaiUrl()).then(t=>{this.setImageSet(t)}).catch(t=>{this.setError(),console.error(t)})}getImageSet(){this.imageSet()&&(this.setLoading(),setTimeout(()=>this.loadImageSet(),0))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["","app-image-set-loader",""]],inputs:{imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],prefix:[1,"prefix"],dark:[1,"dark"]},features:[Pe],attrs:ui,decls:1,vars:0,template:function(t,n){t&1&&(X(),re(0,"defs"))},encapsulation:2})}}return i})();var In=(()=>{class i{constructor(){this.imageSet=B(),this.kyodaiUrl=B(),this.tile=B.required(),this.index=B(),this.isDark=B(!1)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-tile"]],inputs:{imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],tile:[1,"tile"],index:[1,"index"],isDark:[1,"isDark"]},decls:6,vars:10,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 75 100","preserveAspectRatio","xMidYMid meet"],["app-image-set-loader","",3,"imageSet","kyodaiUrl","dark","prefix"],["x","6","y","6","width","63","height","88"]],template:function(t,n){t&1&&(X(),p(0,"svg",0),k(1,"defs",1),p(2,"title"),f(3),h(4,"translate"),m(),k(5,"use",2),m()),t&2&&(q("dark",n.isDark()),l(),b("imageSet",n.imageSet())("kyodaiUrl",n.kyodaiUrl())("dark",n.isDark())("prefix","t_"+n.imageSet()+"_"+n.index()+"_"),l(2),C(u(4,8,n.tile())),l(2),Q("href","#t_"+n.imageSet()+"_"+n.index()+"_"+n.tile(),null,"xlink"))},dependencies:[ct,W],styles:["[_nghost-%COMP%]{display:block;width:75px;height:100px;margin:0 auto}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:100%;width:auto;background-color:var(--tile-color);border:1px solid var(--tile-color-border)}[_nghost-%COMP%] > svg.dark[_ngcontent-%COMP%]{background-color:var(--tile-color-dark);border:1px solid var(--tile-color-border-dark)}"]})}}return i})();function _i(i,o){i&1&&(X(),re(0,"path",3))}function fi(i,o){i&1&&(X(),re(0,"path",4))}function Ci(i,o){i&1&&(X(),re(0,"path",5))}function Mi(i,o){i&1&&(X(),re(0,"path",6))}function Pi(i,o){i&1&&(X(),re(0,"path",7))}var dt=(()=>{class i{constructor(){this.imagesetId=B.required(),this.licenseKey=B.required(),this.licenses=_n,this.clickExternalHref=Be}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-license-link"]],inputs:{imagesetId:[1,"imagesetId"],licenseKey:[1,"licenseKey"]},decls:8,vars:4,consts:[["target","_blank","rel","noopener",3,"click","href","title"],["xmlns","http://www.w3.org/2000/svg",0,"xml","space","preserve","fill-rule","evenodd","stroke-linecap","round","clip-rule","evenodd","viewBox","0 0 1067 1067"],["fill","#fff","fill-rule","nonzero","stroke","#000","stroke-width","62.55","d","M1034.158 535.104c0 276.808-224.169 501.207-500.698 501.207-276.535 0-500.703-224.398-500.703-501.207S256.926 33.897 533.46 33.897c276.535 0 500.694 224.398 500.694 501.207h.005Z"],["fill-rule","nonzero","d","m463.156 546.582 68.977 28.564q-6.95 39.752-21.892 66.412t-37.095 40.228q-22.152 13.568-56.381 13.568-41.526 0-67.848-16.544-26.322-16.543-45.435-58.2-19.112-41.657-19.112-106.641 0-86.646 33.62-133.182t95.126-46.536q48.127 0 75.667 26.66t40.917 81.885l-69.499 21.185q-3.649-15.948-7.645-23.328-6.603-12.378-16.158-19.043t-21.371-6.665q-26.757 0-41.004 29.517-10.773 21.9-10.772 68.793 0 58.082 12.857 79.623 12.858 21.543 36.139 21.542 22.587 0 34.141-17.377t16.767-50.464Zm276.778 0 68.977 28.564q-6.95 39.752-21.892 66.412t-37.095 40.228-56.381 13.568q-41.526 0-67.848-16.544-26.322-16.543-45.435-58.2-19.112-41.657-19.112-106.641 0-86.646 33.62-133.182t95.126-46.536q48.127 0 75.667 26.66t40.917 81.885l-69.499 21.185q-3.649-15.948-7.645-23.328-6.603-12.378-16.158-19.043t-21.371-6.665q-26.757 0-41.004 29.517-10.773 21.9-10.772 68.793 0 58.082 12.857 79.623 12.858 21.543 36.139 21.542 22.587 0 34.141-17.377t16.767-50.464Z"],["fill-rule","nonzero","d","M288.297 575.269v-72.601H409.92v148.773q-34.923 32.611-61.767 44.394t-63.678 11.783q-45.348 0-73.929-21.185t-44.305-63.08q-15.724-41.894-15.724-96.167 0-57.13 17.201-99.38 17.2-42.251 50.387-64.151 25.889-16.9 69.672-16.901 42.22 0 63.157 10.474t34.749 32.492 20.763 55.82l-75.927 18.567q-4.691-19.756-15.898-30.231-11.207-10.474-28.581-10.474-25.889 0-41.265 24.637t-15.377 77.957q0 56.653 15.55 80.933t43.35 24.28q13.205 0 25.193-5.237t27.452-17.853V575.27zM456.31 352.704h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089v129.492H456.31zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm178.264-148.773h78.707v263.031h122.839v85.931H713.629z"],["fill-rule","nonzero","d","M156.426 390.204h151.806v58.494h-90.135v47.538h76.987v54.965h-76.987v111.231h-61.671zm185.691 272.228V390.205H444.45q28.464 0 43.509 6.685t24.262 24.79 9.217 44.102q0 22.655-7.048 39.089-7.049 16.434-19.382 26.647-7.862 6.5-21.551 10.77 10.978 5.013 15.994 10.027 3.389 3.342 9.827 14.298t8.607 16.898l29.683 78.92h-69.397L435.37 579.24q-6.235-16.155-11.114-20.983-6.642-6.314-15.045-6.314h-5.422v110.488zm61.671-161.925h25.888q4.202 0 16.265-3.714 6.1-1.67 9.962-8.542 3.863-6.87 3.863-15.784 0-13.184-6.099-20.241-6.1-7.056-22.906-7.056h-26.973zm153.296-110.303H721.63v58.122H618.619v43.267h95.556v55.522h-95.556v53.666h105.993v61.65H557.084zm200.465 0h164.546v58.122H819.084v43.267h95.556v55.522h-95.556v53.666h105.993v61.65H757.549z"],["fill-rule","nonzero","d","M309.898 348.538h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm177.916-148.773H697.7q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85-7.993-11.426-30.058-11.426h-22.413v77.838Z"],["fill-rule","nonzero","d","M309.898 348.538h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm179.306-148.773h116.932q34.575 0 55.86 12.854t35.184 36.896 20.155 55.939 6.255 67.603q0 55.938-9.295 86.765t-25.801 51.654-35.444 27.731q-25.888 9.521-46.912 9.521H568.261V348.539Zm78.707 79.028v190.668h19.286q24.672 0 35.097-7.498t16.332-26.184 5.907-60.58q0-55.462-13.205-75.934-13.205-20.47-43.784-20.471h-19.633Z"]],template:function(t,n){if(t&1&&(I(0,"a",0),le("click",function(a){return n.clickExternalHref(a)}),X(),I(1,"svg",1),re(2,"path",2),T(3,_i,1,0,":svg:path",3)(4,fi,1,0,":svg:path",4)(5,Ci,1,0,":svg:path",5)(6,Mi,1,0,":svg:path",6)(7,Pi,1,0,":svg:path",7),D()()),t&2){let r;ze("href",J("https://github.com/ffalt/mah/blob/main/src/assets/svg/README.md#",n.imagesetId(),"svg"),He)("title",n.licenses[n.licenseKey()]||"?"),l(3),L((r=n.licenseKey())==="cca"?3:r==="gpl"?4:r==="free"?5:r==="per"?6:r==="pub"?7:-1)}},styles:["[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain;vertical-align:middle}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{margin-left:3px;line-height:30px;font-size:.8em}"]})}}return i})();function Oi(i,o){if(i&1&&(p(0,"div",14)(1,"div"),k(2,"app-tile",15),m(),k(3,"div",16),h(4,"translate"),m()),i&2){let e=o.$implicit,t=o.$index,n=M(3);l(2),b("tile",e)("imageSet",n.tileset)("kyodaiUrl",n.kyodaiUrl)("index",t)("isDark",n.isDark),l(),b("innerHTML",u(4,6,e),zt)}}function bi(i,o){if(i&1&&(p(0,"div")(1,"div",13),f(2),h(3,"translate"),m(),p(4,"div"),G(5,Oi,5,8,"div",14,$),m()()),i&2){let e=o.$implicit;ge(J("tiles-section tiles-section-",e.tiles.length)),l(2),C(u(3,7,e.name)),l(2),ge(J("tiles-set tiles-set-",e.tiles.length)),l(),N(e.tiles)}}function vi(i,o){if(i&1&&G(0,bi,7,9,"div",12,$),i&2){let e=o.$implicit;N(e.groups)}}function yi(i,o){if(i&1&&k(0,"app-license-link",4),i&2){let e=M();b("imagesetId",e.selectedSet.id)("licenseKey",e.selectedSet.license)}}function xi(i,o){if(i&1&&(p(0,"option",6),f(1),m()),i&2){let e=o.$implicit,t=M();b("value",e.id)("selected",t.tileset===e.id),l(),C(e.name)}}function wi(i,o){if(i&1&&(p(0,"option",7),f(1),h(2,"translate"),m()),i&2){let e=M();b("selected",e.tileset==="kyodai"),l(),C(u(2,2,"KYODAI_TILESET"))}}var Dn=(()=>{class i{get selectedSet(){return this.sets.find(e=>e.id===this.tileset)}applyTileset(){this.app.settings.tileset=this.tileset,this.app.settings.dark=this.isDark,this.app.settings.save()}constructor(){this.TILES_INFOS=Cn,this.sets=Ze,this.tileset=Se,this.isDark=!1,this.canKyodai=Z.kyodai,this.app=S(pe),this.clickExternalHref=Be,this.tileset=this.app.settings.tileset,this.isDark=this.app.settings.dark,this.kyodaiUrl=this.app.settings.kyodaiUrl}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-tiles-info"]],decls:23,vars:17,consts:[[1,"tiles-content"],[1,"tiles-footer"],[1,"tiles-form"],[1,"tiles-select"],[3,"imagesetId","licenseKey"],[3,"change"],[3,"value","selected"],["value","kyodai",3,"selected"],["type","checkbox",3,"change","checked"],["type","button",3,"click","disabled"],[1,"tiles-reference"],["rel","noopener","target","_blank",3,"click","href"],[3,"class"],[1,"tiles-title"],[1,"tile"],[3,"tile","imageSet","kyodaiUrl","index","isDark"],[3,"innerHTML"]],template:function(t,n){t&1&&(p(0,"div",0),G(1,vi,2,0,null,null,$),m(),p(3,"div",1)(4,"form",2)(5,"div",3),T(6,yi,1,2,"app-license-link",4),p(7,"select",5),v("change",function(a){return n.tileset=a.target.value}),G(8,xi,2,3,"option",6,$),T(10,wi,3,4,"option",7),m()(),p(11,"label")(12,"input",8),v("change",function(){return n.isDark=!n.isDark}),m(),f(13),h(14,"translate"),m(),p(15,"button",9),v("click",function(){return n.applyTileset()}),f(16),h(17,"translate"),m()(),p(18,"div",10)(19,"a",11),h(20,"translate"),v("click",function(a){return n.clickExternalHref(a)}),f(21),h(22,"translate"),m()()()),t&2&&(l(),N(n.TILES_INFOS),l(5),L(n.selectedSet?6:-1),l(2),N(n.sets),l(2),L(n.canKyodai&&n.kyodaiUrl?10:-1),l(2),b("checked",n.isDark),l(),C(u(14,9,"TILES_DARK")),l(2),b("disabled",!n.selectedSet||n.selectedSet.id===n.app.settings.tileset&&n.isDark===n.app.settings.dark),l(),U("",u(17,11,"USE_NOW")," "),l(3),b("href",V(u(20,13,"READ_MORE_WIKIPEDIA_URL")),He),l(2),C(u(22,15,"READ_MORE_WIKIPEDIA")))},dependencies:[In,dt,W],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;height:100%}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:var(--dialog-text-color);margin-top:0;margin-bottom:.2em;line-height:1em}@media only screen and (max-width:400px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em}}[_nghost-%COMP%]   .tiles-content[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;flex:1;border:1px solid var(--card-layout-color-border);border-radius:4px;overflow-y:auto}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]{flex:1;text-align:center;word-break:normal;margin-top:5px;margin-bottom:5px;display:flex;flex-direction:column;padding-left:5px;padding-right:5px}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;font-size:.9em}[_nghost-%COMP%]   .tiles-title[_ngcontent-%COMP%]{flex:1;margin-top:.5em;margin-bottom:.2em;font-weight:700;text-align:center;letter-spacing:2px;border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .tiles-section[_ngcontent-%COMP%]{padding:0 6px}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]{flex:50%}[_nghost-%COMP%]   .tiles-set[_ngcontent-%COMP%]{display:flex;justify-content:space-around}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:20%}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:50%}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:33%}}@media only screen and (max-width:280px){[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:50%}}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]{padding-top:8px}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;gap:8px;width:100%;margin-bottom:8px}@media only screen and (max-width:500px){[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]{justify-content:space-around}}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]   .tiles-select[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;gap:8px}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-items:center;height:100%;flex:1}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-reference[_ngcontent-%COMP%]{text-align:center}"]})}}return i})();var ki=["kyodaiInput"],Si=(i,o)=>o.source;function Ei(i,o){if(i&1){let e=F();p(0,"li")(1,"input",36),v("change",function(){let n=y(e).$implicit,r=M();return r.app.settings.lang=n.key,x(r.app.setLang())}),m(),p(2,"label",37),f(3),m()()}if(i&2){let e=o.$implicit,t=o.$index,n=M();l(),b("id","lang"+(t+1))("value",e.key)("checked",n.app.settings.lang===e.key),Q("aria-label",e.title),l(),b("for","lang"+(t+1)),l(),C(e.title)}}function Ti(i,o){if(i&1){let e=F();p(0,"li")(1,"input",38),v("change",function(){let n=y(e).$implicit,r=M();return r.app.settings.tileset=n.id,x(r.app.settings.save())}),m(),p(2,"label",37),f(3),m(),k(4,"app-license-link",39),m()}if(i&2){let e=o.$implicit,t=o.$index,n=M();l(),b("id",J("imageset",t))("value",e.id)("checked",n.app.settings.tileset===e.id),Q("aria-label",e.name),l(),b("for",J("imageset",t)),l(),U(" ",e.name," "),l(),be("aria-label",J("License information for ",e.name)),b("imagesetId",e.id)("licenseKey",e.license)}}function Li(i,o){if(i&1){let e=F();p(0,"li")(1,"input",40),h(2,"translate"),v("change",function(){y(e);let n=M();return n.app.settings.tileset="kyodai",x(n.app.settings.save())}),m(),p(3,"label",41),f(4),h(5,"translate"),m()()}if(i&2){let e=M();l(),b("checked",e.app.settings.tileset==="kyodai"),Q("aria-label",u(2,3,"KYODAI_TILESET")),l(3),C(u(5,5,"KYODAI_TILESET"))}}function Ii(i,o){if(i&1&&(p(0,"option",51),f(1),m()),i&2){let e=o.$implicit;b("value",e.source),l(),Re("",e.name," - ",e.author)}}function Di(i,o){if(i&1){let e=F();p(0,"fieldset",21)(1,"legend",42),f(2),h(3,"translate"),m(),p(4,"div",43)(5,"textarea",44,0),h(7,"translate"),v("change",function(n){y(e);let r=M();return x(r.updateKyodaiUrl(n))}),m(),p(8,"button",45),h(9,"translate"),h(10,"translate"),v("click",function(){y(e);let n=M();return x(n.clearKyodaiUrl())}),X(),p(11,"svg",46),k(12,"path",47)(13,"path",48),m()(),Ve(),p(14,"select",49),h(15,"translate"),v("change",function(n){y(e);let r=M();return x(r.setKyodaiUrl(n))}),p(16,"option",50),f(17),h(18,"translate"),m(),G(19,Ii,2,3,"option",51,Si),m()(),p(21,"button",52),h(22,"translate"),v("click",function(){y(e);let n=M();return x(n.applyKyodaiUrl())}),f(23),h(24,"translate"),m()()}if(i&2){let e=M();l(2),C(u(3,14,"KYODAI_TILESET_SETTINGS")),l(3),b("placeholder",V(u(7,16,"KYODAI_TILESET_URL_PLACEHOLDER")))("value",e.app.settings.kyodaiUrl?e.app.settings.kyodaiUrl:""),l(3),b("title",V(u(9,18,"KYODAI_TILESET_CLEAR"))),be("aria-label",V(u(10,20,"KYODAI_TILESET_CLEAR"))),l(6),be("aria-label",V(u(15,22,"KYODAI_TILESET_EXAMPLES"))),l(3),C(u(18,24,"KYODAI_TILESET_EXAMPLES")),l(2),N(e.kyodaiTileSets),l(2),be("aria-label",V(u(22,26,"KYODAI_TILESET_LOAD"))),l(2),U(" ",u(24,28,"KYODAI_TILESET_LOAD")," ")}}function Bi(i,o){if(i&1){let e=F();p(0,"li")(1,"input",53),h(2,"translate"),v("change",function(){let n=y(e).$implicit,r=M();return r.app.settings.theme=n.id||"",x(r.app.settings.save())}),m(),p(3,"label",37),f(4),h(5,"translate"),m(),p(6,"div",54),k(7,"div",55),m()()}if(i&2){let e=o.$implicit,t=o.$index,n=M();l(),b("id",J("color",t))("value",e.id)("checked",n.app.settings.theme===e.id),Q("aria-label",u(2,10,e.name)),l(2),b("for",J("color",t)),l(),C(u(5,12,e.name)),l(3),ge("theme-"+e.id)}}function Ai(i,o){if(i&1){let e=F();p(0,"li")(1,"input",56),h(2,"translate"),v("change",function(){let n=y(e).$implicit,r=M();return r.app.settings.background=n.img||"",x(r.app.settings.save())}),m(),p(3,"label",37),f(4),h(5,"translate"),m()()}if(i&2){let e=o.$implicit,t=o.$index,n=M();l(),b("id",J("back",t))("value",e.img)("checked",n.app.settings.background===e.img),Q("aria-label",u(2,8,e.name)),l(2),b("for",J("back",t)),l(),C(u(5,10,e.name))}}var Bn=(()=>{class i{constructor(){this.kyodaiInput=de.required("kyodaiInput"),this.canKyodai=Z.kyodai,this.kyodaiTileSets=Sn,this.sets=Ze,this.backs=We,this.themes=un,this.languages=Object.keys(Fe).map(e=>({key:e,title:Fe[e].title})),this.app=S(pe),this.storage=S(we),this.layoutService=S(me),this.translate=S(xe)}updateKyodaiUrl(e){this.app.settings.kyodaiUrl=e.target.value,this.app.settings.save()}clearKyodaiUrl(){this.app.settings.kyodaiUrl=void 0,this.app.settings.tileset=Se,this.app.settings.save()}setKyodaiUrl(e){let t=this.kyodaiInput();t.nativeElement&&(e.preventDefault(),e.stopPropagation(),t.nativeElement.value=e.target.value)}applyKyodaiUrl(){let e=this.kyodaiInput();e.nativeElement&&(this.app.settings.kyodaiUrl=e.nativeElement.value,this.app.settings.save())}clearTimes(){return he(this,null,function*(){let e=yield this.layoutService.get();for(let t of e.items)this.storage.clearScore(t.id)})}clearTimesClick(){confirm(this.translate.instant("BEST_TIMES_CLEAR_SURE"))&&this.clearTimes().catch(e=>{console.error(e)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-settings"]],viewQuery:function(t,n){t&1&&ce(n.kyodaiInput,ki,5),t&2&&ve()},decls:91,vars:65,consts:[["kyodaiInput",""],["type","radio","name","settings-tab","id","tab-language","checked","",1,"tabs-input"],["type","radio","name","settings-tab","id","tab-stones",1,"tabs-input"],["type","radio","name","settings-tab","id","tab-theme",1,"tabs-input"],["type","radio","name","settings-tab","id","tab-background",1,"tabs-input"],["type","radio","name","settings-tab","id","tab-data",1,"tabs-input"],["role","tablist","aria-label","Settings Tabs",1,"tabs-labels"],["role","tab","id","tab-lang-label","for","tab-language"],["role","tab","id","tab-stones-label","for","tab-stones"],["role","tab","id","tab-theme-label","for","tab-theme"],["role","tab","id","tab-background-label","for","tab-background"],["role","tab","id","tab-data-label","for","tab-data"],[1,"tabs-panels","panels"],["id","panel-language","role","tabpanel","aria-labelledby","tab-lang-label",1,"panel"],["id","lang-legend"],["role","group","aria-labelledby","lang-legend",1,"radio"],["type","radio","name","lang","id","lang0","value","auto",3,"change","checked"],["for","lang0"],["id","panel-stones","role","tabpanel","aria-labelledby","tab-stones-label",1,"panel"],["id","tileset-legend"],["role","group","aria-labelledby","tileset-legend",1,"radio","radio-tilesets"],[1,"kyodai-settings"],["id","tiles-legend"],["role","group","aria-labelledby","tiles-legend",1,"checks"],[1,"check"],["type","checkbox",3,"change","checked","aria-label"],["id","panel-theme","role","tabpanel","aria-labelledby","tab-theme-label",1,"panel"],["id","theme-legend"],["role","group","aria-labelledby","theme-legend",1,"radio","radio-themes"],["id","panel-background","role","tabpanel","aria-labelledby","tab-background-label",1,"panel"],["id","background-legend"],["role","group","aria-labelledby","background-legend",1,"radio"],["id","panel-data","role","tabpanel","aria-labelledby","tab-data-label",1,"panel"],["id","times-legend"],[1,"button-group"],[1,"clear-times",3,"click","aria-label"],["type","radio","name","lang",3,"change","id","value","checked"],[3,"for"],["type","radio","name","imageset",3,"change","id","value","checked"],[3,"imagesetId","licenseKey","aria-label"],["type","radio","name","imageset","value","kyodai","id","imageset-kyodai",3,"change","checked"],["for","imageset-kyodai"],["id","kyodai-legend"],[1,"input-wrapper"],["type","text","name","kyodai","aria-labelledby","kyodai-legend","aria-describedby","kyodai-help",3,"change","value","placeholder"],[1,"clear-kyodai",3,"click","title","aria-label"],["width","17px","height","17px","viewBox","0 0 35 35","aria-hidden","true"],["d","M28.814,30.064a1.247,1.247,0,0,1-.884-.367L5.3,7.07A1.249,1.249,0,0,1,7.07,5.3L29.7,27.93a1.251,1.251,0,0,1-.884,2.134Z"],["d","M6.186,30.064A1.251,1.251,0,0,1,5.3,27.93L27.93,5.3A1.25,1.25,0,0,1,29.7,7.07L7.07,29.7A1.247,1.247,0,0,1,6.186,30.064Z"],[1,"example-kyodai",3,"change","aria-label"],["value",""],[3,"value"],[3,"click","aria-label"],["type","radio","name","color",3,"change","id","value","checked"],[1,"theme-preview-wrapper"],[1,"theme-preview"],["type","radio","name","back",3,"change","id","value","checked"]],template:function(t,n){t&1&&(k(0,"input",1)(1,"input",2)(2,"input",3)(3,"input",4)(4,"input",5),p(5,"div",6)(6,"label",7),f(7),h(8,"translate"),m(),p(9,"label",8),f(10),h(11,"translate"),m(),p(12,"label",9),f(13),h(14,"translate"),m(),p(15,"label",10),f(16),h(17,"translate"),m(),p(18,"label",11),f(19),h(20,"translate"),m()(),p(21,"div",12)(22,"section",13)(23,"fieldset")(24,"legend",14),f(25),h(26,"translate"),m(),p(27,"ul",15)(28,"li")(29,"input",16),h(30,"translate"),v("change",function(){return n.app.settings.lang="auto",n.app.setLang()}),m(),p(31,"label",17),f(32),h(33,"translate"),m()(),G(34,Ei,4,6,"li",null,$),m()()(),p(36,"section",18)(37,"fieldset")(38,"legend",19),f(39),h(40,"translate"),m(),p(41,"ul",20),G(42,Ti,5,12,"li",null,$),T(44,Li,6,7,"li"),m()(),T(45,Di,25,30,"fieldset",21),p(46,"fieldset")(47,"legend",22),f(48),h(49,"translate"),m(),p(50,"ul",23)(51,"li")(52,"label",24)(53,"input",25),h(54,"translate"),v("change",function(){return n.app.settings.contrast=!n.app.settings.contrast,n.app.settings.save()}),m(),p(55,"span"),f(56),h(57,"translate"),m()()(),p(58,"li")(59,"label",24)(60,"input",25),h(61,"translate"),v("change",function(){return n.app.settings.dark=!n.app.settings.dark,n.app.settings.save()}),m(),p(62,"span"),f(63),h(64,"translate"),m()()()()()(),p(65,"section",26)(66,"fieldset")(67,"legend",27),f(68),h(69,"translate"),m(),p(70,"ul",28),G(71,Bi,8,14,"li",null,$),m()()(),p(73,"section",29)(74,"fieldset")(75,"legend",30),f(76),h(77,"translate"),m(),p(78,"ul",31),G(79,Ai,6,12,"li",null,$),m()()(),p(81,"section",32)(82,"fieldset")(83,"legend",33),f(84),h(85,"translate"),m(),p(86,"div",34)(87,"button",35),h(88,"translate"),v("click",function(){return n.clearTimesClick()}),f(89),h(90,"translate"),m()()()()()),t&2&&(l(7),C(u(8,27,"LANG")),l(3),C(u(11,29,"TILESET")),l(3),C(u(14,31,"THEME")),l(3),C(u(17,33,"BACKGROUND")),l(3),C(u(20,35,"DATA")),l(6),C(u(26,37,"LANG")),l(4),b("checked",n.app.settings.lang==="auto"),Q("aria-label",u(30,39,"LANG_AUTO")),l(3),C(u(33,41,"LANG_AUTO")),l(2),N(n.languages),l(5),C(u(40,43,"TILESET")),l(3),N(n.sets),l(2),L(n.canKyodai?44:-1),l(),L(n.canKyodai&&n.app.settings.tileset==="kyodai"?45:-1),l(3),C(u(49,45,"TILES")),l(5),be("aria-label",V(u(54,47,"HIGHER_CONTRAST"))),b("checked",n.app.settings.contrast),l(3),C(u(57,49,"HIGHER_CONTRAST")),l(4),be("aria-label",V(u(61,51,"TILES_DARK"))),b("checked",n.app.settings.dark),l(3),C(u(64,53,"TILES_DARK")),l(5),C(u(69,55,"THEME")),l(3),N(n.themes),l(5),C(u(77,57,"BACKGROUND")),l(3),N(n.backs),l(5),C(u(85,59,"BEST_TIMES")),l(3),be("aria-label",V(u(88,61,"BEST_TIMES_CLEAR"))),l(2),U(" ",u(90,63,"BEST_TIMES_CLEAR")," "))},dependencies:[dt,W],styles:['[_nghost-%COMP%]{flex:1;overflow-y:auto;width:100%;height:100%;display:flex;flex-direction:column;position:relative}@media only screen and (max-width:1000px){[_nghost-%COMP%]{gap:8px;padding:4px}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:1px solid var(--main-bg-color-lt);border-radius:8px;padding:12px;margin:0;background-color:var(--dialog-background-color);transition:all .2s ease}@media only screen and (max-width:700px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{padding:10px}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding:0 8px;font-weight:600;color:var(--primary-text-colddor);margin-left:-4px;font-size:.95em;display:none}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0;display:flex;gap:6px;height:40px;min-height:40px;line-height:40px;align-items:center;border-radius:6px;transition:background-color .15s ease;box-sizing:border-box;break-inside:avoid;flex:1}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus-within{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{columns:2;text-align:left;list-style:none;padding:0;margin:0;vertical-align:text-bottom}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;line-height:1.2;white-space:normal;text-overflow:ellipsis;flex:1;font-size:.95em}@media only screen and (max-width:400px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{-webkit-hyphens:auto;hyphens:auto;word-break:break-all}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-shrink:0}@media only screen and (max-width:350px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]{list-style:none;padding:0 0 0 13px;margin:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:8px;margin:-8px;border-radius:6px;transition:background-color .15s ease;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus-within{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{padding:2px;display:flex;align-items:center;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;flex-shrink:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95em}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]{background-color:var(--dialog-background-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;border:1px solid var(--input-border-color);background-color:var(--input-background-color);border-radius:6px;margin:8px 0;overflow:hidden;transition:border-color .2s ease}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:hover{background-color:var(--input-background-color-hover);border-color:var(--dialog-headline-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-text-color);outline-offset:-2px}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:none;resize:none;outline:none;font-size:10px;background-color:var(--input-background-color);color:var(--input-text-color);padding:10px;font-family:monospace;line-height:1.4}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{outline:none}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";right:18px;top:calc(50% - 4px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid var(--input-text-color);pointer-events:none}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]{background-image:unset;background-color:var(--input-background-color);color:var(--input-background-color);border:1px solid var(--input-border-color);border-left:1px solid var(--input-border-color);width:44px;padding:0;display:flex;align-items:center;justify-content:center;appearance:none;cursor:pointer}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]:hover{background-color:var(--input-background-color-hover);border-color:var(--dialog-headline-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-text-color);outline-offset:-2px}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-text-color);border:1px solid var(--input-border-color);border-left:1px solid var(--input-border-color);width:44px;padding:0;margin-left:-1px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--input-text-color);transition:fill .2s ease}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]:hover{background-color:var(--input-background-color-hover);border-color:var(--dialog-headline-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-text-color);outline-offset:-2px}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]:active{background-color:var(--dialog-background-color)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]{columns:2}@media only screen and (max-width:500px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-wrap:nowrap;align-items:center;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   app-license-link[_ngcontent-%COMP%]{margin-left:auto;flex-shrink:0}@media only screen and (max-width:500px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]   .theme-preview-wrapper[_ngcontent-%COMP%]{display:block;border:1px solid #000}@media(prefers-color-scheme:dark){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]   .theme-preview-wrapper[_ngcontent-%COMP%]{border-color:#6e6e6e}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]{background-color:var(--main-bg-color);display:block;width:20px;height:20px}[_nghost-%COMP%]   .tabs-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:1px;height:1px;margin:-1px;padding:0;border:0;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;justify-content:center;margin-top:2px;margin-bottom:16px;padding-bottom:8px}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]{background:transparent;color:var(--input-text-color);padding:8px 0;border-radius:0;border:none;border-bottom:2px solid transparent;font-weight:600;cursor:pointer;min-width:auto;text-align:center;position:relative;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]:focus-visible{color:var(--dialog-headline-color);outline:none;border-bottom-color:var(--gesture-indicator)}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.35}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]:hover:not(:disabled){color:var(--dialog-headline-color);border-bottom-color:var(--dialog-headline-color);opacity:.9}[_nghost-%COMP%]   .tabs-panels[_ngcontent-%COMP%]{flex:1;padding-right:8px}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{background:var(--dialog-background-color);display:none;width:100%;height:100%;flex-direction:column;justify-content:center;gap:8px}[_nghost-%COMP%]   #tab-language[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-language][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]{color:var(--dialog-headline-color);border-bottom-color:var(--dialog-headline-color);font-weight:700}[_nghost-%COMP%]   #tab-language[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-language][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]:hover{color:var(--text-highlight-color);border-bottom-color:var(--text-highlight-color)}@media(prefers-color-scheme:dark){[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{border-bottom-color:var(--input-border-color)}[_nghost-%COMP%]   #tab-language[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-language][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]{color:var(--dialog-headline-color);border-bottom-color:var(--dialog-headline-color)}[_nghost-%COMP%]   #tab-language[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-language][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]:hover{color:var(--main-text-color);border-bottom-color:var(--main-text-color)}}[_nghost-%COMP%]   #tab-language[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-language[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-background[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-stones[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-theme[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-data[_ngcontent-%COMP%]{display:flex}@media only screen and (max-height:400px){[_nghost-%COMP%]   .tabs-panels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .tabs-panels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{display:none}}']})}}return i})();function Tt(i){return(i<10?"0":"")+i.toString()}var pt=(()=>{class i{transform(e){if(Number.isNaN(e)||e===0)return"-";let t=Math.floor(e/1e3),n=Math.floor(t/3600),r=Math.floor((t-n*3600)/60),a=t-n*3600-r*60;return`${n>0?`${Tt(n)}:`:""}${Tt(r)}:${Tt(a)}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=_e({name:"duration",type:i,pure:!0})}}return i})();var fe=class i{static{this.empty=new i(0,0,0,0)}constructor(o,e,t,n){this.left=o,this.top=e,this.right=t,this.bottom=n}static fromElement(o){let{left:e,top:t,right:n,bottom:r}=o.getBoundingClientRect();return new i(e,t,n,r)}static fromWindow(o){return new i(0,0,o.innerWidth,o.innerHeight)}inflate(o){this.left-=o,this.top-=o,this.right+=o,this.bottom+=o}intersectsWith(o){return o.left<this.right&&this.left<o.right&&o.top<this.bottom&&this.top<o.bottom}intersectsWithY(o){return o.top<this.bottom&&this.top<o.bottom}getIntersectionWith(o){let e=Math.max(this.left,o.left),t=Math.max(this.top,o.top),n=Math.min(this.right,o.right),r=Math.min(this.bottom,o.bottom);return n>=e&&r>=t?new i(e,t,n,r):i.empty}};var Ae=(()=>{class i{constructor(){this.scrollNotify=new Pt,this.observeNotify=new Pt,this.currentViewport=new fe(0,0,0,0),this.scrollSubject=new Ft,this.platformId=S(Ut),this.isBrowser=en(this.platformId),this.hasIntersectionObserver=i.checkIntersectionObserver();let e=this.scrollSubject.asObservable();this.scrollObservable=Gt(e.pipe(jt(300)),e.pipe(Nt(100))),this.scrollObservable.subscribe(t=>{this.scrollNotify.emit(t)}),this.currentViewport=fe.fromWindow(window)}getObserver(){return this.intersectionObserver?this.intersectionObserver:(this.intersectionObserver=new IntersectionObserver(e=>{this.observeNotify.next(e)},{threshold:0}),this.intersectionObserver)}notifyScroll(e){if(this.hasIntersectionObserver)return;let t=e.element?fe.fromElement(e.element):fe.fromWindow(window),n=t.bottom-t.top;t.bottom+=n,t.top-=n,this.currentViewport=t,this.scrollSubject.next({rect:t})}static checkIntersectionObserver(){let e="IntersectionObserver"in window,n=window.navigator.userAgent.match(/Edge\/(\d*)\./i),r=!!n&&n.length>1,a=r&&!!n&&Number.parseInt(n[1],10)>15;return e&&(!r||a)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=Me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var An=(()=>{class i{constructor(){this.scrollTo=B(),this.element=S(Oe),this.scrollNotify=S(Ae)}ngOnChanges(e){if(e.scrollTo?.currentValue){let t=e.scrollTo.currentValue;if(t.id&&t.id.length>0){let n=document.getElementById(t.id);n&&(this.element.nativeElement.scrollTop=n.offsetTop-n.offsetHeight)}}}scrollTrack(e){this.scrollNotify.notifyScroll({name:"scroll-host",element:this.element.nativeElement})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Ue({type:i,selectors:[["","appDeferLoadScrollHost",""]],hostBindings:function(t,n){t&1&&v("scroll",function(a){return n.scrollTrack(a)})},inputs:{scrollTo:[1,"scrollTo"]},features:[Pe]})}}return i})();var Vn=(()=>{class i{constructor(){this.preRender=B(!1),this.appDeferLoad=ue(),this.timeoutLoadMS=20,this.elementRef=S(Oe),this.deferLoadService=S(Ae)}ngAfterViewInit(){this.deferLoadService.isBrowser?this.deferLoadService.hasIntersectionObserver?this.registerIntersectionObserver():this.addScrollListeners():this.preRender()&&this.load()}ngOnDestroy(){this.removeListeners()}static getScrollPosition(){return window.scrollY+(document.documentElement.clientHeight||document.body.clientHeight)}loadAndUnobserve(){this.load(),this.unobserve(),this.removeListeners()}cancelDelayLoad(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}delayLoad(){this.timeoutId||(this.timeoutId=setTimeout(()=>{this.loadAndUnobserve(),this.cancelDelayLoad()},this.timeoutLoadMS))}manageIntersection(e){this.checkIfIntersecting(e)?this.delayLoad():this.cancelDelayLoad()}registerIntersectionObserver(){this.intersectionObserver||(this.intersectionObserver=this.deferLoadService.getObserver(),this.intersectionObserver&&this.elementRef.nativeElement&&(this.intersectionObserver.observe(this.elementRef.nativeElement),this.observeSubscription=this.deferLoadService.observeNotify.subscribe(e=>{this.checkForIntersection(e)})))}checkForIntersection(e){for(let t of e)t.target===this.elementRef.nativeElement&&this.manageIntersection(t)}checkIfIntersecting(e){return e?.time?e.isIntersecting:this.isVisible()}load(){this.removeListeners(),this.appDeferLoad.emit()}loadFromScroll(){setTimeout(()=>{this.load()})}addScrollListeners(){this.scrollSubscription=this.deferLoadService.scrollNotify.subscribe(e=>{this.checkInView(e.rect)&&this.loadFromScroll()}),setTimeout(()=>{this.checkInView(this.deferLoadService.currentViewport)&&this.loadFromScroll()})}unobserve(){this.intersectionObserver&&this.elementRef.nativeElement&&(this.intersectionObserver.unobserve(this.elementRef.nativeElement),this.intersectionObserver=void 0)}removeListeners(){this.scrollSubscription&&(this.scrollSubscription.unsubscribe(),this.scrollSubscription=void 0),this.unobserve(),this.observeSubscription&&(this.observeSubscription.unsubscribe(),this.observeSubscription=void 0)}checkInView(e){return fe.fromElement(this.elementRef.nativeElement).intersectsWithY(e)}isVisible(){let e=i.getScrollPosition();return this.elementRef.nativeElement.offsetTop<=e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Ue({type:i,selectors:[["","appDeferLoad",""]],inputs:{preRender:[1,"preRender"]},outputs:{appDeferLoad:"appDeferLoad"}})}}return i})();function O(i,o,e){return`${i}|${o}|${e}`}function Ne(i,o){return Math.floor(Math.random()*(o-i+1))+i}function ae(i){return i[Math.floor(Math.random()*i.length)]}function j(i){for(let o=i.length-1;o>0;o--){let e=Math.floor(Math.random()*(o+1));[i[o],i[e]]=[i[e],i[o]]}return i}function K(i,o,e){return i>=0&&i<=36&&o>=0&&o<=16&&e>=0&&e<=5}function ne(i,o,e,t){return i.has(O(o,e-1,t-1))||i.has(O(o,e,t-1))||i.has(O(o,e+1,t-1))||i.has(O(o,e-1,t))||i.has(O(o,e+1,t))||i.has(O(o,e-1,t+1))||i.has(O(o,e,t+1))||i.has(O(o,e+1,t+1))}function gt(i,o,e,t){if(o===0)return!0;let n=o-1;return i.has(O(n,e,t))||i.has(O(n,e-1,t))&&i.has(O(n,e+1,t))?!0:i.has(O(n,e-1,t-1))&&i.has(O(n,e+1,t-1))&&i.has(O(n,e-1,t+1))&&i.has(O(n,e+1,t+1))}function je(i,o,e,t,n){if(!K(t,n,e))return!1;let r=O(e,t,n);return i.has(r)||!gt(i,e,t,n)||ne(i,e,t,n)?!1:(i.add(r),o.push([e,t,n]),!0)}function Rn(i){return i%2!==0}function Fn(){return ae(["lines","lines","lines","checker","checker","areas","areas","rings"])}function mt(i,o){let e=[];for(let t=0;t<=o;t+=2)for(let n=0;n<=i;n+=2)e.push([n,t]);return e}function ht(i,o,e,t=0){for(let[n,r]of i)for(let a=-o;a<=o;a++)for(let s=-o;s<=o;s++){let c=n+s,d=r+a;K(c,d,t)&&e.add(O(t,c,d))}}function Ce(i,o,e,t=2){let n=[];for(let r=0;r<=e;r+=t)for(let a=0;a<=o;a+=t)i.has(O(0,a,r))&&n.push([0,a,r]);return n}function ut(i,o,e=1){let t=[];for(let r=0;r<=i;r+=e)t.push(r);let n=[];for(let r=0;r<=o;r+=e)n.push(r);return{xs:t,ys:n}}function ke(i,o,e,t,n,r){let a=i;for(let[s,c]of o){if(a>=n)break;for(let[d,g]of e){if(a>=n)break;let _=r(d,g,s,c);if(_>0&&(a+=_,a>=t&&a<=n))break}if(a>=t&&a<=n)break}return a}function Gn(i){return i.some(o=>o[0]>0)}function Vi(i,o,e,t,n,r){let a=Ne(n,r),s=a*4,c=[];for(let g of t)for(let _ of e)c.push([_,g]);j(c);let d=0;for(;d<a&&s-- >0&&c.length>0;){let[g,_]=c.pop();if(g===e[0]||g===e.at(-1)||_===t[0]||_===t.at(-1))continue;let P=O(o,g,_);if(!i.has(P))continue;let E=Math.random()<.5?"h":"v",w=[];E==="h"?(w.push(P),g+1<=e.at(-1)&&w.push(O(o,g+1,_))):(w.push(P),_+1<=t.at(-1)&&w.push(O(o,g,_+1)));let R=!1;for(let A of w)i.delete(A)&&(R=!0);R&&d++}}function Ri(i,o,e){for(let t of e)for(let n of o)n%2!==0||t%2!==0||i.add(O(0,n,t))}function Fi(){let i=Math.random()<.5?0:ae([0,0,2,2,4]),o=Math.random()<.5?0:ae([0,0,2,2,4]),e=Math.random()<.5?0:ae([0,2,2,4]),t=Math.random()<.5?0:ae([0,2,2,4]);return{left:i,right:o,top:e,bottom:t}}function Gi(i,o,e,t,n,r){let{left:a,right:s,top:c,bottom:d}=r;for(let g of e)for(let _ of o)(_<a||_>t-s||g<c||g>n-d)&&i.delete(O(0,_,g))}function Ni(i,o,e){return Math.min(Math.max(o,Math.floor(i*.45)),e)}function ji(i,o,e){let t=o.length;if(t<=e)return t;let n=j([...o]);for(;t>e&&n.length>0;){let r=n.pop();i.delete(O(0,r[1],r[2]))&&t--}return t}function Hi(i,o,e){let t=[];for(let n of e)for(let r of o)i.has(O(0,r,n))||t.push([0,r,n]);return t}function $i(i,o,e,t){j(o);let n=e;for(;n<t&&o.length>0;){let[,r,a]=o.pop();ne(i,0,r,a)||(i.add(O(0,r,a)),n++)}return n}function Nn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,{xs:r,ys:a}=ut(e,t,1);Ri(n,r,a);let s=Fi();Gi(n,r,a,e,t,s),Vi(n,0,r,a,6,32);let c=Ce(n,e,t,1),d=c.length,g=Ni(d,i,o);if(d>g)ji(n,c,g);else if(d<g){let _=Hi(n,r,a);$i(n,_,d,g)}return Ce(n,e,t,1)}function Lt(i,o,e,t,n,r=!1){if(t%2!==0||n%2!==0||!K(t,n,0))return!1;let a=O(0,t,n);return i.has(a)||ne(i,0,t,n)?!1:(i.add(a),o.push([0,t,n]),r&&e.add(a),!0)}function Ui(i,o,e,t,n){let r=Math.floor(t/2),a=Math.floor(n/2);return r-=r%2,a-=a%2,K(r,a,0)||(r=0,a=0),Lt(i,o,e,r,a,!0),{sx:r,sy:a}}function zi(i,o){let e=i+o,t=Math.max(40,Math.floor(e*.8)),n=Math.max(t+100,Math.floor(e*2));return Ne(t,n)}function Yi(i,o){let e=[i[0],i[1]],t=[-i[0],-i[1]],n=i[0]===0?[[1,0],[-1,0]]:[[0,1],[0,-1]],r=[e,...n,t];return Math.random()<o&&(r=j(r)),Math.random()<.2&&(r=[...j([...n]),e,t]),r}function Ki(i,o,e,t,n,r,a){let s=Yi(r,a);for(let[c,d]of s){let g=t+c*2,_=n+d*2;if(K(g,_,0)&&Lt(i,o,e,g,_,!0))return{x:g,y:_,direction:[c,d]}}return null}function Xi(i,o,e,t,n){let r=j([[1,0],[-1,0],[0,1],[0,-1]]);for(let[a,s]of r){let c=t+a*2,d=n+s*2;if(!(!K(c,d,0)||ne(i,0,c,d)||i.has(O(0,c,d)))&&Lt(i,o,e,c,d,!0))return{x:c,y:d,direction:[a,s]}}return null}function qi(i,o,e,t,n,r){let a=Math.random()<.4?ae([0,0,2]):0,s=Math.random()<.4?ae([0,0,2]):0,c=Math.random()<.4?ae([0,2]):0,d=Math.random()<.4?ae([0,2]):0;for(let g of t)for(let _ of e)if(_<a||_>n-s||g<c||g>r-d){let P=O(0,_,g);o.has(P)||i.delete(P)}}function Wi(i,o,e,t){let n=o.length,r=j([...o].filter(a=>!e.has(O(0,a[1],a[2]))));for(;n>t&&r.length>0;){let a=r.pop();i.delete(O(0,a[1],a[2]))&&n--}return n}function Zi(i,o,e,t,n,r){let a=[],s=[];for(let g of t)for(let _ of e)i.has(O(0,_,g))||([[_-2,g],[_+2,g],[_,g-2],[_,g+2]].some(([w,R])=>o.has(O(0,w,R)))?a:s).push([0,_,g]);j(a),j(s);let c=[a,s],d=n;for(let g of c)for(;d<r&&g.length>0;){let[_,P,E]=g.pop();P%2===0&&E%2===0&&!ne(i,0,P,E)&&(i.add(O(_,P,E)),d++)}return d}function Qi(i,o,e,t,n,r,a,s){let c=Ce(i,a,s,1),d=c.length,g=Math.min(Math.max(n,Math.floor(d*.9)),r);d>g?Wi(i,c,o,g):d<g&&Zi(i,o,e,t,d,g)}function Ji(i,o,e){let t=[];for(let n of e)for(let r of o)i.has(O(0,r,n))&&t.push([0,r,n]);return t}function jn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,r=[],a=new Set,{xs:s,ys:c}=ut(e,t,1),{sx:d,sy:g}=Ui(n,r,a,e,t),_=d,P=g,w=[[1,0],[-1,0],[0,1],[0,-1]][Math.floor(Math.random()*4)],R=zi(e,t);for(let A=0;A<R;A++){let z=A%Ne(6,12)===0?Math.random()*.6+.2:Math.random()*.3,se=Ki(n,r,a,_,P,w,z);if(se){_=se.x,P=se.y,w=se.direction;continue}let Ee=Xi(n,r,a,_,P);if(Ee){_=Ee.x,P=Ee.y,w=Ee.direction;continue}break}return qi(n,a,s,c,e,t),Qi(n,a,s,c,i,o,e,t),Ji(n,s,c)}function Hn(i,o,e,t){let n=i+(e-1)*2,r=o+(t-1)*2,a=[];for(let s=i;s<=n;s+=2)a.push([s,o]);for(let s=o+2;s<=r;s+=2)a.push([n,s]);for(let s=n-2;s>=i;s-=2)a.push([s,r]);for(let s=r-2;s>o;s-=2)a.push([i,s]);return a}function It(i,o,e,t,n,r,a){let s=`${e}x${t}`;if(a.has(s))return!1;let c=i+(e-1)*2,d=o+(t-1)*2;if(!K(c,d,0))return!1;let g=Hn(i,o,e,t);for(let[_,P]of g){if(_%2!==0||P%2!==0||!K(_,P,0))return!1;let E=O(0,_,P);if(n.has(E)||r.has(E)||ne(n,0,_,P))return!1}return!0}function Dt(i,o,e,t,n,r,a){let s=Hn(i,o,e,t);for(let[c,d]of s)n.add(O(0,c,d));return ht(s,2,r,0),a.add(`${e}x${t}`),s.length}function $n({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,r=new Set,a=new Set,s=[];for(let g=3;g<=8;g++)for(let _=3;_<=8;_++)s.push([g,_]);j(s);let c=mt(e,t);j(c);let d=0;if(d=ke(d,s,c,i,o,(g,_,P,E)=>It(g,_,P,E,n,r,a)?Dt(g,_,P,E,n,r,a):0),d<i){let g=s.filter(([_,P])=>!a.has(`${_}x${P}`));j(g),j(c),d=ke(d,g,c,i,o,(_,P,E,w)=>It(_,P,E,w,n,r,a)?Dt(_,P,E,w,n,r,a):0)}if(d<o){let g=!0,_=!1;for(;g&&d<o;){g=!1;let P=_?[...s]:s.filter(([E,w])=>!a.has(`${E}x${w}`));if(P.length===0&&!_){_=!0;continue}j(P),j(c),d=ke(d,P,c,i,o,(E,w,R,A)=>{if(!It(E,w,R,A,n,r,a))return 0;let z=Dt(E,w,R,A,n,r,a);return z>0&&(g=!0),z})}}return Ce(n,e,t,2)}function Un(i,o,e,t){let n=i+(e-1)*2,r=o+(t-1)*2,a=[];for(let s=o;s<=r;s+=2)for(let c=i;c<=n;c+=2)a.push([c,s]);return a}function Bt(i,o,e,t,n,r,a){let s=`${e}x${t}`;if(a.has(s))return!1;let c=i+(e-1)*2,d=o+(t-1)*2;if(!K(c,d,0))return!1;let g=Un(i,o,e,t);for(let[_,P]of g){if(_%2!==0||P%2!==0||!K(_,P,0))return!1;let E=O(0,_,P);if(n.has(E)||r.has(E)||ne(n,0,_,P))return!1}return!0}function At(i,o,e,t,n,r,a){let s=Un(i,o,e,t);for(let[c,d]of s)n.add(O(0,c,d));return ht(s,2,r,0),a.add(`${e}x${t}`),s.length}function zn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,r=new Set,a=new Set,s=[];for(let g=2;g<=5;g++)for(let _=2;_<=5;_++)s.push([g,_]);j(s);let c=mt(e,t);j(c);let d=ke(0,s,c,i,o,(g,_,P,E)=>Bt(g,_,P,E,n,r,a)?At(g,_,P,E,n,r,a):0);if(d<i){let g=s.filter(([_,P])=>!a.has(`${_}x${P}`));j(g),j(c),d=ke(d,g,c,i,o,(_,P,E,w)=>Bt(_,P,E,w,n,r,a)?At(_,P,E,w,n,r,a):0)}if(d<o){let g=!0,_=!1;for(;g&&d<o;){g=!1;let P=_?[...s]:s.filter(([E,w])=>!a.has(`${E}x${w}`));if(P.length===0&&!_){_=!0;continue}j(P),j(c),d=ke(d,P,c,i,o,(E,w,R,A)=>{if(!Bt(E,w,R,A,n,r,a))return 0;let z=At(E,w,R,A,n,r,a);return z>0&&(g=!0),z})}}return Ce(n,e,t,2)}function _t(i,o,e){if(!i&&!o||e.length===0)return e;let t=Math.max(...e.map(w=>w[1])),n=Math.max(...e.map(w=>w[2])),r=t*2+2,a=n*2+2,s=Math.min(36,r+4),c=Math.min(16,a+4);s%2!==0&&s--,c%2!==0&&c--,s<r&&(s=Math.max(t*2,Math.min(36-36%2,r))),c<a&&(c=Math.max(n*2,Math.min(16-16%2,a)));let d=w=>s-w,g=w=>c-w,_=[...e],P=new Set(_.map(([w,R,A])=>O(w,R,A))),E=(w,R,A)=>{if(!K(R,A,w))return;let z=O(w,R,A);P.has(z)||ne(P,w,R,A)||(P.add(z),_.push([w,R,A]))};if(i){let w=[..._];for(let[R,A,z]of w){let se=d(A);se!==A&&E(R,se,z)}}if(o){let w=[..._];for(let[R,A,z]of w){let se=g(z);se!==z&&E(R,A,se)}}return _}function ft(i,o,e,t){let n=e&&t,r=e&&!t||!e&&t,a;n?a=.25:r?a=.5:a=1;let s=Math.max(1,Math.floor(i*a)),c=Math.max(s,Math.floor(o*a)),d=e?Math.floor(36/2):36,g=t?Math.floor(16/2):16;return{minTarget:s,maxTarget:c,xMax:d,yMax:g}}function Yn(i,o,e){if(e==="checker"){let{minTarget:t,maxTarget:n}=ft(70,120,i,o),r=i?7:14,a=i?Math.floor(36/2):36,s=o?6:12,c=o?Math.floor(16/2):16,d=Math.floor(Math.random()*(a-r+1))+r,g=Math.floor(Math.random()*(c-s+1))+s;return _t(i,o,Nn({minTarget:t,maxTarget:n,xMax:d,yMax:g}))}if(e==="lines")return _t(i,o,jn(ft(60,80,i,o)));if(e==="rings")return _t(i,o,$n(ft(70,120,i,o)));if(e==="areas")return _t(i,o,zn(ft(60,100,i,o)));throw new Error("Invalid mode")}function eo(i,o){let e=36,t=0,n=16,r=0;for(let[a,s,c]of i)a===o-1&&(e=Math.min(e,s),t=Math.max(t,s),n=Math.min(n,c),r=Math.max(r,c));return e>t||n>r?null:{minX:Math.max(0,e-2),maxX:Math.min(36,t+2),minY:Math.max(0,n-2),maxY:Math.min(16,r+2)}}function to(i,o,e){let t=[],n=[],r=[],a=o-1;for(let s=e.minY;s<=e.maxY;s++)for(let c=e.minX;c<=e.maxX;c++){let d=O(o,c,s);if(i.has(d)||!K(c,s,o))continue;let g=i.has(O(a,c,s)),_=i.has(O(a,c-1,s))&&i.has(O(a,c+1,s)),P=i.has(O(a,c-1,s-1))&&i.has(O(a,c+1,s-1))&&i.has(O(a,c-1,s+1))&&i.has(O(a,c+1,s+1));(g||_||P)&&(P?t.push([c,s]):_?n.push([c,s]):g&&r.push([c,s]))}return{bridgeLarge:t,bridgeSmall:n,direct:r}}function no(i,o,e){let t=[],n=o-1;if(Math.random()<.25)for(let r=e.minY;r<=e.maxY;r++)for(let a=e.minX;a<=e.maxX;a++){if(!i.has(O(n,a,r)))continue;let s=[[-1,0],[1,0],[0,-1],[0,1]],[c,d]=ae(s),g=a+c,_=r+d;if(!K(g,_,o))continue;let P=O(o,g,_);i.has(P)||t.push([g,_])}return t}function io(i){let o=Math.trunc(Math.random()*i);return o-=o%2,Math.max(o,2)}function oo(i,o,e,t,n,r,a,s,c){if(!je(i,o,e,t,n))return!1;if(r||a){let d=s(t),g=c(n);r&&d!==t&&je(i,o,e,d,n),a&&g!==n&&je(i,o,e,t,g),r&&a&&(d!==t||g!==n)&&je(i,o,e,d,g)}return!0}function ro(i,o,e,t){if(i.length>=144)return i;let n=eo(i,o);if(!n)return i;let r=new Set(i.map(z=>O(z[0],z[1],z[2]))),{bridgeLarge:a,bridgeSmall:s,direct:c}=to(r,o,n),d=no(r,o,n),g=144-i.length,_=io(g),P=0,{mirX:E,mirY:w}=Kn(i),R=[...i],A=z=>{for(let[se,Ee]of z){if(P>=_||R.length>=144)return;oo(r,R,o,se,Ee,e,t,E,w)&&P++}};return A(a),A(s),A(c),A(d),R}function ao(i,o,e){let t=i;for(let n=1;n<=5&&t.length<144;n++)t=ro(t,n,o,e);return t.length>144?t.slice(0,144):t}function Kn(i){let o=i.map(d=>d[1]),e=i.map(d=>d[2]),t=o.length>0?Math.min(...o):0,n=o.length>0?Math.max(...o):36,r=e.length>0?Math.min(...e):0,a=e.length>0?Math.max(...e):16,s=(t+n)/2,c=(r+a)/2;return{mirX:d=>Math.round(2*s-d),mirY:d=>Math.round(2*c-d)}}function so(i,o,e,t,n,r,a,s,c){let d=[[t,n]];if(r){let g=s(t);g!==t&&d.push([g,n])}if(a){let g=c(n);if(d.some(_=>_[0]===t&&_[1]===g)||d.push([t,g]),r){let _=s(t),P=c(n);d.some(E=>E[0]===_&&E[1]===P)||d.push([_,P])}}for(let[g,_]of d){if(!K(g,_,e))return!1;let P=O(e,g,_);if(o.has(P)||!gt(o,e,g,_)||ne(o,e,g,_))return!1}if(i.length+d.length>144)return!1;for(let[g,_]of d){let P=O(e,g,_);o.add(P),i.push([e,g,_])}return!0}function lo(i,o,e){let t=new Set(i.map(s=>O(s[0],s[1],s[2]))),{mirX:n,mirY:r}=Kn(i),a=!0;for(;i.length<144&&a;){a=!1;for(let s=0;s<=5&&i.length<144;s++){let c=[];for(let d=0;d<=16;d++)for(let g=0;g<=36;g++)K(g,d,s)&&(t.has(O(s,g,d))||c.push([g,d]));for(let d=c.length-1;d>0;d--){let g=Math.floor(Math.random()*(d+1));[c[d],c[g]]=[c[g],c[d]]}for(let[d,g]of c){if(i.length>=144)break;so(i,t,s,d,g,o,e,n,r)&&(a=!0)}}}return i}function co(i){let o=36,e=0,t=16,n=0;for(let[,r,a]of i)o=Math.min(o,r),e=Math.max(e,r),t=Math.min(t,a),n=Math.max(n,a);return{minX:Math.max(0,o-2),maxX:Math.min(36,e+2),minY:Math.max(0,t-2),maxY:Math.min(16,n+2)}}function po(i,o,e){for(let t=5;t>=0;t--)for(let n=e.minY;n<=e.maxY;n++)for(let r=e.minX;r<=e.maxX;r++){if(!K(r,n,t))continue;let a=O(t,r,n);if(!o.has(a)&&gt(o,t,r,n)&&!ne(o,t,r,n))return o.add(a),i.push([t,r,n]),!0}return!1}function go(i){let o=new Map;for(let[e,t,n]of i)o.set(O(e,t,n),0);for(let[e,t,n]of i){if(e===0)continue;let r=e-1,a=[O(r,t,n),O(r,t-1,n),O(r,t+1,n),O(r,t-1,n-1),O(r,t+1,n-1),O(r,t-1,n+1),O(r,t+1,n+1)];for(let s of a)o.has(s)&&o.set(s,(o.get(s)||0)+1)}return o}function mo(i,o){let e=-1,t=-1;for(let n=i.length-1;n>=0;n--){let[r,a,s]=i[n],c=O(r,a,s);(o.get(c)||0)===0&&r>=t&&(e=n,t=r)}return e}function ho(i){if(!Rn(i.length))return i;let o=new Set(i.map(r=>O(r[0],r[1],r[2]))),e=co(i);if(po(i,o,e)||i.length===0)return i;let t=go(i),n=mo(i,t);return n>=0?i.splice(n,1):i.pop(),i}function Xn(i,o,e){let t=[...i],n=0;for(;t.length<144&&n<50;){n++;let r=t.length;if(t=ao(t,o,e),t.length===r)break}return t.length<144&&(t=lo(t,o,e)),t.length>144&&(t=t.slice(0,144)),t=ho(t),t}var qn=100;function uo(i,o,e){let t=Yn(i,o,e);for(let n=0;n<qn;n++){let r=Xn(t,i,o);if(r.length===144)return r}return[]}function Wn(i,o,e){let t=i==="random"?Math.random()<.5:i==="true",n=o==="random"?Math.random()<.5:o==="true",r=e==="random"?Fn():e,a=[],s=0;for(;a.length!==144||!Gn(a);)if(a=uo(t,n,r),s++,s>qn)return[];return vn(a)}var Zn=(()=>{class i{constructor(){this.translate=S(xe)}transform(e){let t=`CAT_${e.toUpperCase()}`,n=this.translate.instant(t);return n===t?e:n}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=_e({name:"translateGroup",type:i,pure:!0})}}return i})();var _o=["scrollHost"];function fo(i,o){if(i&1){let e=F();p(0,"a",4),v("click",function(){let n=y(e).$index,r=M(2);return x(r.scrollToGroup(n))}),f(1),h(2,"translateGroup"),m()}if(i&2){let e=o.$implicit;l(),C(u(2,1,e.name))}}function Co(i,o){if(i&1&&(p(0,"div",1),G(1,fo,3,3,"a",null,$),m()),i&2){let e=M();l(),N(e.groups)}}function Mo(i,o){if(i&1&&f(0),i&2){let e=M(2).$implicit;U(" [",e.layouts.length,"] ")}}function Po(i,o){if(i&1){let e=F();p(0,"div",6),v("click",function(){y(e);let n=M().$implicit;return x(n.expanded=!n.expanded)}),k(1,"span",7),f(2),h(3,"translateGroup"),p(4,"span",8),T(5,Mo,1,1),m()()}if(i&2){let e=M().$implicit;l(),q("expanded",e.expanded),l(),U(" ",u(3,4,e.name)," "),l(3),L(e.isRandom?-1:5)}}function Oo(i,o){if(i&1&&k(0,"app-layout-preview",27),i&2){let e=M().$implicit;b("svg",e.layout.previewSVG)("alt",e.layout.name)}}function bo(i,o){if(i&1&&k(0,"div",30),i&2){let e=M().$implicit;q("selected",e.selected),b("id","item-"+e.layout.id)}}function vo(i,o){if(i&1){let e=F();p(0,"div",26),v("keydown.enter",function(){let n=y(e).$implicit,r=M(4);return x(r.onStart(n))})("click",function(){let n=y(e).$implicit,r=M(4);return x(r.onStart(n))})("appDeferLoad",function(){let n=y(e).$implicit;return x(n.visible=!0)}),T(1,Oo,1,2,"app-layout-preview",27)(2,bo,1,3,"div",28),p(3,"div",29),f(4),m()()}if(i&2){let e=o.$implicit;q("selected",e.selected),b("id","item-"+e.layout.id),l(),L(e.visible?1:2),l(3),C(e.layout.name)}}function yo(i,o){if(i&1){let e=F();p(0,"div",9),G(1,vo,5,5,"div",11,$),p(3,"div",12)(4,"div",13)(5,"label",14),X(),p(6,"svg",15),k(7,"path",16),m(),f(8),h(9,"translate"),m(),Ve(),p(10,"select",17),v("change",function(n){y(e);let r=M(3);return x(r.randomMirrorXSet(n.target.value))}),p(11,"option",18),f(12),h(13,"translate"),m(),p(14,"option",19),f(15),h(16,"translate"),m(),p(17,"option",20),f(18),h(19,"translate"),m()()(),p(20,"div",13)(21,"label",21),X(),p(22,"svg",22),k(23,"path",23),m(),f(24),h(25,"translate"),m(),Ve(),p(26,"select",24),v("change",function(n){y(e);let r=M(3);return x(r.randomMirrorYSet(n.target.value))}),p(27,"option",18),f(28),h(29,"translate"),m(),p(30,"option",19),f(31),h(32,"translate"),m(),p(33,"option",20),f(34),h(35,"translate"),m()()(),p(36,"div")(37,"button",25),v("click",function(){y(e);let n=M(3);return x(n.generateRandomLayouts())})("keydown.enter",function(){y(e);let n=M(3);return x(n.generateRandomLayouts())}),f(38),h(39,"translate"),m()()()()}if(i&2){let e=M(2).$implicit,t=M();l(),N(e.layouts),l(7),U(" ",u(9,15,"MIRROR_X")," "),l(3),b("selected",t.randomMirrorX==="random"),l(),C(u(13,17,"RANDOM_MIRROR")),l(2),b("selected",t.randomMirrorX==="true"),l(),C(u(16,19,"YES")),l(2),b("selected",t.randomMirrorX==="false"),l(),C(u(19,21,"NO")),l(6),U(" ",u(25,23,"MIRROR_Y")," "),l(3),b("selected",t.randomMirrorY==="random"),l(),C(u(29,25,"RANDOM_MIRROR")),l(2),b("selected",t.randomMirrorY==="true"),l(),C(u(32,27,"YES")),l(2),b("selected",t.randomMirrorY==="false"),l(),C(u(35,29,"NO")),l(4),U(" ",u(39,31,"GENERATE")," ")}}function xo(i,o){if(i&1&&k(0,"app-layout-preview",27),i&2){let e=M().$implicit;b("svg",e.layout.previewSVG)("alt",e.layout.name)}}function wo(i,o){if(i&1&&k(0,"div",34),i&2){let e=M().$implicit;q("selected",e.selected)}}function ko(i,o){if(i&1){let e=F();p(0,"div",32)(1,"span",35),h(2,"translate"),f(3),h(4,"duration"),m(),p(5,"a",36),h(6,"translate"),v("click",function(n){y(e);let r=M().$implicit,a=M(4);return x(a.clearBestTimeClick(n,r))}),k(7,"i",37),m()()}if(i&2){let e=M().$implicit;l(),b("title",V(u(2,5,"STATS_BEST"))),l(2),C(u(4,7,e.bestTime)),l(2),b("title",V(u(6,9,"BEST_TIME_CLEAR")))}}function So(i,o){if(i&1){let e=F();p(0,"div",33),h(1,"translate"),p(2,"a",4),v("click",function(n){y(e);let r=M().$implicit,a=M(4);return x(a.removeCustomLayout(n,r))}),k(3,"i",38),m()()}i&2&&b("title",V(u(1,2,"CUSTOM_BOARD_DELETE")))}function Eo(i,o){if(i&1){let e=F();p(0,"div",26),v("keydown.enter",function(){let n=y(e).$implicit,r=M(4);return x(r.onStart(n))})("click",function(){let n=y(e).$implicit,r=M(4);return x(r.onStart(n))})("appDeferLoad",function(){let n=y(e).$implicit;return x(n.visible=!0)}),T(1,xo,1,2,"app-layout-preview",27)(2,wo,1,2,"div",31),T(3,ko,8,11,"div",32),p(4,"div",29),f(5),m(),T(6,So,4,4,"div",33),m()}if(i&2){let e=o.$implicit;q("selected",e.selected),b("id","item-"+e.layout.id),l(),L(e.visible?1:2),l(2),L(e.bestTime?3:-1),l(2),C(e.layout.name),l(),L(e.layout.custom?6:-1)}}function To(i,o){if(i&1&&(p(0,"div",10),G(1,Eo,7,7,"div",11,$),m()),i&2){let e=M(2).$implicit;l(),N(e.layouts)}}function Lo(i,o){if(i&1&&T(0,yo,40,33,"div",9)(1,To,3,0,"div",10),i&2){let e=M().$implicit;L(e.isRandom?0:1)}}function Io(i,o){if(i&1&&(p(0,"div",3),T(1,Po,6,6,"div",5),T(2,Lo,2,1),m()),i&2){let e=o.$implicit,t=o.$index,n=M();b("id",J("group-",t)),l(),L(n.groups.length>1?1:-1),l(),L(e.expanded?2:-1)}}var Qn=(()=>{class i{constructor(){this.layouts=B(),this.startEvent=ue(),this.scrollHost=de.required("scrollHost"),this.groups=[],this.randomMirrorX="random",this.randomMirrorY="random",this.randomGroup={name:"",layouts:[],expanded:!0,isRandom:!0},this.storage=S(we),this.translate=S(xe),this.layoutService=S(me)}ngOnInit(){this.randomMirrorX=this.storage.getLastMirrorX()??"random",this.randomMirrorY=this.storage.getLastMirrorY()??"random",this.buildRandomGroup()}buildRandomGroup(){this.randomGroup.name=this.translate.instant("RANDOM_GROUP");let e=this.translate.instant("RANDOM_LAYOUT");for(let t=0;t<4;t++)this.randomGroup.layouts.push({layout:{id:`${ot}${t}`,name:`${e} ${t+1}`,category:this.randomGroup.name,mapping:[]},visible:!1,selected:!1});this.generateRandomLayouts()}randomMirrorXSet(e){this.randomMirrorX=e,this.storage.setLastMirrorX(e),this.generateRandomLayouts()}randomMirrorYSet(e){this.randomMirrorY=e,this.storage.setLastMirrorY(e),this.generateRandomLayouts()}generateRandomLayout(e){let t=Wn(this.randomMirrorX,this.randomMirrorY,"random");e.layout.previewSVG=this.layoutService.generatePreview(t),e.layout.mapping=t}generateRandomLayouts(){for(let e of this.randomGroup.layouts)setTimeout(()=>{this.generateRandomLayout(e)})}ngOnChanges(e){this.refresh()}refresh(){let e=this.layouts();if(e){this.buildGroups();let t=this.storage.getLastPlayed(),n=this.layoutService.selectBoardID;this.layoutService.selectBoardID=void 0,n&&e.some(r=>r.id===n)&&(t=n),t&&setTimeout(()=>{this.select(t)})}}onStart(e){e?.visible&&this.startEvent.emit(e.layout)}buildGroups(){let e=[],t={},n=this.layouts()??this.layoutService.layouts.items;for(let r of n){t[r.category]||(t[r.category]={name:r.category,layouts:[],expanded:!0},e.push(t[r.category]));let a=this.storage.getScore(r.id)||{};t[r.category].layouts.push({layout:r,playCount:a.playCount,bestTime:a.bestTime,visible:!1})}e.push(this.randomGroup),this.groups=e}scrollToElement(e,t){if(!e||!t)return;let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=n.top-r.top+t.scrollTop;t.scrollTo({top:a,behavior:"auto"})}scrollToGroup(e){let t=document.getElementById(`group-${e}`);t&&this.scrollToElement(t,this.scrollHost().nativeElement)}scrollToItem(e){let t=document.getElementById(`item-${e}`);t&&this.scrollToElement(t,this.scrollHost().nativeElement)}select(e){if(e){for(let t of this.groups)for(let n of t.layouts)n.selected=n.layout.id===e;this.scrollToItem(e)}}clearBestTimeClick(e,t){e.stopPropagation(),confirm(this.translate.instant("BEST_TIME_CLEAR_SURE"))&&(this.storage.clearScore(t.layout.id),t.bestTime=void 0,t.playCount=void 0)}removeCustomLayout(e,t){e.stopPropagation(),confirm(this.translate.instant("CUSTOM_BOARD_DELETE_SURE"))&&(this.layoutService.removeCustomLayout([t.layout.id]),this.refresh())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-layout-list"]],viewQuery:function(t,n){t&1&&ce(n.scrollHost,_o,5),t&2&&ve()},inputs:{layouts:[1,"layouts"]},outputs:{startEvent:"startEvent"},features:[Pe],decls:5,vars:1,consts:[["scrollHost",""],[1,"headline-anchors"],[1,"groups"],[1,"group",3,"id"],[3,"click"],[1,"group-name"],[1,"group-name",3,"click"],[1,"group-expander"],[1,"group-count"],["appDeferLoadScrollHost","",1,"previews","previews-random"],["appDeferLoadScrollHost","",1,"previews"],["tabindex","0",1,"preview",3,"id","selected"],[1,"preview-random"],[1,"random-options"],["for","random-setting-vertical"],["width","20px","height","20px","viewBox","-2 0 20 20"],["id","focus_vertical-[#842]","d","M7,20 L7,0 L9,0 L9,20 Z M0,2 L5,2 L5,4 L2,4 L2,7 L0,7 Z M11,2 L16,2 L16,7 L14,7 L14,4 L11,4 Z M0,18 L0,13 L2,13 L2,16 L5,16 L5,18 Z M16,18 L11,18 L11,16 L14,16 L14,13 L16,13 Z"],["id","random-setting-vertical",3,"change"],["value","random",3,"selected"],["value","true",3,"selected"],["value","false",3,"selected"],["for","random-setting-horizontal"],["width","20px","height","20px","viewBox","0 -2 20 20"],["d","M0,9 L0,7 L20,7 L20,9 Z M2,5 L2,0 L7,0 L7,2 L4,2 L4,5 Z M18,0 L18,5 L16,5 L16,2 L13,2 L13,0 Z M2,16 L2,11 L4,11 L4,14 L7,14 L7,16 Z M18,16 L13,16 L13,14 L16,14 L16,11 L18,11 Z"],["id","random-setting-horizontal",3,"change"],[3,"click","keydown.enter"],["tabindex","0",1,"preview",3,"keydown.enter","click","appDeferLoad","id"],[1,"svg-board",3,"svg","alt"],[1,"preview-placeholder",3,"id","selected"],[1,"preview-name"],[1,"preview-placeholder",3,"id"],[1,"preview-placeholder",3,"selected"],[1,"preview-best-time"],[1,"preview-custom",3,"title"],[1,"preview-placeholder"],[3,"title"],[3,"click","title"],[1,"icon-cancel-squared"],[1,"icon-trash-empty"]],template:function(t,n){t&1&&(T(0,Co,3,0,"div",1),p(1,"div",2,0),G(3,Io,3,4,"div",3,$),m()),t&2&&(L(n.groups.length>1?0:-1),l(3),N(n.groups))},dependencies:[bn,An,Vn,pt,W,Zn],styles:['[_nghost-%COMP%]{display:flex;overflow:hidden;flex-direction:column;flex:1;border:1px solid var(--card-layout-color-border);border-radius:4px}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{border-bottom:1px solid var(--card-layout-color-border);width:100%;display:flex;flex-wrap:wrap;padding-top:2px;padding-bottom:2px;color:var(--dialog-text-color);white-space:nowrap}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;flex:1 1 140px;padding:2px 4px;font-size:.9em;cursor:pointer;text-align:center}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--dialog-headline-color);background-color:var(--dialog-background-color-hover)}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{justify-content:center}}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]{overflow:hidden auto;width:100%;flex:1}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{border-top:1px solid var(--card-layout-color-border);color:var(--main-content-text-color);padding-top:12px;padding-bottom:12px;height:48px;display:flex;justify-content:space-between;align-items:center;text-align:center;cursor:pointer}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]:hover{color:var(--dialog-headline-color);background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander[_ngcontent-%COMP%]{margin-left:20px;min-width:20px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander[_ngcontent-%COMP%]:after{content:"+";color:var(--main-content-text-color-muted);font-size:1.2em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander.expanded[_ngcontent-%COMP%]:after{content:"-"}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-count[_ngcontent-%COMP%]{font-size:.8em;color:var(--main-content-text-color-muted);margin-right:20px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]:first-of-type   .group-name[_ngcontent-%COMP%]{border-top:inherit}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{padding:20px 10px 10px;display:flex;flex-direction:column;gap:10px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;align-items:center;flex-direction:row;font-size:.9em;display:flex}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--main-content-text-color)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-evenly;gap:4px;padding-bottom:12px;box-sizing:border-box}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-top:8px;width:300px;height:200px;cursor:pointer;border:1px solid var(--card-layout-color-border);background-color:var(--card-layout-color-bg);display:block;position:relative;overflow:clip;box-sizing:border-box}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{display:block;width:100%;height:200px;text-align:center;padding-bottom:1.5em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]{position:absolute;right:0;background-color:var(--preview-overlay-background);color:var(--preview-overlay-text);text-shadow:1px 1px var(--preview-overlay-text-shadow);border-bottom-left-radius:3px;padding:3px 3px 3px 6px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;min-width:1.2em;text-align:right;transition:all .1s;margin-top:-1px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.3)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%]{position:absolute;width:100%;height:1.5em;display:block;bottom:0;background-color:var(--card-text-color-bg);color:var(--card-text-color);text-align:center;font-size:.8em;padding:2px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]{top:0;display:flex;flex-direction:row;justify-content:center}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]{bottom:0;padding:2px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus{background-color:var(--card-layout-color-bg-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover   .preview-name[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus   .preview-name[_ngcontent-%COMP%]{background-color:var(--card-text-color-bg-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus   .preview-custom[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]{border:1px solid var(--card-layout-color-border-selected);box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}@media only screen and (max-width:2200px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:200px;height:190px}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:49%}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:96%}}@media only screen and (max-height:500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:120px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%;height:100%}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-1[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-2[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-3[_ngcontent-%COMP%]{display:none}}@supports (display: grid){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{display:grid;gap:4px;padding-right:4px;padding-bottom:12px;align-content:start;grid-template-columns:repeat(6,1fr);place-items:stretch stretch}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr 2fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-top:0;width:100%;max-width:none;min-width:0;box-sizing:border-box;height:200px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%;height:200px}@media only screen and (max-width:2200px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:190px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{height:190px}}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{grid-column:1/-1;flex-direction:row;justify-content:space-around}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-3[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-2[_ngcontent-%COMP%]{display:none}}@media only screen and (max-height:500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:120px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{height:100%}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:1fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr}}}']})}}return i})();function Do(i,o){if(i&1&&(p(0,"option",5),f(1),h(2,"translate"),h(3,"translate"),m()),i&2){let e=o.$implicit,t=M();b("value",e.id)("selected",t.buildMode===e.id),l(),Re("",u(2,4,e.id)," [",u(3,6,e.id+"_DESC"),"]")}}function Bo(i,o){if(i&1&&(f(0),h(1,"translate")),i&2){let e=o.$implicit,t=o.$index,n=o.$count;Re(" ",u(1,2,e.title),"",t!==n-1?", ":""," ")}}function Ao(i,o){if(i&1&&(f(0," ["),G(1,Bo,2,4,null,null,$),f(3,"] ")),i&2){let e=M().$implicit;l(),N(e.features)}}function Vo(i,o){if(i&1&&(p(0,"option",5),f(1),h(2,"translate"),T(3,Ao,4,0),m()),i&2){let e=o.$implicit,t=M();b("value",e.id)("selected",t.gameMode()===e.id),l(),U("",u(2,4,e.id)," "),l(2),L(e.features.length>0?3:-1)}}var Jn=(()=>{class i{constructor(){this.startEvent=ue(),this.gameMode=Ke.required(),this.buildMode=Xe,this.buildModes=gn,this.gameModes=hn,this.layoutService=S(me),this.storage=S(we)}onStart(e){e&&(this.startEvent.emit({layout:e,buildMode:this.buildMode,gameMode:this.gameMode()}),this.storage.storeLastPlayed(e.id))}randomGame(){let e=Math.floor(Math.random()*this.layoutService.layouts.items.length);this.onStart(this.layoutService.layouts.items[e])}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-choose-layout"]],inputs:{gameMode:[1,"gameMode"]},outputs:{startEvent:"startEvent",gameMode:"gameModeChange"},decls:20,vars:10,consts:[[3,"startEvent","layouts"],[1,"choose-buttons"],[1,"generator"],["for","board-generator-select"],["id","board-generator-select",3,"change"],[3,"value","selected"],[1,"mode"],["for","game-mode-select"],["id","game-mode-select",3,"change"],[1,"start-links"],[3,"click"]],template:function(t,n){t&1&&(p(0,"app-layout-list",0),v("startEvent",function(a){return n.onStart(a)}),m(),p(1,"div",1)(2,"div",2)(3,"label",3),f(4),h(5,"translate"),m(),p(6,"select",4),v("change",function(a){return n.buildMode=a.target.value}),G(7,Do,4,8,"option",5,$),m()(),p(9,"div",6)(10,"label",7),f(11),h(12,"translate"),m(),p(13,"select",8),v("change",function(a){return n.gameMode.set(a.target.value)}),G(14,Vo,4,6,"option",5,$),m()(),p(16,"div",9)(17,"button",10),v("click",function(){return n.randomGame()}),f(18),h(19,"translate"),m()()()),t&2&&(b("layouts",n.layoutService.layouts.items),l(4),U("",u(5,4,"BOARD_GENERATOR"),":"),l(3),N(n.buildModes),l(4),U("",u(12,6,"GAME_MODE"),":"),l(3),N(n.gameModes),l(4),C(u(19,8,"START_RANDOM")))},dependencies:[Qn,W],styles:["[_nghost-%COMP%]{padding:0;margin:0;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-flow:row nowrap;align-items:flex-end;gap:8px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{text-align:right;display:inline-block}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:2px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:30%}@media only screen and (max-height:700px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:50%}}@media only screen and (max-height:500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{padding-top:4px}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px}}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:unset}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7em}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:unset}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{display:none}}"]})}}return i})();var Ct=class{constructor(){this.gestureIndicators=[]}hide(o){let e=o;e&&setTimeout(()=>{e.state="hidden",setTimeout(()=>{this.removeIndicator(o)},250)},500)}removeIndicator(o){for(let e=0;e<this.gestureIndicators.length;e++){let t=this.gestureIndicators[e];if(t.x===o.x&&t.y===o.y){this.gestureIndicators.splice(e,1);break}}}setSize(o,e){this.gestureIndicators[o].size=e,this.gestureIndicators[o].top=this.gestureIndicators[o].y-e/2,this.gestureIndicators[o].left=this.gestureIndicators[o].x-e/2}display(o,e,t){if(o>0&&e>0){let n={x:o,y:e,size:t,top:e-t/2,left:o-t/2,state:"hidden"};return this.gestureIndicators.push(n),setTimeout(()=>{n.state="visible"},100),n}}};var ei=(()=>{class i{transform(e,t){return`${t}${e??""}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=_e({name:"prefix",type:i,pure:!0})}}return i})();var Ro=(i,o)=>o.source.z+":"+o.source.x+":"+o.source.y;function Fo(i,o){if(i&1&&(X(),p(0,"title"),f(1),h(2,"translate"),m()),i&2){let e=M().$implicit;l(),C(u(2,1,e.url))}}function Go(i,o){if(i&1){let e=F();X(),p(0,"g",9),v("mouseup",function(n){let r=y(e).$implicit,a=M();return x(a.onClickUp(n,r))})("touchend",function(n){let r=y(e).$implicit,a=M();return x(a.onTouchTileEnd(n,r))}),p(1,"g",10),T(2,Fo,3,3,":svg:title"),k(3,"rect",11)(4,"rect",12)(5,"use",13),h(6,"prefix"),k(7,"use",14),m()()}if(i&2){let e=o.$implicit,t=M();q("selected",e.source.selected)("hidden",e.source.picked)("hinted",e.source.hinted)("wiggle",e.source.effects==null?null:e.source.effects.wiggle),Q("transform",e.pos.translate),l(2),L(e.url?2:-1),l(3),Q("href",Wt(6,15,e.url,t.urlPrefix),null,"xlink")("x",t.imagePos[0])("y",t.imagePos[1])("width",t.imagePos[2])("height",t.imagePos[3])}}function No(i,o){if(i&1&&k(0,"div",15),i&2){let e=o.$implicit;Ye("top",e.top,"px")("left",e.left,"px")("width",e.size,"px")("height",e.size,"px")("transform",e.transform),q("visible",e.state==="visible")}}var ti=1470,ni=960;function Mt(i,o,e){return Math.min(Math.max(o,i),e)}var ii=(()=>{class i{constructor(){this.background=B(),this.imageSet=B(),this.kyodaiUrl=B(),this.stones=B(),this.clickEvent=ue(),this.indicators=new Ct,this.drawStones=[],this.rotate=!1,this.transformSVG="",this.transformStage="",this.viewport=`0 0 ${ti} ${ni}`,this.prefix="",this.urlPrefix="",this.imagePos=[1,1,69,88],this.imageCut=[0,0,65,90],this.scale=1,this.panX=0,this.panY=0,this.bounds=[0,0,ti,ni],this.lastPinch=0,this.touchPoints=[],this.initialDistance=0,this.initialScale=1,this.lastTouchX=0,this.lastTouchY=0,this.initialTouchX=0,this.initialTouchY=0,this.hasTouchPanMoved=!1,this.hasPinchChanged=!1,this.lastMouseX=0,this.lastMouseY=0,this.initialMouseX=0,this.initialMouseY=0,this.isPanning=!1,this.isPinching=!1,this.app=S(pe),this.element=S(Oe)}ngOnInit(){this.resize(window)}ngOnChanges(e){if(e.stones&&this.updateStones(e.stones.currentValue),e.background&&this.updateBackground(e.background.currentValue),e.imageSet){this.prefix=`b_${e.imageSet.currentValue}_`,this.urlPrefix=`#b_${e.imageSet.currentValue}_`;let t=st(e.imageSet.currentValue);this.imagePos=t?[0,0,75,100]:[6,6,63,88],this.imageCut=t?[1,1,73,98]:[0,0,65,90]}}onWheel(e){e.preventDefault();let n=(e.deltaY<0?1:-1)===1?this.scale+.15:this.scale-.15;this.zoomSVGValue(n,e.clientX,e.clientY);let r=this.indicators.display(e.clientX,e.clientY,n*10);this.indicators.hide(r)}onResize(e){let t=e.target;t&&this.resize(t)}onMouseDown(e){this.scale>1&&(e.preventDefault(),this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,this.initialMouseX=e.clientX,this.initialMouseY=e.clientY)}onMouseMove(e){if(this.scale>1){if(!this.isPanning&&this.initialMouseX!==0&&this.initialMouseY!==0){let t=e.clientX-this.initialMouseX,n=e.clientY-this.initialMouseY;Math.hypot(t,n)>=10&&(this.isPanning=!0)}this.isPanning&&(e.preventDefault(),this.updatePanning(e))}}onMouseUp(e){let t=e.type==="mouseleave";if(this.isPanning)e.preventDefault(),this.updatePanning(e);else if(!t){if(this.scale===1)this.clickEvent.emit(void 0);else if(this.initialMouseX!==0&&this.initialMouseY!==0){let n=e.clientX-this.initialMouseX,r=e.clientY-this.initialMouseY;Math.hypot(n,r)<4&&this.clickEvent.emit(void 0)}}this.stopPanning()}onTouchTileEnd(e,t){this.hasPinchChanged||this.hasTouchPanMoved||this.clickEvent.emit(t?.source)}onClickUp(e,t){this.initialMouseX=0,this.initialMouseY=0,this.isPanning?(this.updatePanning(e),this.stopPanning()):(this.clickEvent.emit(t?.source),e.stopPropagation())}onTouchStart(e){e.preventDefault(),this.touchPoints=[],this.hasTouchPanMoved=!1,this.hasPinchChanged=!1;let t=Array.from(e.touches);for(let n of t)this.touchPoints.push({x:n.clientX,y:n.clientY,identifier:n.identifier});if(this.touchPoints.length===1)this.lastTouchX=this.touchPoints[0].x,this.lastTouchY=this.touchPoints[0].y,this.initialTouchX=this.touchPoints[0].x,this.initialTouchY=this.touchPoints[0].y,this.isPanning=!0;else if(this.touchPoints.length===2){this.isPanning=!1,this.isPinching=!0,this.initialDistance=this.getDistance(this.touchPoints[0],this.touchPoints[1]),this.initialScale=this.scale,this.indicators.gestureIndicators=[];let n=(this.touchPoints[0].x+this.touchPoints[1].x)/2,r=(this.touchPoints[0].y+this.touchPoints[1].y)/2;this.indicators.display(n,r,30),this.lastPinch=Date.now()}}onTouchMove(e){e.preventDefault(),this.touchPoints=[];let t=Array.from(e.touches);for(let n of t)this.touchPoints.push({x:n.clientX,y:n.clientY,identifier:n.identifier});if(this.isPinching&&this.touchPoints.length===2){let r=this.getDistance(this.touchPoints[0],this.touchPoints[1])/this.initialDistance,a=(this.touchPoints[0].x+this.touchPoints[1].x)/2,s=(this.touchPoints[0].y+this.touchPoints[1].y)/2;if(this.indicators.gestureIndicators[0]){let d=this.indicators.gestureIndicators[0];d.x=a,d.y=s,d.top=s-d.size/2,d.left=a-d.size/2}else this.indicators.display(a,s,30);let c=Mt(30*r,10,80);this.indicators.setSize(0,c),Math.abs(r-1)>=.1&&(this.hasPinchChanged=!0),this.lastPinch=Date.now()}else if(this.isPanning&&this.touchPoints.length===1&&this.scale>1&&Date.now()-this.lastPinch>600){let n=this.touchPoints[0].x,r=this.touchPoints[0].y,a=n-this.lastTouchX,s=r-this.lastTouchY;if(Math.hypot(n-this.initialTouchX,r-this.initialTouchY)>=10){this.hasTouchPanMoved=!0;let d=this.indicators.display(n,r,10);this.indicators.hide(d)}this.setPanValue(this.panX+a,this.panY+s),this.lastTouchX=n,this.lastTouchY=r}}onTouchEnd(e){if(e.preventDefault(),this.isPinching){let n=this.indicators.gestureIndicators.at(0);n&&this.indicators.hide(n);let r=Array.from(e.touches).map(c=>({x:c.clientX,y:c.clientY,identifier:c.identifier})),a=Array.from(e.changedTouches).map(c=>({x:c.clientX,y:c.clientY,identifier:c.identifier})),s=[];if(r.length>=2?s.push(r[0],r[1]):r.length===1&&a.length>0?s.push(r[0],a[0]):a.length>=2&&s.push(a[0],a[1]),s.length===2){let d=this.getDistance(s[0],s[1])/this.initialDistance,g=this.initialScale;Math.abs(d-1)>=.1&&(g=this.initialScale*d);let _=(s[0].x+s[1].x)/2,P=(s[0].y+s[1].y)/2;this.zoomSVGValue(g,_,P)}this.isPinching=!1,this.lastPinch=Date.now()}else this.isPanning&&(this.updateTransform(),this.isPanning=!1);this.touchPoints=[];let t=Array.from(e.touches);for(let n of t)this.touchPoints.push({x:n.clientX,y:n.clientY,identifier:n.identifier});this.touchPoints.length===0&&(this.hasTouchPanMoved=!1,this.hasPinchChanged=!1,this.initialTouchX=0,this.initialTouchY=0)}updatePanning(e){let t=e.clientX-this.lastMouseX,n=e.clientY-this.lastMouseY,r=this.indicators.display(e.clientX,e.clientY,10);this.indicators.hide(r),this.setPanValue(this.panX+t,this.panY+n),this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,this.updateTransform()}stopPanning(){this.isPanning=!1,this.initialMouseX=0,this.initialMouseY=0}setPanValue(e,t){let n=this.element.nativeElement.offsetWidth||0,r=this.element.nativeElement.offsetHeight||0,a=50,s=Math.max(0,(this.scale-1)*n),c=Math.max(0,(this.scale-1)*r),d=-s-a,g=a,_=-c-a,P=a;this.panX=Mt(e,d,g),this.panY=Mt(t,_,P)}zoomSVGValue(e,t,n){let r=this.scale,a=Mt(e,1,2);if(a!==r){if(a<1.01)this.scale=1,this.panX=0,this.panY=0;else{let s=(t-this.panX)/this.scale,c=(n-this.panY)/this.scale,d=t-s*a,g=n-c*a;this.scale=a,this.setPanValue(d,g)}this.updateTransform()}}updateViewPort(){window.requestAnimationFrame(()=>{this.setViewPort()})}updateTransform(){window.requestAnimationFrame(()=>{this.setTransform()})}setTransform(){let e=this.scale>1?` scale(${this.scale})`:"";if(this.transformSVG=`translate(${this.panX}px, ${this.panY}px)${e}`,this.rotate){let[t,n,r,a]=Et(this.bounds),s=t+r/2,c=n+a/2;this.transformStage=`rotate(90 ${s} ${c})`}else this.transformStage=""}getDistance(e,t){let n=t.x-e.x,r=t.y-e.y;return Math.hypot(n,r)}resize(e){let t=e.innerHeight>e.innerWidth;this.panX=0,this.panY=0,this.scale=1,this.updateTransform(),t!==this.rotate&&(this.rotate=t),this.updateViewPort()}setViewPort(){let[e,t,n,r]=Et(this.bounds);if(this.rotate){let a=e+n/2,s=t+r/2,c=r,d=n;e=a-c/2,t=s-d/2,n=c,r=d}this.viewport=`${e} ${t} ${n} ${r}`}updateStones(e){if(!e)return;this.scale=1,this.panX=0,this.panY=0;let t=e.filter(n=>n!==void 0).map(n=>({z:n.z,x:n.x,y:n.y,v:n.v,visible:!0,url:n.img?.id,pos:Mn(n.z,n.x,n.y),source:n,className:n.effects?.wiggle?"wiggle":void 0}));this.bounds=On(t),this.drawStones=Pn(t),this.setViewPort(),this.setTransform()}webpSupported(){try{let e=document.createElement("canvas");return!e.getContext?.("2d")?!1:e.toDataURL("image/webp").startsWith("data:image/webp")}catch{return!1}}backgroundFormat(){return this.webpSupported()?"webp":"jpg"}updateBackground(e){let t=We.find(n=>n.img===e)?.img;this.backgroundUrl=t?`url("assets/img/${t}.${this.backgroundFormat()}")`:void 0}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-board"]],hostVars:2,hostBindings:function(t,n){t&1&&v("wheel",function(a){return n.onWheel(a)})("resize",function(a){return n.onResize(a)},Yt)("mousedown",function(a){return n.onMouseDown(a)})("mousemove",function(a){return n.onMouseMove(a)})("mouseup",function(a){return n.onMouseUp(a)})("mouseleave",function(a){return n.onMouseUp(a)})("touchstart",function(a){return n.onTouchStart(a)})("touchmove",function(a){return n.onTouchMove(a)})("touchend",function(a){return n.onTouchEnd(a)})("touchcancel",function(a){return n.onTouchEnd(a)}),t&2&&Ye("background-image",n.backgroundUrl)},inputs:{background:[1,"background"],imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],stones:[1,"stones"]},outputs:{clickEvent:"clickEvent"},features:[Pe],decls:14,vars:18,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",1,"board-svg",3,"mouseup"],["id","front","width","300","height","400","viewBox","0 0 300 400"],["transform","translate(28,-614)","d","M -4.7687833,775.07096 C -9.6501835,741.99485 -16.84552,674.23676 -1.2788716,652.0641 18.998297,625.94378 233.50094,631.63117 263.31435,653.90999 276.21398,662.64856 70.349579,663.12124 47.099353,691.74479 24.390958,719.11242 0.65060847,818.18718 -4.7687833,775.07096 Z",2,"fill","#ffffff","fill-opacity","0.3","fill-rule","evenodd","stroke","none","filter","blur(10px)"],["id","mah-image-clip"],["rx","10","ry","10","fill","#fff"],["app-image-set-loader","",3,"imageSet","kyodaiUrl","dark","prefix"],[1,"stage"],[1,"draw",3,"selected","hidden","hinted","wiggle"],[1,"gesture-indicator",3,"top","left","width","height","transform","visible"],[1,"draw",3,"mouseup","touchend"],[1,"tile"],["x","3","y","3","width","75","height","100","rx","10","ry","10",1,"shadow"],["x","0","y","0","width","75","height","100","rx","10","ry","10",1,"stone"],["clip-path","url(#mah-image-clip)"],[0,"xlink","href","#front","x","0","y","0","width","75","height","100",1,"front"],[1,"gesture-indicator"]],template:function(t,n){t&1&&(X(),p(0,"svg",0),v("mouseup",function(a){return n.onMouseUp(a)}),p(1,"defs")(2,"svg",1),k(3,"path",2),m(),p(4,"clipPath",3),k(5,"rect",4),m()(),p(6,"style"),f(7," g.tile { transform-origin: 50px 32.5px; opacity: 1; transition: transform 120ms ease-in-out; } @keyframes mah-wiggle { 0% { transform: rotate(0deg); } 20% { transform: rotate(-3deg); } 40% { transform: rotate(3deg); } 60% { transform: rotate(-1deg); } 80% { transform: rotate(1deg); } 100% { transform: rotate(0deg); } } g.wiggle g.tile { animation: mah-wiggle 250ms ease-in-out; } g.hinted g.tile { transform: scale(1.12); } g.hinted g.tile > rect { stroke: #9f0000; stroke-width: 3px; } @keyframes mah-select-pop { 0% { transform: scale(1); } 60% { transform: scale(1.08); } 100% { transform: scale(1.04); } } g.selected g.tile { transform: scale(1.04); animation: mah-select-pop 140ms ease-out; } g.selected g.tile rect.stone { stroke: black; fill: #F8EABB; } g.selected.hinted g.tile { transform: scale(1.14); animation: none; } g.selected.hinted g.tile rect.stone { stroke: #9f0000; stroke-width: 3px; } g.draw rect.shadow { fill: #191919; opacity: 0.6; stroke-width: 1; stroke: black; } g.draw rect.stone { fill: #FFF9E5; stroke-width: 1; stroke: black; } g.hidden { opacity: 0; } g.stage.contrast g.draw rect.stone { stroke-width: 2; } g.stage.contrast g.draw rect.shadow { opacity: 0.7; } g.stage.dark g.draw rect.shadow { opacity: 0.6; stroke-width: 1; fill: #9d948c; stroke: green; } g.stage.dark g.draw rect.stone { fill: #000; stroke-width: 1; stroke: #9d948c; } g.stage.dark g.selected g.tile rect.stone { stroke: #F8EABB; fill: black; } g.stage.dark g.hinted g.tile rect.stone { stroke: #ef0202; } g.stage.dark g.selected.hinted g.tile rect.stone { stroke: #ef0202; } g.stage.dark.contrast g.draw rect.stone { stroke-width: 2; } g.stage.dark.contrast g.draw rect.shadow { opacity: 0.7; } g.stage.dark .front { display: none; } g.stage.dark .front { display: unset; } @media (prefers-reduced-motion: reduce) { g.tile { transition: none; } g.wiggle g.tile { animation: none; } g.selected g.tile { animation: none; } } "),m(),k(8,"defs",5),p(9,"g",6),G(10,Go,8,18,":svg:g",7,Ro),m()(),G(12,No,1,12,"div",8,$)),t&2&&(Ye("transform",n.transformSVG),q("rotate",n.rotate),Q("viewBox",n.viewport),l(5),Q("x",n.imageCut[0])("y",n.imageCut[1])("width",n.imageCut[2])("height",n.imageCut[3]),l(3),b("imageSet",n.imageSet())("kyodaiUrl",n.kyodaiUrl())("dark",n.app.settings.dark)("prefix",n.prefix),l(),q("dark",n.app.settings.dark)("contrast",n.app.settings.contrast),Q("transform",n.transformStage),l(),N(n.drawStones),l(2),N(n.indicators.gestureIndicators))},dependencies:[ct,ei,W],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;background-repeat:repeat;background-size:cover}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform-origin:0 0 0;transform:translate(0) scale(1);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .gesture-indicator[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;height:50px;width:50px;display:block;border-radius:50%;text-align:center;line-height:45px;z-index:10;background-color:var(--gesture-indicator);transform:scale(0);transition:transform .15s ease-in-out}[_nghost-%COMP%]   .gesture-indicator.visible[_ngcontent-%COMP%]{transform:scale(1.5)}"]})}}return i})();var oi=(()=>{class i{transform(e){return e===Le}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=_e({name:"gameModeEasy",type:i,pure:!0})}}return i})(),ri=(()=>{class i{transform(e){return e===Le||e===mn}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=_e({name:"gameModeStandard",type:i,pure:!0})}}return i})();var jo=["info"],Ho=["settings"],$o=["help"],Uo=["newgame"];function zo(i,o){if(i&1){let e=F();p(0,"button",23),h(1,"translate"),v("click",function(){y(e);let n=M();return x(n.enterFullScreen())}),k(2,"i",38),m()}i&2&&b("title",V(u(1,2,"FULLSCREEN")))}function Yo(i,o){i&1&&k(0,"app-help")}function Ko(i,o){i&1&&k(0,"app-tiles-info")}function Xo(i,o){i&1&&k(0,"app-settings")}function qo(i,o){if(i&1){let e=F();p(0,"app-choose-layout",39),v("startEvent",function(n){y(e);let r=M();return x(r.startGame(n))}),m()}if(i&2){let e=M();b("gameMode",e.game.mode)}}function Wo(i,o){if(i&1&&(p(0,"div"),f(1),h(2,"translate"),m()),i&2){let e=M(2);l(),C(u(2,1,e.game.message.messageID))}}function Zo(i,o){if(i&1&&(p(0,"div"),f(1),h(2,"duration"),m()),i&2){let e=M(2);l(),C(u(2,1,e.game.message.playTime))}}function Qo(i,o){if(i&1){let e=F();p(0,"div",41)(1,"button",42),v("click",function(n){y(e);let r=M(2);return x(r.onShuffleContinue(n))}),k(2,"i",13),p(3,"span",11),f(4),h(5,"translate"),m()(),p(6,"button",43),v("click",function(n){y(e);let r=M(2);return x(r.onSurrenderGame(n))}),k(7,"i",16),p(8,"span",11),f(9),h(10,"translate"),m()()()}i&2&&(l(4),C(u(5,2,"SHUFFLE")),l(5),C(u(10,4,"RESTART")))}function Jo(i,o){if(i&1){let e=F();p(0,"div",40),v("click",function(){y(e);let n=M();return x(n.clickMessage())}),T(1,Wo,3,3,"div"),T(2,Zo,3,3,"div"),T(3,Qo,11,6,"div",41),m()}if(i&2){let e=M();l(),L(e.game.message.messageID?1:-1),l(),L(e.game.message.playTime?2:-1),l(),L(e.game.message.askShuffle?3:-1)}}var ai=(()=>{class i{constructor(){this.info=de.required("info"),this.settings=de.required("settings"),this.help=de.required("help"),this.newgame=de.required("newgame"),this.app=S(pe),this.fullScreenEnabled=!0,this.title="",this.workerService=S(Je),this.game=this.app.game,this.fullScreenEnabled=this.canFullscreen(),this.title=`${this.app.name} v${Z.version}`}showNewGame(){this.newgame().visible.set(!0)}handleKeyDownEventKey(e){switch(e){case"h":{this.help().toggle();break}case"i":{this.info().toggle();break}case"s":{this.settings().toggle();break}case"t":{this.game.hint();break}case"m":{this.game.shuffle();break}case"g":{this.debugSolve();break}case"u":{this.game.back();break}case"n":{this.game.pause(),this.newgame().toggle();break}case" ":case"space":case"Space":case"spacebar":case"Spacebar":case"p":{this.game.isRunning()?this.game.pause():this.game.isPaused()&&this.game.resume();break}default:return!1}return!0}handleKeyDownDialogExit(){let e=this.help();if(e.visible())return e.toggle(),!0;let t=this.newgame();if(t.visible())return t.toggle(),!0;let n=this.info();if(n.visible())return n.toggle(),!0;let r=this.settings();return r.visible()?(r.toggle(),!0):!1}handleKeyDownEvent(e){e.key==="Escape"&&this.handleKeyDownDialogExit()||(e.target?.nodeName??"").toLocaleLowerCase()==="input"||this.handleKeyDownEventKey(e.key)&&e.preventDefault()}stoneClick(e){this.game.click(e)}isFullscreenEnabled(){let e=window.document;if(typeof e.fullscreenEnabled=="boolean")return e.fullscreenEnabled;let t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen)}canFullscreen(){return Z.mobile?!1:this.isFullscreenEnabled()}isFullscreen(){let e=window.document;return!!(e.fullscreenElement||e.webkitIsFullScreen||e.mozFullScreen)}exitFullscreen(){let e=window.document;e.exitFullscreen?e.exitFullscreen().catch(t=>{console.error(t)}):e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}requestFullscreen(){let e=document.body;e.requestFullscreen?e.requestFullscreen().catch(t=>{console.error(t)}):e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()}enterFullScreen(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}newGame(){this.game.pause(),this.showNewGame()}startGame(e){this.newgame().visible.set(!1),this.game.reset(),this.game.start(e.layout,e.buildMode,e.gameMode)}toggleDialogState(e){e?this.app.game.isPaused()||this.app.game.pause():(this.app.settings.save(),this.app.game.isPaused()&&this.app.game.resume())}clickMessage(){if(this.game.isPaused()){if(this.game.message?.askShuffle)return;this.game.resume()}else this.game.reset(),this.showNewGame()}onShuffleContinue(e){e.stopPropagation(),this.game.gameOverEasyModeShuffle()}onSurrenderGame(e){e.stopPropagation(),this.game.surrender(),this.showNewGame()}debugSolve(){if(Z.production)return;let e=(t,n)=>{let r=n[t],a=n[t+1];if(!r||!a)return;let s=this.game.board.stones.filter(c=>c.z===r[0]&&c.x===r[1]&&c.y===r[2]||c.z===a[0]&&c.x===a[1]&&c.y===a[2]);if(s.length>1){for(let c of s)c.selected=!0;setTimeout(()=>{this.game.board.pick(s[0],s[1]),e(t+2,n)},300)}};this.workerService.solveGame(this.game.board.stones.filter(t=>!t.picked).map(t=>t.toPosition()),t=>{e(0,t.order)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-game-component"]],viewQuery:function(t,n){t&1&&(ce(n.info,jo,5),ce(n.settings,Ho,5),ce(n.help,$o,5),ce(n.newgame,Uo,5)),t&2&&ve(4)},hostBindings:function(t,n){t&1&&v("keydown",function(a){return n.handleKeyDownEvent(a)},$e)},decls:90,vars:100,consts:[["help",""],["info",""],["settings",""],["newgame",""],[1,"controls","controls-top"],[1,"ctrl","ctrl-name"],[1,"button",3,"click","title"],[1,"icon-logo"],[1,"name"],[1,"ctrl","ctrl-game"],[1,"icon-pause"],[1,"label"],[1,"button","feature",3,"click","title"],[1,"icon-spin1"],[1,"icon-undo"],[1,"icon-lightbulb"],[1,"icon-loop"],[1,"board",3,"clickEvent","stones","imageSet","kyodaiUrl","background"],[1,"controls","controls-bottom"],[1,"ctrl","ctrl-stats"],["title","Menu","aria-haspopup","true",1,"button","menu-button"],[1,"icon-menu"],["role","menu",1,"menu"],["role","menuitem",1,"button",3,"click","title"],[1,"icon-cog"],[1,"icon-volume-low"],[1,"icon-calendar"],["role","menuitem",1,"button",3,"title"],[1,"ctrl","ctrl-time"],[1,"label","text"],[1,"time"],["className","overlay-help",3,"clickEvent","title"],["className","overlay-info",3,"clickEvent","title"],["className","overlay-settings",3,"clickEvent","title"],["className","overlay-newgame",3,"clickEvent","title"],[1,"choose",3,"gameMode"],["className","overlay-message",3,"clickEvent","visible","noCloseButton"],[1,"overlay-message-message"],[1,"icon-resize-full-alt"],[1,"choose",3,"startEvent","gameMode"],[1,"overlay-message-message",3,"click"],[1,"overlay-message-actions"],[1,"button","feature",3,"click"],[1,"button",3,"click"]],template:function(t,n){if(t&1){let r=F();p(0,"div",4)(1,"div",5)(2,"button",6),h(3,"translate"),v("click",function(){y(r);let s=ye(74);return x(s.toggle())}),k(4,"i",7),p(5,"span",8),f(6),m()()(),p(7,"div",9)(8,"button",6),h(9,"translate"),v("click",function(){return y(r),x(n.game.toggle())}),k(10,"i",10),p(11,"span",11),f(12),h(13,"translate"),m()(),p(14,"button",12),h(15,"gameModeEasy"),h(16,"translate"),v("click",function(){return y(r),x(n.game.shuffle())}),k(17,"i",13),p(18,"span",11),f(19),h(20,"translate"),m()(),p(21,"button",12),h(22,"gameModeStandard"),h(23,"translate"),v("click",function(){return y(r),x(n.game.back())}),k(24,"i",14),p(25,"span",11),f(26),h(27,"translate"),m()(),p(28,"button",12),h(29,"gameModeStandard"),h(30,"translate"),v("click",function(){return y(r),x(n.game.hint())}),k(31,"i",15),p(32,"span",11),f(33),h(34,"translate"),m()(),p(35,"button",6),h(36,"translate"),v("click",function(){return y(r),x(n.newGame())}),k(37,"i",16),p(38,"span",11),f(39),h(40,"translate"),m()()()(),p(41,"app-board",17),v("clickEvent",function(s){return y(r),x(n.stoneClick(s))}),m(),p(42,"div",18)(43,"div",19)(44,"button",20),k(45,"i",21),m(),p(46,"div",22)(47,"button",23),h(48,"translate"),v("click",function(){y(r);let s=ye(81);return x(s.toggle())}),k(49,"i",24),m(),p(50,"button",23),h(51,"translate"),v("click",function(){return y(r),x(n.app.toggleSound())}),k(52,"i",25),m(),p(53,"button",23),h(54,"translate"),v("click",function(){y(r);let s=ye(77);return x(s.toggle())}),k(55,"i",26),m(),T(56,zo,3,4,"button",27),m()(),p(57,"div",28)(58,"span",29)(59,"small"),f(60),h(61,"translate"),m(),p(62,"span"),f(63),m()(),p(64,"span",29)(65,"small"),f(66),h(67,"translate"),m(),p(68,"span"),f(69),m()(),p(70,"span",30),f(71),h(72,"duration"),m()()(),p(73,"app-dialog",31,0),v("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(75,Yo,1,0,"app-help"),m(),p(76,"app-dialog",32,1),h(78,"translate"),v("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(79,Ko,1,0,"app-tiles-info"),m(),p(80,"app-dialog",33,2),h(82,"translate"),v("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(83,Xo,1,0,"app-settings"),m(),p(84,"app-dialog",34,3),h(86,"translate"),v("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(87,qo,1,1,"app-choose-layout",35),m(),p(88,"app-dialog",36),v("clickEvent",function(){return y(r),x(n.clickMessage())}),T(89,Jo,4,3,"div",37),m()}if(t&2){let r=ye(74),a=ye(77),s=ye(81),c=ye(85);l(2),b("title",V(u(3,54,"OPEN_HELP"))),l(4),C(n.app.name),l(2),b("title",V(u(9,56,"PAUSE_LONG"))),l(4),C(u(13,58,"PAUSE")),l(2),q("enabled",u(15,60,n.game.mode)),b("title",V(u(16,62,"SHUFFLE_LONG"))),l(5),C(u(20,64,"SHUFFLE")),l(2),q("enabled",u(22,66,n.game.mode)),b("title",V(u(23,68,"UNDO_LONG"))),Q("disabled",n.game.board.undo.length===0?!0:null),l(5),C(u(27,70,"UNDO")),l(2),q("enabled",u(29,72,n.game.mode)),b("title",V(u(30,74,"HINT_LONG"))),l(5),C(u(34,76,"HINT")),l(2),b("title",V(u(36,78,"RESTART_LONG"))),l(4),C(u(40,80,"RESTART")),l(2),b("stones",n.game.board.stones)("imageSet",n.app.settings.tileset)("kyodaiUrl",n.app.settings.kyodaiUrl)("background",n.app.settings.background),l(6),b("title",V(u(48,82,"OPEN_SETTINGS"))),l(3),q("inactive",!n.app.settings.sounds),b("title",V(u(51,84,"AUDIO_SOUNDS"))),l(3),b("title",V(u(54,86,"TILES_INFO"))),l(3),L(n.fullScreenEnabled?56:-1),l(4),U("",u(61,88,"STONES"),":"),l(3),C(n.game.board.count),l(3),U("",u(67,90,"FREE"),":"),l(3),C(n.game.board.free.length),l(2),C(u(72,92,n.game.clock.elapsed)),l(2),b("title",n.title),l(2),L(r.visible()?75:-1),l(),b("title",u(78,94,"TILES")),l(3),L(a.visible()?79:-1),l(),b("title",u(82,96,"SETTINGS")),l(3),L(s.visible()?83:-1),l(),b("title",u(86,98,"SELECT_BOARD")),l(3),L(c.visible()?87:-1),l(),b("visible",!!n.game.message)("noCloseButton",!0),l(),L(n.game.message?89:-1)}},dependencies:[ii,wn,Dn,Bn,Jn,xn,pt,ri,oi,W],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;width:100%;height:100%;background-color:var(--main-bg-color)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{min-width:170px;display:flex;justify-content:space-between;padding-left:12px;padding-right:12px}@media only screen and (min-width:3000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:4em}}@media only screen and (max-width:2200px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.6em}}@media only screen and (max-width:1900px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.3em}}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.2em}}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .feature.enabled[_ngcontent-%COMP%]{display:unset}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{color:var(--main-text-color);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding:.3em .9em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;color:var(--main-text-color);padding:.3em .9em;border-radius:10px;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease,transform .05s ease}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] + .label[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--main-text-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[disabled][_ngcontent-%COMP%]{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:6px;border-radius:10px;font-family:Kulim Park,Tahoma,sans-serif;color:var(--main-text-color);padding:.3em .9em;cursor:pointer;border:1px solid transparent;background-clip:padding-box;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease,transform .05s ease;background-color:transparent;font-size:inherit}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-image:linear-gradient(to bottom,color-mix(in oklab,var(--main-bg-color-lt) 35%,transparent),color-mix(in oklab,var(--main-bg-color) 90%,transparent));border:1px solid color-mix(in oklab,var(--main-bg-color-lt) 70%,transparent);background-color:color-mix(in oklab,var(--main-bg-color) 78%,transparent);color:var(--main-text-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:inset 0 1px 1px #00000026,0 0 #0000}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 2px var(--main-bg-color),0 0 0 4px var(--main-bg-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed;pointer-events:none;filter:saturate(.75)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]{font-weight:600;cursor:pointer}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]   .icon-logo[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]:hover{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]{cursor:default;gap:24px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-variant-numeric:lining-nums}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-family:Kulim Park,Tahoma,sans-serif;min-width:98px;display:inline-block;text-align:center;font-variant-numeric:slashed-zero tabular-nums}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]{cursor:default}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:none;width:2.2em;height:2.2em;padding:0;border-radius:999px;justify-content:center;align-items:center}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05em}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]{border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]{border-top:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .board[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;overflow:hidden}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:1.2em;padding:.3em}[_nghost-%COMP%]   .time[_ngcontent-%COMP%]{padding:.3em}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:1.1em}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{min-width:unset}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:1em}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.9em}}@media only screen and (max-width:350px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   span.name[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:280px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{gap:2px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none;position:absolute;bottom:100%;right:0;background:var(--dialog-background-color);border:1px solid var(--dialog-border-color);border-radius:8px;flex-direction:column;z-index:10;gap:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:0;margin-left:0;width:2.2em;height:2.2em;border-radius:8px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]:hover   .menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]:focus-within   .menu[_ngcontent-%COMP%]{display:flex}}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]{flex-direction:row;position:relative;padding-left:calc(52px + env(safe-area-inset-left));padding-right:calc(52px + env(safe-area-inset-right))}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl-name[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl-name[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]{flex-direction:column;min-width:unset;max-width:52px;height:calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));position:absolute;left:env(safe-area-inset-left);border-bottom:unset}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]{flex-direction:column;min-width:98px;max-width:98px;height:calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));position:absolute;right:env(safe-area-inset-right);align-items:flex-end;border-top:unset}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{align-items:flex-end}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding-right:.3em;min-width:unset}}@media only screen and (width>=400px)and (height<=260px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:.1em}}"]})}}return i})();var er=["gameComponent"],tr=["editorPlaceholder"];function nr(i,o){if(i&1&&k(0,"app-game-component",3,1),i&2){let e=M();ge("theme-"+e.app.settings.theme),b("hidden",e.loading)}}function ir(i,o){}var si=(()=>{class i{constructor(){this.gameComponent=de.required("gameComponent"),this.editorPlaceholder=de.required("editorPlaceholder",{read:Ot}),this.app=S(pe),this.loading=!0,this.editorVisible=!1,this.layoutService=S(me),this.meta=S(an),this.updateName(),this.registerWindowListeners()}ngOnInit(){this.init().catch(e=>{console.error(e)})}handleKeyDownEvent(e){(e.target?.nodeName??"").toLocaleLowerCase()!=="input"&&Z.editor&&e.key==="e"&&(this.toggleEditor(),e.preventDefault())}loadEditor(){Z.editor&&import("./chunk-22QNUBUB.js").then(({EditorComponent:e})=>{let t=this.editorPlaceholder().createComponent(e);this.editorSubscription=t.instance.closeEvent.subscribe(()=>{this.toggleEditor()})}).catch(e=>{console.error(e)})}toggleEditor(){Z.editor&&(this.editorVisible=!this.editorVisible,this.editorVisible?(this.app.game.pause(),this.loadEditor()):(this.editorSubscription&&(this.editorSubscription.unsubscribe(),this.editorSubscription=void 0),this.editorPlaceholder().clear()))}init(){return he(this,null,function*(){yield this.layoutService.get(),this.loading=!1;let e=new URLSearchParams(window.location.search),t=yield this.checkImport(e.get("mah"));this.layoutService.selectBoardID=t[0]||e.get("board"),window.location.search&&this.clearSearchParameters(),(this.app.game.isIdle()||this.layoutService.selectBoardID)&&this.gameComponent().showNewGame()})}clearSearchParameters(){try{window.history.replaceState(null,"",window.location.pathname)}catch(e){console.error(e)}}checkImport(e){return he(this,null,function*(){if(!e)return[];try{let t=[],n=JSON.parse(atob(e)),r=[];for(let a of n.boards){let s=this.layoutService.expandLayout(a,!0);t.push(s.id),!this.layoutService.layouts.items.some(c=>c.id===s.id)&&!r.some(c=>c.id===s.id)&&r.push(me.layout2loadLayout(s,a.map))}return r.length>0&&this.layoutService.storeCustomBoards(r),t}catch(t){return console.error(t),[]}})}registerWindowListeners(){window.addEventListener("beforeunload",()=>{this.app.game.isRunning()&&this.app.game.pause()},!1),window.addEventListener("blur",()=>{this.app.game.isRunning()&&this.app.game.pause()},!1)}updateName(){let e=this.meta.getTag("name=application-name");this.app.name=e?e.content:this.app.name}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-root"]],viewQuery:function(t,n){t&1&&(ce(n.gameComponent,er,5),ce(n.editorPlaceholder,tr,5,Ot)),t&2&&ve(2)},hostBindings:function(t,n){t&1&&v("keydown",function(a){return n.handleKeyDownEvent(a)},$e)},decls:3,vars:1,consts:[["editorPlaceholder",""],["gameComponent",""],[3,"hidden","class"],[3,"hidden"]],template:function(t,n){t&1&&(T(0,nr,2,3,"app-game-component",2),Kt(1,ir,0,0,"ng-template",null,0,Zt)),t&2&&L(n.editorVisible?-1:0)},dependencies:[ai],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}"]})}}return i})();var Vt=new Ht("TRANSLATE_HTTP_LOADER_CONFIG"),or=(()=>{class i{http;config;constructor(){this.config=Rt({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},S(Vt)),this.http=this.config.useHttpBackend?new Te(S(bt)):S(Te)}getTranslation(e){let t=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${e}${this.config.suffix}${t}`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=Me({token:i,factory:i.\u0275fac})}return i})();function li(i={}){let o=i.useHttpBackend??!1;return[{provide:Vt,useValue:i},{provide:sn,useClass:or,deps:[o?bt:Te,Vt]}]}Z.production&&void 0;tn(si,{providers:[Qt(),$t(nn,Jt,...Z.modules),ln({loader:li({prefix:"./assets/i18n/",suffix:".json"}),fallbackLang:"en"}),pe,me,Je,Ae,lt,on(rn())]}).catch(console.error);
