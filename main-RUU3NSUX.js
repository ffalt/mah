import{$ as ye,$a as St,A as qe,Aa as xe,B as Ce,Ba as sn,C as Wt,Ca as ln,D as Ee,Da as cn,E as Z,Ea as dn,F as T,Fa as we,G as L,Ga as Q,Ha as pn,I as U,Ia as gn,J as R,Ja as mn,K as F,Ka as hn,L as M,La as Ze,M as p,Ma as un,N as m,Na as Qe,O as S,P as I,Pa as ae,Q as D,Qa as Le,R as re,Ra as _n,S as $,Sa as wt,T as Ke,Ta as fn,U as b,Ua as kt,V as ce,Va as Fe,W as C,Wa as Cn,X as Zt,Xa as Je,Y as Qt,Ya as Mn,Z as ve,Za as et,_ as be,_a as Te,a as jt,aa as Xe,ab as Pn,b as le,ba as X,bb as Et,c as Gt,ca as me,cb as Tt,d as Nt,da as f,db as On,e as Ht,ea as O,eb as tt,f as Ut,fa as z,fb as ke,g as ue,ga as Re,gb as Lt,h as zt,ha as j,i as k,ia as W,j as Yt,k as y,kb as vn,l as x,la as u,lb as bn,m as q,ma as _,mb as It,n as Ve,na as Jt,o as bt,oa as en,ob as yn,p as Oe,pa as fe,pb as he,q as _e,qa as B,qb as nt,r as qt,ra as pe,rb as xn,s as Kt,sa as We,t as ze,ta as tn,tb as wn,u as Xt,v as Ye,va as nn,wa as on,x as l,xa as rn,y as yt,ya as an,z as H,za as xt}from"./chunk-LXTL5GTP.js";var Ie={APP_VERSION:"1.15.1",APP_NAME:"Mah",APP_FEATURE_EDITOR:!0,APP_FEATURE_KYODAI:!0,APP_FEATURE_MOBILE:!1};var J={production:!0,version:Ie.APP_VERSION,name:Ie.APP_NAME,mobile:Ie.APP_FEATURE_MOBILE,editor:Ie.APP_FEATURE_EDITOR,kyodai:Ie.APP_FEATURE_KYODAI,modules:[],openExternal:void 0};var it=class{constructor(){this.free=[],this.stones=[],this.count=0,this.hints={groups:[],current:void 0},this.selected=void 0,this.undo=[]}clearSelection(){this.selected&&(this.selected.selected=!1),this.selected=void 0}setStoneSelected(o){this.clearSelection(),o&&(o.selected=!0,this.selected=o)}clearHints(){if(this.hints.current)for(let o of this.hints.current.stones)o.hinted=!1;this.hints={groups:[],current:void 0}}hint(){if(this.hintNext()||(this.clearHints(),this.free.length===0))return;let o=this.collectHints();if(this.selected){let t=this.selected.groupNr;o.sort((n,r)=>n.group===t?-1:r.group===t?1:0)}let e=o[0];this.hints={groups:o,current:e};for(let t of e.stones)t.hinted=!0}reset(){this.clearSelection(),this.clearHints(),this.free=[],this.count=0,this.stones=[],this.undo=[]}canRemove(o){return o.group.some(e=>!e.picked&&!e.isBlocked())}update(){let o=[],e=0;for(let t of this.stones)t.state={blocked:!t.picked&&t.isBlocked(),removable:!1},e+=t.picked?0:1;for(let t of this.stones)t.state.removable=!t.picked&&!t.state.blocked&&this.canRemove(t),t.state.removable&&o.push(t);this.free=o,this.count=e}back(){if(this.undo.length<2)return;this.clearSelection(),this.clearHints();let o=this.undo.pop(),e=this.undo.pop();if(!(!o||!e)){for(let t of this.stones)(t.z===o[0]&&t.x===o[1]&&t.y===o[2]||t.z===e[0]&&t.x===e[1]&&t.y===e[2])&&(t.picked=!1);this.update()}}shuffle(){this.clearSelection(),this.clearHints();let o=[],e=new tt(this.stones.length);for(let a of this.stones)a.picked||o.push([a.z,a.x,a.y]);let n=new Qe(e).build(Ze,o);if(!n)return;let r=e.list.filter(a=>!n.some(s=>s.v===a.v));for(let a of this.undo){let s=r.shift();if(s){let c=new gn(a[0],a[1],a[2],s.v,s.groupNr);c.picked=!0,n.push(c)}}hn.fillStones(n,e),this.stones=n,this.update()}load(o,e){if(!o)return;this.undo=e;let n=new Qe(new tt(o.length+e.length)).load(o);if(n){for(let r of e){let a=mn(n,r[0],r[1],r[2]);a&&(a.picked=!0)}this.stones=n,this.update()}}save(){return this.stones.map(o=>[o.z,o.x,o.y,o.v])}applyMapping(o,e){let t=new Qe(new tt(o.length));this.stones=t.build(e,o)||[]}pick(o,e){this.clearSelection(),this.undo.push([o.z,o.x,o.y],[e.z,e.x,e.y]),this.clearHints(),o.picked=!0,e.picked=!0,this.update()}countUnblocked(){return this.stones.filter(o=>!o.picked&&!o.isBlocked()).length}hintNext(){if(!this.hints.current)return!1;for(let e of this.hints.current.stones)e.hinted=!1;let o=this.hints.groups.indexOf(this.hints.current);if(o>=0&&(o++,o>=this.hints.groups.length&&(o=0),o<this.hints.groups.length)){this.hints.current=this.hints.groups[o];for(let e of this.hints.current.stones)e.hinted=!0;return!0}return!1}collectHints(){let o={};for(let e of this.free){let t=e.groupNr.toString();o[t]=o[t]||[],o[t].push(e)}return Object.keys(o).map(e=>({group:o[e][0].groupNr,stones:o[e]}))}};var ot=class{constructor(){this.elapsed=0,this.lastTime=0,this.timer=void 0}start(){this.timer||(this.elapsed=this.elapsed||0)}reset(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0),this.lastTime=0,this.elapsed=0}run(){this.timer||(this.lastTime=Date.now(),this.timer=window.setTimeout(()=>{this.step()},1e3))}pause(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0,this.elapsed+=Date.now()-this.lastTime)}step(){let o=Date.now();this.elapsed+=o-this.lastTime,this.lastTime=o,this.timer=window.setTimeout(()=>{this.step()},1e3)}};var De={NOPE:"invalid",SELECT:"select",MATCH:"match",OVER:"over"},rt=class{constructor(){this.enabled=!0,this.audioplayers={}}play(o){if(this.enabled){if(!this.audioplayers[o]){let e=new Audio;e.src=`assets/sounds/${o}.ogg`,e.load(),this.audioplayers[o]=e}this.audioplayers[o].play().catch(e=>{console.error(e)})}}pause(o){this.audioplayers[o]&&this.audioplayers[o].pause()}};var at=class{constructor(){this.enabled=!1}play(){}pause(){}toggle(){}toggleMusic(){}};var st="random-";var lt=class{constructor(o){this.storage=o,this.clock=new ot,this.board=new it,this.sound=new rt,this.music=new at,this.state=ae.idle,this.layoutID=void 0,this.mode=kt,this.saveTimer=void 0}init(){this.load(),this.board.update(),this.state===ae.run&&this.pause(),this.message={messageID:this.isPaused()?"MSG_CONTINUE_SAVE":"MSG_START"}}click(o){return o?!this.isRunning()||o.state.blocked?(this.sound.play(De.NOPE),this.wiggleStone(o),!0):(this.clock.elapsed===0&&this.clock.run(),this.board.selected&&o&&o!==this.board.selected&&o.groupNr===this.board.selected.groupNr?(this.resolveMatchingStone(o),!0):(this.board.setStoneSelected(this.board.selected===o?void 0:o),this.sound.play(De.SELECT),!0)):(this.board.clearSelection(),!1)}wiggleStone(o){o&&(o.effects=o.effects||{},o.effects.wiggle=!0,setTimeout(()=>{o.effects&&(o.effects.wiggle=!1)},300))}isRunning(){return this.state===ae.run}isPaused(){return this.state===ae.pause}isIdle(){return this.state===ae.idle}resume(){this.run(),this.clock.run(),this.music.play()}run(){this.board.clearHints(),this.board.update(),this.setState(ae.run)}toggle(){this.state===ae.run?this.pause():this.state===ae.pause&&this.resume()}pause(){this.clock.pause(),this.setState(ae.pause,"MSG_CONTINUE_PAUSE"),this.save(),this.music.pause()}reset(){this.clock.reset(),this.setState(ae.idle),this.board.reset()}start(o,e,t){this.layoutID=o.id,this.mode=t,this.board.applyMapping(o.mapping,e),this.board.update(),this.run()}hint(){this.mode!==wt&&this.board.hint()}shuffle(){this.mode===Le&&this.board.shuffle()}back(){this.mode!==wt&&this.isRunning()&&this.board.back()}load(){try{let o=this.storage.getState();if(o?.stones)return this.clock.elapsed=o.elapsed??0,this.layoutID=o.layout,this.mode=o.gameMode??kt,this.state=o.state??ae.idle,this.board.load(o.stones,o.undo??[]),!0}catch(o){console.error("load state failed",o)}return!1}save(){if(this.layoutID)try{this.storage.storeState({elapsed:this.clock.elapsed,state:this.state,layout:this.layoutID,gameMode:this.mode,undo:this.board.undo,stones:this.board.save()})}catch(o){console.error("storing state failed",o)}}isStorableLayoutId(){return this.layoutID!==void 0&&!this.layoutID.startsWith(st)}storeLostGame(){if(this.isStorableLayoutId()){let o=this.layoutID??"unknown",e=this.storage.getScore(o)??{};e.playCount=(e.playCount??0)+1,this.storage.storeScore(o,e)}}gameOverLosing(){this.storeLostGame(),this.gameOver("MSG_FAIL")}gameOverEasyModeShuffle(){for(let o=0;o<10;o++)if(this.shuffle(),this.board.free.length>0){this.resume();return}this.gameOverEasyMode()}surrender(){this.storeLostGame(),this.sound.play(De.OVER),this.setState(ae.idle),this.clock.reset()}checkGameState(){if(this.board.count<2)this.gameOverWinning();else if(this.board.free.length===0){if(this.mode===Le&&this.board.countUnblocked()>1)return this.gameOverEasyMode(),!1;this.gameOverLosing()}else return this.sound.play(De.MATCH),this.delayedSave(),!0;return!1}gameOverWinning(){let o=this.clock.elapsed;if(!this.isStorableLayoutId()){this.gameOver("MSG_GOOD",o);return}let e=this.layoutID??"unknown",t=this.storage.getScore(e)??{};t.playCount=(t.playCount??0)+1,!t.bestTime||t.bestTime>o?(t.bestTime=o,this.gameOver("MSG_BEST",o)):this.gameOver("MSG_GOOD",o),this.storage.storeScore(e,t)}delayedSave(){clearTimeout(this.saveTimer),this.saveTimer=setTimeout(()=>{this.save()},300)}gameOverEasyMode(){this.clock.pause(),this.message={messageID:"MSG_FAIL",askShuffle:!0},this.state=ae.pause,this.delayedSave(),this.music.pause()}resolveMatchingStone(o){let e=this.board.selected;e&&(this.board.pick(e,o),this.checkGameState())}gameOver(o,e){this.sound.play(De.OVER),this.setState(ae.idle,o,e),this.clock.reset(),this.delayedSave()}setState(o,e,t){this.message=e?{messageID:e,playTime:t}:void 0,this.state=o}};var $e={en:{title:"English"},de:{title:"Deutsch"},nl:{title:"Nederlands"},pt:{title:"Portugu\xEAs"},ru:{title:"\u0440\u0443\u0441\u0441\u043A\u0438\u0439"},es:{title:"Espa\xF1ol"},eu:{title:"Euskara"},jp:{title:"\u65E5\u672C\u8A9E"},fr:{title:"Fran\xE7ais"},zh:{title:"\u4E2D\u6587"}};var ct=class{constructor(o){this.storageProvider=o,this.lang=Et,this.sounds=!0,this.tileset=Te,this.music=!1,this.contrast=!1,this.dark=!1,this.background="",this.theme=St,this.stats={games:0,bestTime:0}}load(){try{let o=this.storageProvider.getSettings();return o&&(this.lang=o.lang??Et,this.tileset=o.tileset??Te,this.background=o.background??this.background,this.pattern=o.pattern,this.theme=o.theme??St,this.contrast=o.contrast??!1,this.dark=o.dark??!1,this.sounds=o.sounds??this.sounds,this.music=o.music??this.music,this.kyodaiUrl=o.kyodaiUrl),!0}catch(o){console.error("load settings failed",o)}return!1}save(){try{return this.storageProvider.storeSettings({lang:this.lang,sounds:this.sounds,music:this.music,contrast:this.contrast,dark:this.dark,background:this.background,pattern:this.pattern,theme:this.theme,tileset:this.tileset,kyodaiUrl:this.kyodaiUrl}),!0}catch(o){console.error("storing settings failed",o)}return!1}};var ge=(()=>{class i{constructor(){this.name="Mah Jong",this.cache={},this.storage=k(ke),this.translate=k(we),this.game=new lt(this.storage),this.settings=new ct(this.storage),this.settings.load(),this.setLang(),this.game.init(),this.game.sound.enabled=this.settings.sounds,this.game.music.enabled=this.settings.music}getCachedValue(e){return this.cache[e]}cacheValue(e,t){if(t===void 0){delete this.cache[e];return}this.cache[e]=t}setLang(){let e=!this.settings.lang||this.settings.lang===Pn?(navigator.language.split("-")[0]||"en").toLowerCase():this.settings.lang;Object.keys($e).includes(e)?this.translate.use(e):this.translate.use("en")}toggleSound(){this.settings.sounds=!this.settings.sounds,this.game.sound.enabled=this.settings.sounds,this.settings.save()}toggleMusic(){this.settings.music=!this.settings.music,this.game.music.enabled=this.settings.music,this.game.music.toggle(),this.settings.save()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=ue({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var fi=["*"];function Ci(i,o){if(i&1&&(I(0,"h1"),re(1,"i",5),f(2),D()),i&2){let e=C(2);l(2),O(e.title())}}function Mi(i,o){if(i&1){let e=$();I(0,"a",6),u(1,"translate"),ce("click",function(){y(e);let n=C(2);return x(n.toggle())}),re(2,"i",7),D()}i&2&&Ke("title",j(_(1,2,"CLOSE")))}function Pi(i,o){if(i&1){let e=$();I(0,"div",1),ce("click",function(){y(e);let n=C();return x(n.toggle())}),I(1,"div",2),ce("click",function(n){return y(e),x(n.stopPropagation())}),I(2,"div",3),T(3,Ci,3,1,"h1"),T(4,Mi,3,4,"a",4),D(),Qt(5),D()()}if(i&2){let e=C();me(W("overlay ",e.className())),l(3),L(e.title()?3:-1),l(),L(e.noCloseButton()?-1:4)}}var Sn=(()=>{class i{constructor(){this.title=B(),this.className=B(),this.visible=We(!1),this.noCloseButton=B(!1),this.clickEvent=fe()}toggle(){this.visible.set(!this.visible()),this.clickEvent.emit(this.visible())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-dialog"]],inputs:{title:[1,"title"],className:[1,"className"],visible:[1,"visible"],noCloseButton:[1,"noCloseButton"]},outputs:{visible:"visibleChange",clickEvent:"clickEvent"},ngContentSelectors:fi,decls:1,vars:1,consts:[[3,"class"],[3,"click"],[1,"overlay-popup",3,"click"],[1,"dialog-header"],["role","button",1,"close",3,"title"],[1,"icon-logo"],["role","button",1,"close",3,"click","title"],[1,"icon-cancel-circled2"]],template:function(t,n){t&1&&(Zt(),T(0,Pi,6,5,"div",0)),t&2&&L(n.visible()?0:-1)},dependencies:[Q],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;color:var(--main-content-text-color)}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:var(--dialog-headline-color);margin-top:-8px;margin-bottom:10px;line-height:1.3em}@media only screen and (max-width:700px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em}}@media only screen and (max-width:400px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1em}}"]})}}return i})();function Be(i){if(J.openExternal){i.preventDefault();try{let o=i.target;for(;o&&!(o instanceof HTMLAnchorElement);)o=o.parentElement;if(o&&o instanceof HTMLAnchorElement){let e=o.getAttribute("href")??"";J.openExternal(e)}}catch(o){console.error(o)}}}function Oi(i,o){if(i&1&&(I(0,"li")(1,"div")(2,"span",14),f(3),D(),re(4,"i"),I(5,"span",4),f(6),u(7,"translate"),D()(),I(8,"span",15),f(9),u(10,"translate"),D()()),i&2){let e=o.$implicit;l(3),O(e.key),l(),me(e.icon),l(2),O(_(7,5,e.name)),l(3),O(_(10,7,e.name+"_LONG"))}}var En=(()=>{class i{constructor(){this.shortcuts=[{icon:"icon-lightbulb",key:"T",name:"HINT"},{icon:"icon-spin1",key:"M",name:"SHUFFLE"},{icon:"icon-undo",key:"U",name:"UNDO"},{icon:"icon-loop",key:"N",name:"RESTART"},{icon:"icon-pause",key:"P",name:"PAUSE"},{icon:"icon-calendar",key:"I",name:"INFO"},{icon:"icon-cog",key:"S",name:"SETTINGS"},{icon:"icon-logo",key:"H",name:"HELP"}],this.clickExternalHref=Be}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-help"]],decls:77,vars:45,consts:[[1,"top"],[1,"help"],[1,"license"],[1,"license-list"],[1,"name"],[1,"info"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/tree/main/src/assets/svg/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/assets/sounds/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/fonts/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/assets/img/README.md",3,"click"],["rel","noopener","target","_blank","href","https://github.com/ffalt/mah/blob/main/src/assets/patterns/README.md",3,"click"],[1,"keyboard"],[1,"keyboard-list"],[1,"key"],[1,"func"]],template:function(t,n){t&1&&(I(0,"div",0)(1,"fieldset",1)(2,"legend"),f(3),u(4,"translate"),D(),I(5,"p"),f(6),u(7,"translate"),D(),I(8,"p")(9,"b"),f(10),u(11,"translate"),D(),f(12),u(13,"translate"),D(),I(14,"p")(15,"b"),f(16),u(17,"translate"),D(),f(18),u(19,"translate"),D(),I(20,"p"),f(21),u(22,"translate"),D()(),I(23,"fieldset",2)(24,"legend"),f(25),u(26,"translate"),D(),I(27,"div",3)(28,"div")(29,"div",4),f(30),u(31,"translate"),D(),I(32,"div",5)(33,"a",6),ce("click",function(a){return n.clickExternalHref(a)}),f(34,"MIT"),D()()(),I(35,"div")(36,"div",4),f(37),u(38,"translate"),D(),I(39,"div",5)(40,"a",7),ce("click",function(a){return n.clickExternalHref(a)}),f(41,"Free | Public Domain | CCA4.0 | GNU"),D()()(),I(42,"div")(43,"div",4),f(44),u(45,"translate"),D(),I(46,"div",5)(47,"a",8),ce("click",function(a){return n.clickExternalHref(a)}),f(48,"CC0 | CC-BY3.0"),D()()(),I(49,"div")(50,"div",4),f(51),u(52,"translate"),D(),I(53,"div",5)(54,"a",9),ce("click",function(a){return n.clickExternalHref(a)}),f(55,"SIL"),D()()(),I(56,"div")(57,"div",4),f(58),u(59,"translate"),D(),I(60,"div",5)(61,"a",10),ce("click",function(a){return n.clickExternalHref(a)}),f(62,"Public Domain"),D()()(),I(63,"div")(64,"div",4),f(65),u(66,"translate"),D(),I(67,"div",5)(68,"a",11),ce("click",function(a){return n.clickExternalHref(a)}),f(69,"MIT"),D()()()()()(),I(70,"fieldset",12)(71,"legend"),f(72),u(73,"translate"),D(),I(74,"ul",13),R(75,Oi,11,9,"li",null,U),D()()),t&2&&(l(3),O(_(4,15,"HOW_TO_PLAY")),l(3),O(_(7,17,"HOW_GOAL")),l(4),O(_(11,19,"HOW_OPEN")),l(2),z(": ",_(13,21,"HOW_OPEN_DESC")),l(4),O(_(17,23,"HOW_PAIR")),l(2),z(": ",_(19,25,"HOW_PAIR_DESC")),l(3),O(_(22,27,"HOW_DO")),l(4),O(_(26,29,"LICENSE")),l(5),O(_(31,31,"GAME")),l(7),O(_(38,33,"DESIGNS")),l(7),O(_(45,35,"SOUNDS")),l(7),O(_(52,37,"FONTS")),l(7),O(_(59,39,"BACKGROUNDS")),l(7),O(_(66,41,"PATTERN_SETTINGS")),l(7),O(_(73,43,"SHORTCUTS")),l(3),F(n.shortcuts))},dependencies:[Q],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;flex:1;overflow:hidden auto;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:1px solid var(--main-bg-color-lt);border-radius:8px;padding:8px 12px 12px;flex:1}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding:0 6px;font-weight:700}[_nghost-%COMP%]   .top[_ngcontent-%COMP%]{flex:1;padding-right:6px;display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   .help[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:4px}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .license-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{min-width:40%;max-width:40%}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]{padding:0;list-style:none;columns:2}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{break-inside:avoid;margin-bottom:14px}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .func[_ngcontent-%COMP%]{margin-top:8px;font-size:.8em;display:block}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], [_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:8px;vertical-align:middle;color:var(--main-content-text-color)}[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase;padding-left:4px;padding-right:4px;border:2px solid #ddd;border-radius:6px;min-height:20px;min-width:28px;font-size:.7em;vertical-align:top;display:inline-block;letter-spacing:1px;background:#000;color:#ddd;box-shadow:0 5px #000;text-align:center}@media only screen and (max-width:700px){[_nghost-%COMP%]   .keyboard[_ngcontent-%COMP%]   .keyboard-list[_ngcontent-%COMP%]{columns:1}}@media only screen and (max-width:1000px){[_nghost-%COMP%]{flex-flow:column nowrap}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .top[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .top[_ngcontent-%COMP%]{flex-flow:column nowrap}[_nghost-%COMP%]   .help[_ngcontent-%COMP%], [_nghost-%COMP%]   .license[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .license-list[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex-wrap:wrap;margin-bottom:8px}[_nghost-%COMP%]   .license[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{min-width:100%;max-width:100%}}"]})}}return i})();function dt(i){return["kyodai","kyodai-black"].includes(i)}var Ln=[{name:"Traditional",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191758/https://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/79546_orig.jpg"},{name:"Cards",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/4962942_orig.jpg"},{name:"Board Games",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/3862268_orig.jpg"},{name:"Motorcycles",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8438984_orig.jpg"},{name:"NHL",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/630927_orig.jpg"},{name:"Social Media",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/241535_orig.jpg"},{name:"Monopoly",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191753im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9084861_orig.jpg"},{name:"Horror Films",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/849930_orig.jpg"},{name:"Animated Movies",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2303366_orig.jpg"},{name:"Stephen King",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/4168429_orig.jpg"},{name:"Lord of the Rings",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/3966297_orig.jpg"},{name:"007",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9617288_orig.jpg"},{name:"Disney Princess",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191738im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2281343_orig.jpg"},{name:"Religions",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191748im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2620625_orig.jpg"},{name:"Happy Eastern",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/1396173_orig.jpg"},{name:"Halloween",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8455923_orig.jpg"},{name:"Neck Ties",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9349600_orig.jpg"},{name:"Floral",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/3178635_orig.jpg"},{name:"Easter Eggs",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8685131_orig.jpg"},{name:"St. Patricks Day",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/7310933_orig.jpg"},{name:"Valentine's Day",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/1140822_orig.jpg"},{name:"Christmas",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191728im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/1525811_orig.jpg"},{name:"Canada Flower & Birds",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2953105_orig.jpg"},{name:"Canada Scenery",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/8401335_orig.jpg"},{name:"Nova Scotia",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2933195_orig.jpg"},{name:"Canada Birds",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170903191743im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/9756515_orig.jpg"},{name:"Arabic Alphabet & Numbers",author:"My Kyodai Mahjongg",source:"https://web.archive.org/web/20170902065732im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/5652995_orig.jpg"},{name:"Mahjongg Platinum 2 Dark",author:"Pavel Osharin",source:"https://web.archive.org/web/20170903191723im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2479283_orig.jpg"},{name:"Mahjongg Platinum 2 Red",author:"Pavel Osharin",source:"https://web.archive.org/web/20170903191723im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/2090721_orig.jpg"},{name:"Mahjongg Titans",author:"Microsoft Vista",source:"https://web.archive.org/web/20170903191723im_/http://kyodaimahjongg.weebly.com/uploads/9/5/2/9/9529146/6604294_orig.jpg"},{name:"Viking Artifacts 1",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/VikingArtifacts.jpg"},{name:"Viking Artifacts 2",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/VikingArtifacts2.jpg"},{name:"Art of the Scythians",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/ScythianArt.jpg"},{name:"Waite-Rider Tarot",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/WaiteRiderTarot.jpg"},{name:"Waite-Rider Tarot Images",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725im_/http://www.vikinganswerlady.com/kyodai/WaiteRiderTarotImagesThumbnail.jpg"},{name:"Morgan-Greer Tarot",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/MorganGreerTarot.jpg"},{name:"Xena: Tarot of the Bitter Suite",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/BitterSuite.jpg"},{name:"A Rainbow of Bearded Irises",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/RainbowIris.jpg"},{name:"Antique Roses",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/AntiqueRoses.jpg"},{name:"Flags of the World",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725im_/http://www.vikinganswerlady.com/kyodai/FlagsThumbnail.jpg"},{name:"X-Men",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/XMen.jpg"},{name:"Age of Empires II: Age of Kings",author:"vikinganswerlady",source:"https://web.archive.org/web/20030919052725/http://www.vikinganswerlady.com/kyodai/AOEII.jpg"}];function vi(i){return le(this,null,function*(){return new Promise((o,e)=>{let t=new Image;t.addEventListener("load",()=>{o(t)}),t.addEventListener("error",n=>{console.error(n),e(new Error(`Image ${i} could not be loaded.`))}),t.src=i})})}function Tn(i,o,e,t){let n="";for(let[r,a]of i.entries()){let s=r*e;for(let[c,d]of a.entries()){let g=c*t;n+=`<svg preserveAspectRatio="xMidYMid slice" id="${d}" width="75" height="100" viewBox="${g} ${s} ${t} ${e}"><use xlink:href="#${o}"></use></svg>`}}return n}function In(i){return le(this,null,function*(){if(!i)return"<svg><defs></defs></svg>";let o=(d,g)=>[...Array.from({length:g}).keys()].map(h=>h+d),e=[o(1,9).map(d=>`do${d}`),o(1,9).map(d=>`ba${d}`),o(1,9).map(d=>`ch${d}`),["se_winter","se_spring","se_summer","se_fall","wi_north","wi_south","wi_east","wi_west"],["fl_bamboo","fl_plum","fl_orchid","fl_chrysanthemum","dr_green","dr_white","dr_red"]].map(d=>d.map(g=>`t_${g}`)),t=[o(1,9).map(d=>`g${d}`),o(10,9).map(d=>`g${d}`),o(1,9).map(d=>`e${d}`)].map(d=>d.map(g=>`t_${g}`)),n=yield vi(i),r=n.height/5,a=n.width/9,s=Lt(i),c=Lt("kyodai-extra");return`<svg><defs>
<image id="${s}" xlink:href="${i}" x="0" y="0" height="${n.height}" width="${n.width}"/>
<image id="${c}" xlink:href="/assets/svg/kyodai-extra.png" x="0" y="0" height="300" width="675"/>
${Tn(e,s,r,a)}
${Tn(t,c,100,75)}
</defs></svg>
`})}var pt=(()=>{class i{constructor(){this.http=k(xe),this.cache={}}get(e,t){return le(this,null,function*(){if(dt(e))return In(t);let n=this.cache[e];if(n){if(n.data)return n.data;if(n.request!==void 0)return n.request}n={};let r=new Promise((a,s)=>{setTimeout(()=>{this.http.get(`assets/svg/${e}.svg`,{responseType:"text"}).subscribe({next:c=>{n.data=c,n.request=void 0,a(c)},error:c=>{s(c)}})})});return n.request=r,this.cache[e]=n,r})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=ue({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Dn='<svg id="mah-error-icon" width="60" height="60" shape-rendering="geometricPrecision" text-rendering="geometricPrecision"image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="10 0 560 431.15"><g fill-rule="nonzero"><path fill="#D92D27" d="M492.56 431.15H19.42v-.05c-14.72.03-24.33-16.08-16.78-29.12L234.51 9.64c7.35-12.57 25.75-13.05 33.42-.23l240.41 390.96c9.12 12.64.2 30.78-15.78 30.78z"/><path fill="#fff" d="M41.15 399.63h431.88L252.71 47.08c-.63-.99-1.38-.98-1.97 0L40.02 397.9c-.63 1.12-.31 1.74 1.13 1.73z"/><path d="M243.18 246.58h25.46v20.32h-25.46v-20.32zm-78.9 102.8h-17.43v7.87h21.35v12.7h-38.78v-54.47h38.35l-2.18 12.69h-18.74v8.58h17.43v12.63zm58.16 20.57h-19.16l-7.15-16.21h-5v16.21h-16.18v-54.47h27.45c12.49 0 18.74 6.36 18.74 19.08 0 8.72-2.7 14.47-8.11 17.26l9.41 18.13zm-31.31-41.78v12.15h5.26c2.09 0 3.62-.23 4.57-.66.95-.43 1.44-1.44 1.44-3v-4.82c0-1.57-.49-2.58-1.44-3.01-.95-.43-2.49-.66-4.57-.66h-5.26zm84.25 41.78h-19.17l-7.15-16.21h-4.99v16.21h-16.18v-54.47h27.45c12.49 0 18.74 6.36 18.74 19.08 0 8.72-2.7 14.47-8.11 17.26l9.41 18.13zm-31.31-41.78v12.15h5.25c2.1 0 3.63-.23 4.58-.66.95-.43 1.44-1.44 1.44-3v-4.82c0-1.57-.49-2.58-1.44-3.01-.95-.43-2.5-.66-4.58-.66h-5.25zm34.14 14.59c0-9.94 1.86-17.18 5.58-21.74 3.71-4.57 10.43-6.85 20.13-6.85s16.41 2.28 20.13 6.85c3.72 4.56 5.58 11.8 5.58 21.74 0 4.94-.4 9.09-1.18 12.46-.78 3.37-2.14 6.3-4.05 8.8-1.92 2.5-4.57 4.33-7.93 5.49-3.37 1.16-7.551.74-12.55 1.74-4.99 0-9.18-.58-12.55-1.74-3.37-1.16-6.01-2.99-7.93-5.49s-3.27-5.43-4.05-8.8c-.79-3.37-1.18-7.52-1.18-12.46zm18.74-9.07v22.66h7.23c2.38 0 4.11-.27 5.19-.831.07-.55 1.61-1.81 1.61-3.79v-22.66h-7.33c-2.32 0-4.02.28-5.09.83-1.07.55-1.61 1.81-1.61 3.79zm85.62 36.26H363.4l-7.15-16.21h-4.99v16.21h-16.18v-54.47h27.44c12.5 0 18.756.36 18.75 19.08 0 8.72-2.71 14.47-8.11 17.26l9.41 18.13zm-31.31-41.78v12.15h5.25c2.1 0 3.63-.23 4.58-.66.95-.43 1.43-1.44 1.43-3v-4.82c0-1.57-.48-2.58-1.43-3.01-.95-.43-2.5-.66-4.58-.66h-5.25zm-82.62-93h-25.46c-1.82-22.29-4.73-26.26-5.95-40.78-1.25-14.61-2.12-35.58 18.73-35.58 21.86 0 20.1 23.36 18.45 38.47-1.37 12.45-4.05 17.16-5.77 37.89z"/></g></svg>',Bn='<svg id="mah-tile-spinner" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g><rect x="11" y="1" width="2" height="5" opacity=".14"/><rect x="11" y="1" width="2" height="5" transform="rotate(30 12 12)" opacity=".29"/><rect x="11" y="1" width="2" height="5" transform="rotate(60 12 12)" opacity=".43"/><rect x="11" y="1" width="2" height="5" transform="rotate(90 12 12)" opacity=".57"/><rect x="11" y="1" width="2" height="5" transform="rotate(120 12 12)" opacity=".71"/><rect x="11" y="1" width="2" height="5" transform="rotate(150 12 12)" opacity=".86"/><rect x="11" y="1" width="2" height="5" transform="rotate(180 12 12)"/><animateTransform attributeName="transform" type="rotate" calcMode="discrete" dur="0.75s" values="0 12 12;30 12 12;60 12 12;90 12 12;120 12 12;150 12 12;180 12 12;210 12 12;240 12 12;270 12 12;300 12 12;330 12 12;360 12 12" repeatCount="indefinite"/></g></svg>';var bi=["app-image-set-loader",""],gt=(()=>{class i{constructor(){this.imageSet=B(),this.kyodaiUrl=B(),this.prefix=B(),this.dark=B(!1),this.elementRef=k(_e),this.svgDef=k(pt)}ngOnChanges(e){this.getImageSet()}setLoading(){let e=[Bn];for(let t of Tt)for(let n of t)e.push(`<svg id="${n}" width="75" height="100"><use xlink:href="#mah-tile-spinner" transform="translate(26,42)"></use></svg>`);this.setImageSet(`<svg><defs>${e.join("")}</defs></svg>`)}prepareDefs(e){let t=e.indexOf("<defs>"),n=e.lastIndexOf("</defs>");return(t!==-1&&n!==-1&&n>t+6?e.slice(t+6,n):"").replace(/xlink:href="\./g,'xlink:href="assets/svg').replace(/ id="t_/g,` id="${this.prefix()}t_`)}setError(){let e=[Dn];for(let t of Tt)for(let n of t)e.push(`<svg id="${n}" width="75" height="100"><use xlink:href="#mah-error-icon" transform="translate(8,18)"></use></svg>`);this.setImageSet(`<svg><defs>${e.join("")}</defs></svg>`)}setImageSet(e){this.elementRef.nativeElement.innerHTML="";let t=this.prepareDefs(e);setTimeout(()=>{this.elementRef.nativeElement.innerHTML=t},0)}loadImageSet(){let e=this.imageSet()+(this.dark()?"-black":"");this.svgDef.get(e,this.kyodaiUrl()).then(t=>{this.setImageSet(t)}).catch(t=>{this.setError(),console.error(t)})}getImageSet(){this.imageSet()&&(this.setLoading(),setTimeout(()=>this.loadImageSet(),0))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["","app-image-set-loader",""]],inputs:{imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],prefix:[1,"prefix"],dark:[1,"dark"]},features:[Oe],attrs:bi,decls:1,vars:0,template:function(t,n){t&1&&(q(),re(0,"defs"))},encapsulation:2})}}return i})();var An=(()=>{class i{constructor(){this.imageSet=B(),this.kyodaiUrl=B(),this.tile=B.required(),this.index=B(),this.isDark=B(!1)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-tile"]],inputs:{imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],tile:[1,"tile"],index:[1,"index"],isDark:[1,"isDark"]},decls:6,vars:10,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 75 100","preserveAspectRatio","xMidYMid meet"],["app-image-set-loader","",3,"imageSet","kyodaiUrl","dark","prefix"],["x","6","y","6","width","63","height","88"]],template:function(t,n){t&1&&(q(),p(0,"svg",0),S(1,"defs",1),p(2,"title"),f(3),u(4,"translate"),m(),S(5,"use",2),m()),t&2&&(X("dark",n.isDark()),l(),M("imageSet",n.imageSet())("kyodaiUrl",n.kyodaiUrl())("dark",n.isDark())("prefix","t_"+n.imageSet()+"_"+n.index()+"_"),l(2),O(_(4,8,n.tile())),l(2),Z("href","#t_"+n.imageSet()+"_"+n.index()+"_"+n.tile(),null,"xlink"))},dependencies:[gt,Q],styles:["[_nghost-%COMP%]{display:block;width:75px;height:100px;margin:0 auto}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:100%;width:auto;background-color:var(--tile-color);border:1px solid var(--tile-color-border)}[_nghost-%COMP%] > svg.dark[_ngcontent-%COMP%]{background-color:var(--tile-color-dark);border:1px solid var(--tile-color-border-dark)}"]})}}return i})();function yi(i,o){i&1&&(q(),re(0,"path",3))}function xi(i,o){i&1&&(q(),re(0,"path",4))}function wi(i,o){i&1&&(q(),re(0,"path",5))}function ki(i,o){i&1&&(q(),re(0,"path",6))}function Si(i,o){i&1&&(q(),re(0,"path",7))}function Ei(i,o){i&1&&(q(),re(0,"path",8))}var mt=(()=>{class i{constructor(){this.link=B.required(),this.licenseKey=B.required(),this.licenses=Mn,this.clickExternalHref=Be}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-license-link"]],inputs:{link:[1,"link"],licenseKey:[1,"licenseKey"]},decls:9,vars:3,consts:[["target","_blank","rel","noopener",3,"click","href","title"],["xmlns","http://www.w3.org/2000/svg",0,"xml","space","preserve","fill-rule","evenodd","stroke-linecap","round","clip-rule","evenodd","viewBox","0 0 1067 1067"],["fill","#fff","fill-rule","nonzero","stroke","#000","stroke-width","62.55","d","M1034.158 535.104c0 276.808-224.169 501.207-500.698 501.207-276.535 0-500.703-224.398-500.703-501.207S256.926 33.897 533.46 33.897c276.535 0 500.694 224.398 500.694 501.207h.005Z"],["fill-rule","nonzero","d","m463.156 546.582 68.977 28.564q-6.95 39.752-21.892 66.412t-37.095 40.228q-22.152 13.568-56.381 13.568-41.526 0-67.848-16.544-26.322-16.543-45.435-58.2-19.112-41.657-19.112-106.641 0-86.646 33.62-133.182t95.126-46.536q48.127 0 75.667 26.66t40.917 81.885l-69.499 21.185q-3.649-15.948-7.645-23.328-6.603-12.378-16.158-19.043t-21.371-6.665q-26.757 0-41.004 29.517-10.773 21.9-10.772 68.793 0 58.082 12.857 79.623 12.858 21.543 36.139 21.542 22.587 0 34.141-17.377t16.767-50.464Zm276.778 0 68.977 28.564q-6.95 39.752-21.892 66.412t-37.095 40.228-56.381 13.568q-41.526 0-67.848-16.544-26.322-16.543-45.435-58.2-19.112-41.657-19.112-106.641 0-86.646 33.62-133.182t95.126-46.536q48.127 0 75.667 26.66t40.917 81.885l-69.499 21.185q-3.649-15.948-7.645-23.328-6.603-12.378-16.158-19.043t-21.371-6.665q-26.757 0-41.004 29.517-10.773 21.9-10.772 68.793 0 58.082 12.857 79.623 12.858 21.543 36.139 21.542 22.587 0 34.141-17.377t16.767-50.464Z"],["fill-rule","nonzero","d","M288.297 575.269v-72.601H409.92v148.773q-34.923 32.611-61.767 44.394t-63.678 11.783q-45.348 0-73.929-21.185t-44.305-63.08q-15.724-41.894-15.724-96.167 0-57.13 17.201-99.38 17.2-42.251 50.387-64.151 25.889-16.9 69.672-16.901 42.22 0 63.157 10.474t34.749 32.492 20.763 55.82l-75.927 18.567q-4.691-19.756-15.898-30.231-11.207-10.474-28.581-10.474-25.889 0-41.265 24.637t-15.377 77.957q0 56.653 15.55 80.933t43.35 24.28q13.205 0 25.193-5.237t27.452-17.853V575.27zM456.31 352.704h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089v129.492H456.31zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm178.264-148.773h78.707v263.031h122.839v85.931H713.629z"],["fill-rule","nonzero","d","M156.426 390.204h151.806v58.494h-90.135v47.538h76.987v54.965h-76.987v111.231h-61.671zm185.691 272.228V390.205H444.45q28.464 0 43.509 6.685t24.262 24.79 9.217 44.102q0 22.655-7.048 39.089-7.049 16.434-19.382 26.647-7.862 6.5-21.551 10.77 10.978 5.013 15.994 10.027 3.389 3.342 9.827 14.298t8.607 16.898l29.683 78.92h-69.397L435.37 579.24q-6.235-16.155-11.114-20.983-6.642-6.314-15.045-6.314h-5.422v110.488zm61.671-161.925h25.888q4.202 0 16.265-3.714 6.1-1.67 9.962-8.542 3.863-6.87 3.863-15.784 0-13.184-6.099-20.241-6.1-7.056-22.906-7.056h-26.973zm153.296-110.303H721.63v58.122H618.619v43.267h95.556v55.522h-95.556v53.666h105.993v61.65H557.084zm200.465 0h164.546v58.122H819.084v43.267h95.556v55.522h-95.556v53.666h105.993v61.65H757.549z"],["fill-rule","nonzero","d","M309.898 348.538h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm177.916-148.773H697.7q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85-7.993-11.426-30.058-11.426h-22.413v77.838Z"],["fill-rule","nonzero","d","M309.898 348.538h130.831q42.741 0 64.026 27.85t21.284 79.266q0 52.844-23.195 82.599t-70.802 29.755h-43.089V697.5h-79.055zm79.055 148.773h19.286q22.76 0 31.969-10.831t9.209-27.731q0-16.425-7.992-27.85t-30.058-11.426h-22.413v77.838Zm179.306-148.773h116.932q34.575 0 55.86 12.854t35.184 36.896 20.155 55.939 6.255 67.603q0 55.938-9.295 86.765t-25.801 51.654-35.444 27.731q-25.888 9.521-46.912 9.521H568.261V348.539Zm78.707 79.028v190.668h19.286q24.672 0 35.097-7.498t16.332-26.184 5.907-60.58q0-55.462-13.205-75.934-13.205-20.47-43.784-20.471h-19.633Z"],["fill-rule","nonzero","transform","scale(4.5) translate(30 90)","d","M0 .003h25.679l9.912 38.43L45.46.003h25.59v63.16H55.109V14.997L42.746 63.163H28.311L15.987 14.997v48.166H0zM84.28.003h19.56v63.168H84.28zM113.408.003h59.329V15.6H152.83v47.563h-19.516V15.6h-19.906z"]],template:function(t,n){if(t&1&&(I(0,"a",0),ce("click",function(a){return n.clickExternalHref(a)}),q(),I(1,"svg",1),re(2,"path",2),T(3,yi,1,0,":svg:path",3)(4,xi,1,0,":svg:path",4)(5,wi,1,0,":svg:path",5)(6,ki,1,0,":svg:path",6)(7,Si,1,0,":svg:path",7)(8,Ei,1,0,":svg:path",8),D()()),t&2){let r;Ke("href",n.link(),ze)("title",n.licenses[n.licenseKey()]||"?"),l(3),L((r=n.licenseKey())==="cca"?3:r==="gpl"?4:r==="free"?5:r==="per"?6:r==="pub"?7:r==="mit"?8:-1)}},styles:["[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;object-fit:contain;vertical-align:middle}[_nghost-%COMP%]   a[_ngcontent-%COMP%]{margin-left:3px;line-height:30px;font-size:.8em}"]})}}return i})();function Ti(i,o){if(i&1&&(p(0,"div",14)(1,"div"),S(2,"app-tile",15),m(),S(3,"div",16),u(4,"translate"),m()),i&2){let e=o.$implicit,t=o.$index,n=C(3);l(2),M("tile",e)("imageSet",n.tileset)("kyodaiUrl",n.kyodaiUrl)("index",t)("isDark",n.isDark),l(),M("innerHTML",_(4,6,e),Kt)}}function Li(i,o){if(i&1&&(p(0,"div")(1,"div",13),f(2),u(3,"translate"),m(),p(4,"div"),R(5,Ti,5,8,"div",14,U),m()()),i&2){let e=o.$implicit;me(W("tiles-section tiles-section-",e.tiles.length)),l(2),O(_(3,7,e.name)),l(2),me(W("tiles-set tiles-set-",e.tiles.length)),l(),F(e.tiles)}}function Ii(i,o){if(i&1&&R(0,Li,7,9,"div",12,U),i&2){let e=o.$implicit;F(e.groups)}}function Di(i,o){if(i&1&&S(0,"app-license-link",4),i&2){let e=C();M("link",W("https://github.com/ffalt/mah/blob/main/src/assets/svg/README.md#",e.selectedSet.id,"svg"))("licenseKey",e.selectedSet.license)}}function Bi(i,o){if(i&1&&(p(0,"option",6),f(1),m()),i&2){let e=o.$implicit,t=C();M("value",e.id)("selected",t.tileset===e.id),l(),O(e.name)}}function Ai(i,o){if(i&1&&(p(0,"option",7),f(1),u(2,"translate"),m()),i&2){let e=C();M("selected",e.tileset==="kyodai"),l(),O(_(2,2,"KYODAI_TILESET"))}}var Vn=(()=>{class i{get selectedSet(){return this.sets.find(e=>e.id===this.tileset)}applyTileset(){this.app.settings.tileset=this.tileset,this.app.settings.dark=this.isDark,this.app.settings.save()}constructor(){this.TILES_INFOS=On,this.sets=et,this.tileset=Te,this.isDark=!1,this.canKyodai=J.kyodai,this.app=k(ge),this.clickExternalHref=Be,this.tileset=this.app.settings.tileset,this.isDark=this.app.settings.dark,this.kyodaiUrl=this.app.settings.kyodaiUrl}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-tiles-info"]],decls:23,vars:17,consts:[[1,"tiles-content"],[1,"tiles-footer"],[1,"tiles-form"],[1,"tiles-select"],[3,"link","licenseKey"],[3,"change"],[3,"value","selected"],["value","kyodai",3,"selected"],["type","checkbox",3,"change","checked"],["type","button",3,"click","disabled"],[1,"tiles-reference"],["rel","noopener","target","_blank",3,"click","href"],[3,"class"],[1,"tiles-title"],[1,"tile"],[3,"tile","imageSet","kyodaiUrl","index","isDark"],[3,"innerHTML"]],template:function(t,n){t&1&&(p(0,"div",0),R(1,Ii,2,0,null,null,U),m(),p(3,"div",1)(4,"form",2)(5,"div",3),T(6,Di,1,3,"app-license-link",4),p(7,"select",5),b("change",function(a){return n.tileset=a.target.value}),R(8,Bi,2,3,"option",6,U),T(10,Ai,3,4,"option",7),m()(),p(11,"label")(12,"input",8),b("change",function(){return n.isDark=!n.isDark}),m(),f(13),u(14,"translate"),m(),p(15,"button",9),b("click",function(){return n.applyTileset()}),f(16),u(17,"translate"),m()(),p(18,"div",10)(19,"a",11),u(20,"translate"),b("click",function(a){return n.clickExternalHref(a)}),f(21),u(22,"translate"),m()()()),t&2&&(l(),F(n.TILES_INFOS),l(5),L(n.selectedSet?6:-1),l(2),F(n.sets),l(2),L(n.canKyodai&&n.kyodaiUrl?10:-1),l(2),M("checked",n.isDark),l(),O(_(14,9,"TILES_DARK")),l(2),M("disabled",!n.selectedSet||n.selectedSet.id===n.app.settings.tileset&&n.isDark===n.app.settings.dark),l(),z("",_(17,11,"USE_NOW")," "),l(3),M("href",j(_(20,13,"READ_MORE_WIKIPEDIA_URL")),ze),l(2),O(_(22,15,"READ_MORE_WIKIPEDIA")))},dependencies:[An,mt,Q],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;height:100%}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:var(--dialog-text-color);margin-top:0;margin-bottom:.2em;line-height:1em}@media only screen and (max-width:400px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em}}[_nghost-%COMP%]   .tiles-content[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;flex:1;border:1px solid var(--card-layout-color-border);border-radius:4px;overflow-y:auto}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%]{flex:1;text-align:center;word-break:normal;margin-top:5px;margin-bottom:5px;display:flex;flex-direction:column;padding-left:5px;padding-right:5px}[_nghost-%COMP%]   .tile[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;font-size:.9em}[_nghost-%COMP%]   .tiles-title[_ngcontent-%COMP%]{flex:1;margin-top:.5em;margin-bottom:.2em;font-weight:700;text-align:center;letter-spacing:2px;border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .tiles-section[_ngcontent-%COMP%]{padding:0 6px}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]{flex:50%}[_nghost-%COMP%]   .tiles-set[_ngcontent-%COMP%]{display:flex;justify-content:space-around}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:20%}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]{flex:100%}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:50%}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:33%}}@media only screen and (max-width:280px){[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]{flex-wrap:wrap}[_nghost-%COMP%]   .tiles-section-9[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-5[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-4[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%], [_nghost-%COMP%]   .tiles-section-3[_ngcontent-%COMP%]   .tiles-set[_ngcontent-%COMP%]   .tile[_ngcontent-%COMP%]{flex:50%}}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]{padding-top:8px}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;gap:8px;width:100%;margin-bottom:8px}@media only screen and (max-width:500px){[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]{justify-content:space-around}}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]   .tiles-select[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;gap:8px}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;flex-direction:row;align-items:center;height:100%;flex:1}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .tiles-footer[_ngcontent-%COMP%]   .tiles-reference[_ngcontent-%COMP%]{text-align:center}"]})}}return i})();function Rn(){let i={adjointed:["circles","diamonds"],african:[[1,5]],batik:[[1,7]],blobs:[],"brick-wall":[[1,2]],"candy-cane":[1],chainlink:[[1,3]],checkerboard:[],chevron:[1,2,3,4,5,7,8,11,13,14,15],chinese:[[1,14]],"christmas-bells":[1],"christmas-gift":[],"christmas-pattern":[[1,7]],"christmas-tree":[1,"balls"],circles:[[1,17],19,20,22,"and-diamonds"],"concentric-circles":[[1,6]],"cross-section":[],cubes:[[1,6]],diamonds:[[1,15],17,18,19,20,21],doodle:[[1,2]],"double-bubble":[[1,4]],egyptian:[1,2,3,4,6,8,9,10,12],"ethnic-pattern":[[1,3]],eyes:[[1,4]],flower:[[1,7]],geometric:[[1,10]],"greek-key":[],halloween:[[1,7]],hearts:[3,5,9],herringbone:[[1,8]],hexagon:[[1,11],13],"interlocked-hexagons":[[1,4]],"inverted-triangles":[],"japanese-pattern":[1,2,3,4,5,6,7,8,12],jigsaw:[],lanterns:[1],leaves:[[1,10]],lines:[1,2,3,4,5,6,8],memphis:[1,2,3,4,5,6,10],"mexican-pattern":[[1,2]],moroccan:[[1,2]],new:[[1,17]],octagons:[[1,2]],"overlapping-hexagons":[],patches:[],pipes:[],"plaid-pattern":[[1,6]],plus:[[1,6]],"quarter-circles":[[1,2]],railroad:[],"rectangles-and-squares":[1],rope:[1],"santa-claus":[],scales:[[1,9]],semicircles:[1],snowflakes:[1],songket:[1],sprinkles:[1],squares:[[1,9]],"squares-and-plus":[1,2],"squares-and-squares":[1,2],"squares-and-triangles":[1,2],"squares-and-stars":[1,2],"squares-and-diamonds":[],"squares-and-diamonds-2":[],"squares-and-circles":[[1,3]],squiggle:[1],"stained-glass":[],stars:[[1,8]],"stars-and-lines":[1,2],"straight-lines":[],stripes:[[1,2]],terrazzo:[1],tiles:[[1,3]],triangles:[[1,25],27,28],tribal:[[1,5]],waves:[[1,20],22,24],zebra:[]},o=[];for(let[e,t]of Object.entries(i)){t.length===0&&o.push({id:e});for(let n of t)if(Array.isArray(n)){let[r,a]=n;for(let s=r;s<=a;s++)o.push({id:`${e}-${s}`})}else o.push({id:`${e}-${n}`})}return o.map(e=>({id:e.id,title:e.id.split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join(" ")}))}function Vi(i){let o=i.replace(/\s+/g," ").replace(/>\s+</g,"><").trim();return encodeURIComponent(o)}function Ri(i,o,e,t,n,r,a,s,c,d,g,h,P,E,w){let A="";r==="stroke-join"&&(A=P==2?"stroke-linejoin='round' stroke-linecap='round' ":"stroke-linecap='square' ");function V(ee){let He=a[ee+1];t===0&&n>2&&(s===3&&n===4&&ee===2||s===4&&n===5&&ee===3||s===3&&n===5&&ee===3||s===3&&n===5&&ee===2||s===2)&&(He=a[1]);let Ue;r==="stroke-join"?Ue=` stroke='${He}' fill='none'`:r==="stroke"?Ue=` stroke='${He}' fill='none'`:Ue=` stroke='none' fill='${He}'`;let _i=g[0]/2===0?"":` transform='translate(${g[0]/2},${t})'`;return`<path d='${i[ee]}' stroke-width='${c}'${Ue} ${_i}${A}/>`}let N=[],se=Math.min(i.length,t===0&&n>2?n-1:s);for(let ee=0;ee<se;ee++)N.push(V(ee));return["<svg width='100%' height='100%' xmlns='http://www.w3.org/2000/svg'>","<defs>",`<pattern id='a' patternUnits='userSpaceOnUse' width='${o+g[0]}' height='${e-t*(n-s)+g[1]}' patternTransform='scale(${d}) rotate(${h})'>`,...N,"</pattern></defs>",`<rect width='800%' height='800%' transform='translate(${d*E},${d*w})' fill='url(#a)'/>`,"</svg>"].join("")}var Fn=(()=>{class i{constructor(){this.http=k(xe),this.cache={}}get(e){return le(this,null,function*(){let t=this.cache[e];if(t){if(t.data)return t.data;if(t.request!==void 0)return t.request}t={};let n=new Promise((r,a)=>{setTimeout(()=>{this.http.get(`assets/patterns/${e}.json`,{responseType:"text"}).subscribe({next:s=>{t.data=s,t.request=void 0,r(s)},error:s=>{a(s)}})})});return t.request=n,this.cache[e]=t,n})}svgDataUrl(e,t){return le(this,null,function*(){let n=yield this.get(e);return`url("data:image/svg+xml;utf8,${this.svgBackground(n,t)}")`})}svgBackground(e,t){let n=JSON.parse(e),r=Ri(n.path,n.width,n.height,n.vHeight??0,n.path.length+1,n.mode,["",...t],t.length+1,1,1,n.spacing??[0,0],0,1,0,0);return Vi(r)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=ue({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fi=["kyodaiInput"],$n=(i,o)=>o.id,$i=(i,o)=>o.source;function ji(i,o){if(i&1){let e=$();p(0,"input",29),b("change",function(){let n=y(e).$implicit,r=C();return x(r.setSelectedTab(n.id))}),m()}if(i&2){let e=o.$implicit,t=C();M("id",`tab-${e.id}`)("checked",t.selectedTab===e.id)}}function Gi(i,o){if(i&1&&(p(0,"label",3),f(1),u(2,"translate"),m()),i&2){let e=o.$implicit;M("id",`tab-${e.id}-label`)("for",`tab-${e.id}`),l(),O(_(2,3,e.name))}}function Ni(i,o){if(i&1){let e=$();p(0,"li")(1,"input",30),b("change",function(){let n=y(e).$implicit,r=C();return r.app.settings.lang=n.key,x(r.app.setLang())}),m(),p(2,"label",31),f(3),m()()}if(i&2){let e=o.$implicit,t=o.$index,n=C();l(),M("id","lang"+(t+1))("value",e.key)("checked",n.app.settings.lang===e.key),Z("aria-label",e.title),l(),M("for","lang"+(t+1)),l(),O(e.title)}}function Hi(i,o){if(i&1){let e=$();p(0,"li")(1,"input",32),b("change",function(){let n=y(e).$implicit,r=C();return r.app.settings.tileset=n.id,x(r.app.settings.save())}),m(),p(2,"label",31),f(3),m(),S(4,"app-license-link",33),m()}if(i&2){let e=o.$implicit,t=o.$index,n=C();l(),M("id",W("imageset",t))("value",e.id)("checked",n.app.settings.tileset===e.id),Z("aria-label",e.name),l(),M("for",W("imageset",t)),l(),z(" ",e.name," "),l(),M("link",W("https://github.com/ffalt/mah/blob/main/src/assets/svg/README.md#",e.id,"svg"))("licenseKey",e.license)}}function Ui(i,o){if(i&1){let e=$();p(0,"li")(1,"input",34),u(2,"translate"),b("change",function(){y(e);let n=C();return n.app.settings.tileset="kyodai",x(n.app.settings.save())}),m(),p(3,"label",35),f(4),u(5,"translate"),m()()}if(i&2){let e=C();l(),M("checked",e.app.settings.tileset==="kyodai"),Z("aria-label",_(2,3,"KYODAI_TILESET")),l(3),O(_(5,5,"KYODAI_TILESET"))}}function zi(i,o){if(i&1&&(p(0,"option",45),f(1),m()),i&2){let e=o.$implicit;M("value",e.source),l(),Re("",e.name," - ",e.author)}}function Yi(i,o){if(i&1){let e=$();p(0,"fieldset",13)(1,"legend",36),f(2),u(3,"translate"),m(),p(4,"div",37)(5,"textarea",38,0),u(7,"translate"),b("change",function(n){y(e);let r=C();return x(r.updateKyodaiUrl(n))}),m(),p(8,"button",39),u(9,"translate"),u(10,"translate"),b("click",function(){y(e);let n=C();return x(n.clearKyodaiUrl())}),q(),p(11,"svg",40),S(12,"path",41)(13,"path",42),m()(),Ve(),p(14,"select",43),u(15,"translate"),b("change",function(n){y(e);let r=C();return x(r.setKyodaiUrl(n))}),p(16,"option",44),f(17),u(18,"translate"),m(),R(19,zi,2,3,"option",45,$i),m()(),p(21,"button",46),u(22,"translate"),b("click",function(){y(e);let n=C();return x(n.applyKyodaiUrl())}),f(23),u(24,"translate"),m()()}if(i&2){let e=C();l(2),O(_(3,14,"KYODAI_TILESET_SETTINGS")),l(3),M("placeholder",j(_(7,16,"KYODAI_TILESET_URL_PLACEHOLDER")))("value",e.app.settings.kyodaiUrl?e.app.settings.kyodaiUrl:""),l(3),M("title",j(_(9,18,"KYODAI_TILESET_CLEAR"))),Ee("aria-label",j(_(10,20,"KYODAI_TILESET_CLEAR"))),l(6),Ee("aria-label",j(_(15,22,"KYODAI_TILESET_EXAMPLES"))),l(3),O(_(18,24,"KYODAI_TILESET_EXAMPLES")),l(2),F(e.kyodaiTileSets),l(2),Ee("aria-label",j(_(22,26,"KYODAI_TILESET_LOAD"))),l(2),z(" ",_(24,28,"KYODAI_TILESET_LOAD")," ")}}function qi(i,o){if(i&1){let e=$();p(0,"li")(1,"input",47),u(2,"translate"),b("change",function(){let n=y(e).$implicit,r=C();return r.app.settings.theme=n.id||"",x(r.app.settings.save())}),m(),p(3,"label",31),f(4),u(5,"translate"),m(),p(6,"div",48),S(7,"div",49),m()()}if(i&2){let e=o.$implicit,t=o.$index,n=C();l(),M("id",W("color",t))("value",e.id)("checked",n.app.settings.theme===e.id),Z("aria-label",_(2,10,e.name)),l(2),M("for",W("color",t)),l(),O(_(5,12,e.name)),l(3),me("theme-"+e.id)}}function Ki(i,o){if(i&1&&S(0,"app-license-link",51),i&2){let e=C(2).$implicit;M("licenseKey",e.license)}}function Xi(i,o){if(i&1&&S(0,"app-license-link",33),i&2){let e=C(2).$implicit;M("link",W("https://github.com/ffalt/mah/blob/main/src/assets/img/README.md#",e.img,"jpg"))("licenseKey",e.license)}}function Wi(i,o){if(i&1&&T(0,Ki,1,1,"app-license-link",51)(1,Xi,1,3,"app-license-link",33),i&2){let e=C().$implicit;L(e.type==="MAH"?0:1)}}function Zi(i,o){if(i&1){let e=$();p(0,"li")(1,"input",50),u(2,"translate"),b("change",function(){let n=y(e).$implicit,r=C();return x(r.setBackground(n.img))}),m(),p(3,"label",31),f(4),u(5,"translate"),m(),T(6,Wi,2,1),m()}if(i&2){let e=o.$implicit,t=o.$index,n=C();l(),M("id",W("back",t))("value",e.img)("checked",n.app.settings.background===e.img),Z("aria-label",_(2,9,e.name)),l(2),M("for",W("back",t)),l(),O(_(5,11,e.name)),l(2),L(e.license?6:-1)}}function Qi(i,o){if(i&1){let e=$();p(0,"li")(1,"input",54),b("change",function(){let n=y(e).$implicit,r=C(2);return r.app.settings.pattern=n.id,x(r.app.settings.save())}),m(),p(2,"label",31),f(3),m()()}if(i&2){let e=o.$implicit,t=o.$index,n=C(2);l(),M("id",W("pattern",t))("value",e.id)("checked",n.app.settings.pattern===e.id),Z("aria-label",e.title),l(),M("for",W("pattern",t)),l(),O(e.title)}}function Ji(i,o){if(i&1&&(p(0,"fieldset",24)(1,"legend",52),f(2),u(3,"translate"),m(),p(4,"ul",53),R(5,Qi,4,8,"li",null,U),m()()),i&2){let e=C();l(2),O(_(3,1,"PATTERN_SETTINGS")),l(3),F(e.patterns)}}var jn=[{id:"lang",name:"LANG"},{id:"stones",name:"TILESET"},{id:"theme",name:"THEME"},{id:"background",name:"BACKGROUND"},{id:"data",name:"DATA"}],Gn=(()=>{class i{constructor(){this.kyodaiInput=pe.required("kyodaiInput"),this.canKyodai=J.kyodai,this.kyodaiTileSets=Ln,this.sets=et,this.backs=Je,this.themes=Fe,this.PatternBackground=Cn,this.languages=Object.keys($e).map(e=>({key:e,title:$e[e].title})),this.app=k(ge),this.tabs=jn,this.patterns=Rn(),this.selectedTab=this.app.getCachedValue("settings.selectedTab")??jn[0].id,this.element=k(_e),this.storage=k(ke),this.layoutService=k(he),this.translate=k(we)}ngAfterViewInit(){this.element?.nativeElement&&this.restoreScroll(this.element.nativeElement)}setBackground(e){this.app.settings.background=e,this.app.settings.save()}updateKyodaiUrl(e){this.app.settings.kyodaiUrl=e.target.value,this.app.settings.save()}clearKyodaiUrl(){this.app.settings.kyodaiUrl=void 0,this.app.settings.tileset=Te,this.app.settings.save()}setKyodaiUrl(e){let t=this.kyodaiInput();t.nativeElement&&(e.preventDefault(),e.stopPropagation(),t.nativeElement.value=e.target.value)}applyKyodaiUrl(){let e=this.kyodaiInput();e.nativeElement&&(this.app.settings.kyodaiUrl=e.nativeElement.value,this.app.settings.save())}setSelectedTab(e){this.selectedTab=e,this.app.cacheValue("settings.selectedTab",e)}restoreScroll(e){if(!e)return;let t=this.app.getCachedValue("settings.scrollTop");setTimeout(()=>e.scrollTop=t??0,0)}onScroll(e){let t=e.target.scrollTop;this.app.cacheValue("settings.scrollTop",t)}clearTimes(){return le(this,null,function*(){let e=yield this.layoutService.get();for(let t of e.items)this.storage.clearScore(t.id)})}clearTimesClick(){confirm(this.translate.instant("BEST_TIMES_CLEAR_SURE"))&&this.clearTimes().catch(e=>console.error(e))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-settings"]],viewQuery:function(t,n){t&1&&ve(n.kyodaiInput,Fi,5),t&2&&be()},hostBindings:function(t,n){t&1&&b("scroll",function(a){return n.onScroll(a)})},decls:76,vars:51,consts:[["kyodaiInput",""],["type","radio","name","settings-tab",1,"tabs-input",3,"id","checked"],["role","tablist","aria-label","Settings Tabs",1,"tabs-labels"],["role","tab",3,"id","for"],[1,"tabs-panels","panels"],["id","panel-lang","role","tabpanel","aria-labelledby","tab-lang-label",1,"panel"],["id","lang-legend"],["role","group","aria-labelledby","lang-legend",1,"radio"],["type","radio","name","lang","id","lang0","value","auto",3,"change","checked"],["for","lang0"],["id","panel-stones","role","tabpanel","aria-labelledby","tab-stones-label",1,"panel"],["id","tileset-legend"],["role","group","aria-labelledby","tileset-legend",1,"radio","radio-tilesets"],[1,"kyodai-settings"],["id","tiles-legend"],["role","group","aria-labelledby","tiles-legend",1,"checks"],[1,"check"],["type","checkbox",3,"change","checked","aria-label"],["id","panel-theme","role","tabpanel","aria-labelledby","tab-theme-label",1,"panel"],["id","theme-legend"],["role","group","aria-labelledby","theme-legend",1,"radio","radio-themes"],["id","panel-background","role","tabpanel","aria-labelledby","tab-background-label",1,"panel"],["id","background-legend"],["role","group","aria-labelledby","background-legend",1,"radio"],[1,"pattern-settings"],["id","panel-data","role","tabpanel","aria-labelledby","tab-data-label",1,"panel"],["id","times-legend"],[1,"button-group"],[1,"clear-times",3,"click","aria-label"],["type","radio","name","settings-tab",1,"tabs-input",3,"change","id","checked"],["type","radio","name","lang",3,"change","id","value","checked"],[3,"for"],["type","radio","name","imageset",3,"change","id","value","checked"],[3,"link","licenseKey"],["type","radio","name","imageset","value","kyodai","id","imageset-kyodai",3,"change","checked"],["for","imageset-kyodai"],["id","kyodai-legend"],[1,"input-wrapper"],["type","text","name","kyodai","aria-labelledby","kyodai-legend","aria-describedby","kyodai-help",3,"change","value","placeholder"],[1,"clear-kyodai",3,"click","title","aria-label"],["width","17px","height","17px","viewBox","0 0 35 35","aria-hidden","true"],["d","M28.814,30.064a1.247,1.247,0,0,1-.884-.367L5.3,7.07A1.249,1.249,0,0,1,7.07,5.3L29.7,27.93a1.251,1.251,0,0,1-.884,2.134Z"],["d","M6.186,30.064A1.251,1.251,0,0,1,5.3,27.93L27.93,5.3A1.25,1.25,0,0,1,29.7,7.07L7.07,29.7A1.247,1.247,0,0,1,6.186,30.064Z"],[1,"example-kyodai",3,"change","aria-label"],["value",""],[3,"value"],[3,"click","aria-label"],["type","radio","name","color",3,"change","id","value","checked"],[1,"theme-preview-wrapper"],[1,"theme-preview"],["type","radio","name","back",3,"change","id","value","checked"],["link","https://github.com/ffalt/mah/blob/main/src/assets/patterns/README.md",3,"licenseKey"],["id","pattern-legend"],["role","group","aria-labelledby","pattern-legend",1,"radio","radio-patterns"],["type","radio","name","pattern",3,"change","id","value","checked"]],template:function(t,n){t&1&&(R(0,ji,1,2,"input",1,$n),p(2,"div",2),R(3,Gi,3,5,"label",3,$n),m(),p(5,"div",4)(6,"section",5)(7,"fieldset")(8,"legend",6),f(9),u(10,"translate"),m(),p(11,"ul",7)(12,"li")(13,"input",8),u(14,"translate"),b("change",function(){return n.app.settings.lang="auto",n.app.setLang()}),m(),p(15,"label",9),f(16),u(17,"translate"),m()(),R(18,Ni,4,6,"li",null,U),m()()(),p(20,"section",10)(21,"fieldset")(22,"legend",11),f(23),u(24,"translate"),m(),p(25,"ul",12),R(26,Hi,5,11,"li",null,U),T(28,Ui,6,7,"li"),m()(),T(29,Yi,25,30,"fieldset",13),p(30,"fieldset")(31,"legend",14),f(32),u(33,"translate"),m(),p(34,"ul",15)(35,"li")(36,"label",16)(37,"input",17),u(38,"translate"),b("change",function(){return n.app.settings.contrast=!n.app.settings.contrast,n.app.settings.save()}),m(),p(39,"span"),f(40),u(41,"translate"),m()()(),p(42,"li")(43,"label",16)(44,"input",17),u(45,"translate"),b("change",function(){return n.app.settings.dark=!n.app.settings.dark,n.app.settings.save()}),m(),p(46,"span"),f(47),u(48,"translate"),m()()()()()(),p(49,"section",18)(50,"fieldset")(51,"legend",19),f(52),u(53,"translate"),m(),p(54,"ul",20),R(55,qi,8,14,"li",null,U),m()()(),p(57,"section",21)(58,"fieldset")(59,"legend",22),f(60),u(61,"translate"),m(),p(62,"ul",23),R(63,Zi,7,13,"li",null,U),m()(),T(65,Ji,7,3,"fieldset",24),m(),p(66,"section",25)(67,"fieldset")(68,"legend",26),f(69),u(70,"translate"),m(),p(71,"div",27)(72,"button",28),u(73,"translate"),b("click",function(){return n.clearTimesClick()}),f(74),u(75,"translate"),m()()()()()),t&2&&(F(n.tabs),l(3),F(n.tabs),l(6),O(_(10,23,"LANG")),l(4),M("checked",n.app.settings.lang==="auto"),Z("aria-label",_(14,25,"LANG_AUTO")),l(3),O(_(17,27,"LANG_AUTO")),l(2),F(n.languages),l(5),O(_(24,29,"TILESET")),l(3),F(n.sets),l(2),L(n.canKyodai?28:-1),l(),L(n.canKyodai&&n.app.settings.tileset==="kyodai"?29:-1),l(3),O(_(33,31,"TILES")),l(5),Ee("aria-label",j(_(38,33,"HIGHER_CONTRAST"))),M("checked",n.app.settings.contrast),l(3),O(_(41,35,"HIGHER_CONTRAST")),l(4),Ee("aria-label",j(_(45,37,"TILES_DARK"))),M("checked",n.app.settings.dark),l(3),O(_(48,39,"TILES_DARK")),l(5),O(_(53,41,"THEME")),l(3),F(n.themes),l(5),O(_(61,43,"BACKGROUND")),l(3),F(n.backs),l(2),L(n.app.settings.background===n.PatternBackground?65:-1),l(4),O(_(70,45,"BEST_TIMES")),l(3),Ee("aria-label",j(_(73,47,"BEST_TIMES_CLEAR"))),l(2),z(" ",_(75,49,"BEST_TIMES_CLEAR")," "))},dependencies:[mt,Q],styles:['[_nghost-%COMP%]{flex:1;overflow-y:auto;width:100%;height:100%;display:flex;flex-direction:column;position:relative}@media only screen and (max-width:1000px){[_nghost-%COMP%]{gap:8px;padding:4px}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{border:1px solid var(--main-bg-color-lt);border-radius:8px;padding:12px;margin:0;background-color:var(--dialog-background-color);transition:all .2s ease}@media only screen and (max-width:700px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]{padding:10px}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding:0 8px;font-weight:600;color:var(--primary-text-colddor);margin-left:-4px;font-size:.95em;display:none}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0;display:flex;gap:6px;height:40px;min-height:40px;line-height:40px;align-items:center;border-radius:6px;transition:background-color .15s ease;box-sizing:border-box;break-inside:avoid;flex:1}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:focus-within{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{columns:2;text-align:left;list-style:none;padding:0;margin:0;vertical-align:text-bottom}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle;line-height:1.2;-webkit-user-select:none;user-select:none;white-space:normal;text-overflow:ellipsis;cursor:pointer;flex:1;font-size:.95em;height:100%;display:flex;align-items:center}@media only screen and (max-width:400px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{-webkit-hyphens:auto;hyphens:auto;word-break:break-all}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex-shrink:0}@media only screen and (max-width:350px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]{list-style:none;padding:0 0 0 13px;margin:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-left:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;padding:8px;margin:-8px;border-radius:6px;transition:background-color .15s ease;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:focus-within{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]{padding:2px;display:flex;align-items:center;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;flex-shrink:0}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .checks[_ngcontent-%COMP%]   .check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95em}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]{background-color:var(--dialog-background-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;position:relative;border:1px solid var(--input-border-color);background-color:var(--input-background-color);border-radius:6px;margin:8px 0;overflow:hidden;transition:border-color .2s ease}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:hover{background-color:var(--input-background-color-hover);border-color:var(--dialog-headline-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-text-color);outline-offset:-2px}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{flex:1;border:none;resize:none;outline:none;font-size:10px;background-color:var(--input-background-color);color:var(--input-text-color);padding:10px;font-family:monospace;line-height:1.4}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus-visible{outline:none}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]:after{position:absolute;content:"";right:18px;top:calc(50% - 4px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid var(--input-text-color);pointer-events:none}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]{background-image:unset;background-color:var(--input-background-color);color:var(--input-background-color);border:1px solid var(--input-border-color);border-left:1px solid var(--input-border-color);width:44px;padding:0;display:flex;align-items:center;justify-content:center;appearance:none;cursor:pointer}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]:hover{background-color:var(--input-background-color-hover);border-color:var(--dialog-headline-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .example-kyodai[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-text-color);outline-offset:-2px}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]{background-color:var(--input-background-color);color:var(--input-text-color);border:1px solid var(--input-border-color);border-left:1px solid var(--input-border-color);width:44px;padding:0;margin-left:-1px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--input-text-color);transition:fill .2s ease}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]:hover{background-color:var(--input-background-color-hover);border-color:var(--dialog-headline-color)}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--primary-text-color);outline-offset:-2px}[_nghost-%COMP%]   fieldset.kyodai-settings[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .clear-kyodai[_ngcontent-%COMP%]:active{background-color:var(--dialog-background-color)}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]{columns:2}@media only screen and (max-width:500px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-wrap:nowrap;align-items:center;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-tilesets[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   app-license-link[_ngcontent-%COMP%]{margin-left:auto;flex-shrink:0}@media only screen and (max-width:500px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]   .theme-preview-wrapper[_ngcontent-%COMP%]{display:block;border:1px solid #000}@media(prefers-color-scheme:dark){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]   .theme-preview-wrapper[_ngcontent-%COMP%]{border-color:#6e6e6e}}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-themes[_ngcontent-%COMP%]   .theme-preview[_ngcontent-%COMP%]{background-color:var(--main-bg-color);display:block;width:20px;height:20px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-patterns[_ngcontent-%COMP%]{columns:3}@media only screen and (max-width:700px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-patterns[_ngcontent-%COMP%]{columns:2}}@media only screen and (max-width:400px){[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   .radio-patterns[_ngcontent-%COMP%]{columns:1}}[_nghost-%COMP%]   .tabs-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:1px;height:1px;margin:-1px;padding:0;border:0;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;justify-content:center;margin-top:2px;margin-bottom:16px;padding-bottom:8px}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]{background:transparent;color:var(--input-text-color);padding:8px 0;border-radius:0;border:none;border-bottom:2px solid transparent;font-weight:600;cursor:pointer;min-width:auto;text-align:center;position:relative;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]:focus-visible{color:var(--dialog-headline-color);outline:none;border-bottom-color:var(--gesture-indicator)}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.35}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]   label[role=tab][_ngcontent-%COMP%]:hover:not(:disabled){color:var(--dialog-headline-color);border-bottom-color:var(--dialog-headline-color);opacity:.9}[_nghost-%COMP%]   .tabs-panels[_ngcontent-%COMP%]{flex:1;padding-right:8px}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{background:var(--dialog-background-color);display:none;width:100%;height:100%;flex-direction:column;justify-content:center;gap:8px}[_nghost-%COMP%]   #lang[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-lang][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]{color:var(--dialog-headline-color);border-bottom-color:var(--dialog-headline-color);font-weight:700}[_nghost-%COMP%]   #lang[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-lang][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]:hover{color:var(--text-highlight-color);border-bottom-color:var(--text-highlight-color)}@media(prefers-color-scheme:dark){[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{border-bottom-color:var(--input-border-color)}[_nghost-%COMP%]   #tab-lang[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-lang][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]{color:var(--dialog-headline-color);border-bottom-color:var(--dialog-headline-color)}[_nghost-%COMP%]   #tab-lang[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-lang][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-stones][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-theme][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-background][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-labels[_ngcontent-%COMP%]   label[for=tab-data][_ngcontent-%COMP%]:hover{color:var(--main-text-color);border-bottom-color:var(--main-text-color)}}[_nghost-%COMP%]   #tab-lang[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-lang[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-background[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-background[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-stones[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-stones[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-theme[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-theme[_ngcontent-%COMP%], [_nghost-%COMP%]   #tab-data[_ngcontent-%COMP%]:checked ~ .tabs-panels[_ngcontent-%COMP%]   #panel-data[_ngcontent-%COMP%]{display:flex}@media only screen and (max-height:400px){[_nghost-%COMP%]   .tabs-panels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .tabs-panels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}[_nghost-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .panel[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .tabs-labels[_ngcontent-%COMP%]{display:none}}']})}}return i})();function Dt(i){return(i<10?"0":"")+i.toString()}var ht=(()=>{class i{transform(e){if(Number.isNaN(e)||e===0)return"-";let t=Math.floor(e/1e3),n=Math.floor(t/3600),r=Math.floor((t-n*3600)/60),a=t-n*3600-r*60;return`${n>0?`${Dt(n)}:`:""}${Dt(r)}:${Dt(a)}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Ce({name:"duration",type:i,pure:!0})}}return i})();var Me=class i{static{this.empty=new i(0,0,0,0)}constructor(o,e,t,n){this.left=o,this.top=e,this.right=t,this.bottom=n}static fromElement(o){let{left:e,top:t,right:n,bottom:r}=o.getBoundingClientRect();return new i(e,t,n,r)}static fromWindow(o){return new i(0,0,o.innerWidth,o.innerHeight)}inflate(o){this.left-=o,this.top-=o,this.right+=o,this.bottom+=o}intersectsWith(o){return o.left<this.right&&this.left<o.right&&o.top<this.bottom&&this.top<o.bottom}intersectsWithY(o){return o.top<this.bottom&&this.top<o.bottom}getIntersectionWith(o){let e=Math.max(this.left,o.left),t=Math.max(this.top,o.top),n=Math.min(this.right,o.right),r=Math.min(this.bottom,o.bottom);return n>=e&&r>=t?new i(e,t,n,r):i.empty}};var Ae=(()=>{class i{constructor(){this.scrollNotify=new bt,this.observeNotify=new bt,this.currentViewport=new Me(0,0,0,0),this.scrollSubject=new Gt,this.platformId=k(qt),this.isBrowser=on(this.platformId),this.hasIntersectionObserver=i.checkIntersectionObserver();let e=this.scrollSubject.asObservable();this.scrollObservable=Nt(e.pipe(Ut(300)),e.pipe(Ht(100))),this.scrollObservable.subscribe(t=>{this.scrollNotify.emit(t)}),this.currentViewport=Me.fromWindow(window)}getObserver(){return this.intersectionObserver?this.intersectionObserver:(this.intersectionObserver=new IntersectionObserver(e=>{this.observeNotify.next(e)},{threshold:0}),this.intersectionObserver)}notifyScroll(e){if(this.hasIntersectionObserver)return;let t=e.element?Me.fromElement(e.element):Me.fromWindow(window),n=t.bottom-t.top;t.bottom+=n,t.top-=n,this.currentViewport=t,this.scrollSubject.next({rect:t})}static checkIntersectionObserver(){let e="IntersectionObserver"in window,n=window.navigator.userAgent.match(/Edge\/(\d*)\./i),r=!!n&&n.length>1,a=r&&!!n&&Number.parseInt(n[1],10)>15;return e&&(!r||a)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=ue({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Nn=(()=>{class i{constructor(){this.scrollTo=B(),this.element=k(_e),this.scrollNotify=k(Ae)}ngOnChanges(e){if(e.scrollTo?.currentValue){let t=e.scrollTo.currentValue;if(t.id&&t.id.length>0){let n=document.getElementById(t.id);n&&(this.element.nativeElement.scrollTop=n.offsetTop-n.offsetHeight)}}}scrollTrack(e){this.scrollNotify.notifyScroll({name:"scroll-host",element:this.element.nativeElement})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=qe({type:i,selectors:[["","appDeferLoadScrollHost",""]],hostBindings:function(t,n){t&1&&b("scroll",function(a){return n.scrollTrack(a)})},inputs:{scrollTo:[1,"scrollTo"]},features:[Oe]})}}return i})();var Hn=(()=>{class i{constructor(){this.preRender=B(!1),this.appDeferLoad=fe(),this.timeoutLoadMS=20,this.elementRef=k(_e),this.deferLoadService=k(Ae)}ngAfterViewInit(){this.deferLoadService.isBrowser?this.deferLoadService.hasIntersectionObserver?this.registerIntersectionObserver():this.addScrollListeners():this.preRender()&&this.load()}ngOnDestroy(){this.removeListeners()}static getScrollPosition(){return window.scrollY+(document.documentElement.clientHeight||document.body.clientHeight)}loadAndUnobserve(){this.load(),this.unobserve(),this.removeListeners()}cancelDelayLoad(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}delayLoad(){this.timeoutId||(this.timeoutId=setTimeout(()=>{this.loadAndUnobserve(),this.cancelDelayLoad()},this.timeoutLoadMS))}manageIntersection(e){this.checkIfIntersecting(e)?this.delayLoad():this.cancelDelayLoad()}registerIntersectionObserver(){this.intersectionObserver||(this.intersectionObserver=this.deferLoadService.getObserver(),this.intersectionObserver&&this.elementRef.nativeElement&&(this.intersectionObserver.observe(this.elementRef.nativeElement),this.observeSubscription=this.deferLoadService.observeNotify.subscribe(e=>{this.checkForIntersection(e)})))}checkForIntersection(e){for(let t of e)t.target===this.elementRef.nativeElement&&this.manageIntersection(t)}checkIfIntersecting(e){return e?.time?e.isIntersecting:this.isVisible()}load(){this.removeListeners(),this.appDeferLoad.emit()}loadFromScroll(){setTimeout(()=>{this.load()})}addScrollListeners(){this.scrollSubscription=this.deferLoadService.scrollNotify.subscribe(e=>{this.checkInView(e.rect)&&this.loadFromScroll()}),setTimeout(()=>{this.checkInView(this.deferLoadService.currentViewport)&&this.loadFromScroll()})}unobserve(){this.intersectionObserver&&this.elementRef.nativeElement&&(this.intersectionObserver.unobserve(this.elementRef.nativeElement),this.intersectionObserver=void 0)}removeListeners(){this.scrollSubscription&&(this.scrollSubscription.unsubscribe(),this.scrollSubscription=void 0),this.unobserve(),this.observeSubscription&&(this.observeSubscription.unsubscribe(),this.observeSubscription=void 0)}checkInView(e){return Me.fromElement(this.elementRef.nativeElement).intersectsWithY(e)}isVisible(){let e=i.getScrollPosition();return this.elementRef.nativeElement.offsetTop<=e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=qe({type:i,selectors:[["","appDeferLoad",""]],inputs:{preRender:[1,"preRender"]},outputs:{appDeferLoad:"appDeferLoad"}})}}return i})();function v(i,o,e){return`${i}|${o}|${e}`}function Ge(i,o){return Math.floor(Math.random()*(o-i+1))+i}function de(i){return i[Math.floor(Math.random()*i.length)]}function G(i){for(let o=i.length-1;o>0;o--){let e=Math.floor(Math.random()*(o+1));[i[o],i[e]]=[i[e],i[o]]}return i}function K(i,o,e){return i>=0&&i<=36&&o>=0&&o<=16&&e>=0&&e<=5}function ie(i,o,e,t){return i.has(v(o,e-1,t-1))||i.has(v(o,e,t-1))||i.has(v(o,e+1,t-1))||i.has(v(o,e-1,t))||i.has(v(o,e+1,t))||i.has(v(o,e-1,t+1))||i.has(v(o,e,t+1))||i.has(v(o,e+1,t+1))}function ut(i,o,e,t){if(o===0)return!0;let n=o-1;return i.has(v(n,e,t))||i.has(v(n,e-1,t))&&i.has(v(n,e+1,t))?!0:i.has(v(n,e-1,t-1))&&i.has(v(n,e+1,t-1))&&i.has(v(n,e-1,t+1))&&i.has(v(n,e+1,t+1))}function Ne(i,o,e,t,n){if(!K(t,n,e))return!1;let r=v(e,t,n);return i.has(r)||!ut(i,e,t,n)||ie(i,e,t,n)?!1:(i.add(r),o.push([e,t,n]),!0)}function Un(i){return i%2!==0}function zn(){return de(["lines","lines","lines","checker","checker","areas","areas","rings"])}function _t(i,o){let e=[];for(let t=0;t<=o;t+=2)for(let n=0;n<=i;n+=2)e.push([n,t]);return e}function ft(i,o,e,t=0){for(let[n,r]of i)for(let a=-o;a<=o;a++)for(let s=-o;s<=o;s++){let c=n+s,d=r+a;K(c,d,t)&&e.add(v(t,c,d))}}function Pe(i,o,e,t=2){let n=[];for(let r=0;r<=e;r+=t)for(let a=0;a<=o;a+=t)i.has(v(0,a,r))&&n.push([0,a,r]);return n}function Ct(i,o,e=1){let t=[];for(let r=0;r<=i;r+=e)t.push(r);let n=[];for(let r=0;r<=o;r+=e)n.push(r);return{xs:t,ys:n}}function Se(i,o,e,t,n,r){let a=i;for(let[s,c]of o){if(a>=n)break;for(let[d,g]of e){if(a>=n)break;let h=r(d,g,s,c);if(h>0&&(a+=h,a>=t&&a<=n))break}if(a>=t&&a<=n)break}return a}function Yn(i){return i.some(o=>o[0]>0)}function eo(i,o,e,t,n,r){let a=Ge(n,r),s=a*4,c=[];for(let g of t)for(let h of e)c.push([h,g]);G(c);let d=0;for(;d<a&&s-- >0&&c.length>0;){let[g,h]=c.pop();if(g===e[0]||g===e.at(-1)||h===t[0]||h===t.at(-1))continue;let P=v(o,g,h);if(!i.has(P))continue;let E=Math.random()<.5?"h":"v",w=[];E==="h"?(w.push(P),g+1<=e.at(-1)&&w.push(v(o,g+1,h))):(w.push(P),h+1<=t.at(-1)&&w.push(v(o,g,h+1)));let A=!1;for(let V of w)i.delete(V)&&(A=!0);A&&d++}}function to(i,o,e){for(let t of e)for(let n of o)n%2!==0||t%2!==0||i.add(v(0,n,t))}function no(){let i=Math.random()<.5?0:de([0,0,2,2,4]),o=Math.random()<.5?0:de([0,0,2,2,4]),e=Math.random()<.5?0:de([0,2,2,4]),t=Math.random()<.5?0:de([0,2,2,4]);return{left:i,right:o,top:e,bottom:t}}function io(i,o,e,t,n,r){let{left:a,right:s,top:c,bottom:d}=r;for(let g of e)for(let h of o)(h<a||h>t-s||g<c||g>n-d)&&i.delete(v(0,h,g))}function oo(i,o,e){return Math.min(Math.max(o,Math.floor(i*.45)),e)}function ro(i,o,e){let t=o.length;if(t<=e)return t;let n=G([...o]);for(;t>e&&n.length>0;){let r=n.pop();i.delete(v(0,r[1],r[2]))&&t--}return t}function ao(i,o,e){let t=[];for(let n of e)for(let r of o)i.has(v(0,r,n))||t.push([0,r,n]);return t}function so(i,o,e,t){G(o);let n=e;for(;n<t&&o.length>0;){let[,r,a]=o.pop();ie(i,0,r,a)||(i.add(v(0,r,a)),n++)}return n}function qn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,{xs:r,ys:a}=Ct(e,t,1);to(n,r,a);let s=no();io(n,r,a,e,t,s),eo(n,0,r,a,6,32);let c=Pe(n,e,t,1),d=c.length,g=oo(d,i,o);if(d>g)ro(n,c,g);else if(d<g){let h=ao(n,r,a);so(n,h,d,g)}return Pe(n,e,t,1)}function Bt(i,o,e,t,n,r=!1){if(t%2!==0||n%2!==0||!K(t,n,0))return!1;let a=v(0,t,n);return i.has(a)||ie(i,0,t,n)?!1:(i.add(a),o.push([0,t,n]),r&&e.add(a),!0)}function lo(i,o,e,t,n){let r=Math.floor(t/2),a=Math.floor(n/2);return r-=r%2,a-=a%2,K(r,a,0)||(r=0,a=0),Bt(i,o,e,r,a,!0),{sx:r,sy:a}}function co(i,o){let e=i+o,t=Math.max(40,Math.floor(e*.8)),n=Math.max(t+100,Math.floor(e*2));return Ge(t,n)}function po(i,o){let e=[i[0],i[1]],t=[-i[0],-i[1]],n=i[0]===0?[[1,0],[-1,0]]:[[0,1],[0,-1]],r=[e,...n,t];return Math.random()<o&&(r=G(r)),Math.random()<.2&&(r=[...G([...n]),e,t]),r}function go(i,o,e,t,n,r,a){let s=po(r,a);for(let[c,d]of s){let g=t+c*2,h=n+d*2;if(K(g,h,0)&&Bt(i,o,e,g,h,!0))return{x:g,y:h,direction:[c,d]}}return null}function mo(i,o,e,t,n){let r=G([[1,0],[-1,0],[0,1],[0,-1]]);for(let[a,s]of r){let c=t+a*2,d=n+s*2;if(!(!K(c,d,0)||ie(i,0,c,d)||i.has(v(0,c,d)))&&Bt(i,o,e,c,d,!0))return{x:c,y:d,direction:[a,s]}}return null}function ho(i,o,e,t,n,r){let a=Math.random()<.4?de([0,0,2]):0,s=Math.random()<.4?de([0,0,2]):0,c=Math.random()<.4?de([0,2]):0,d=Math.random()<.4?de([0,2]):0;for(let g of t)for(let h of e)if(h<a||h>n-s||g<c||g>r-d){let P=v(0,h,g);o.has(P)||i.delete(P)}}function uo(i,o,e,t){let n=o.length,r=G([...o].filter(a=>!e.has(v(0,a[1],a[2]))));for(;n>t&&r.length>0;){let a=r.pop();i.delete(v(0,a[1],a[2]))&&n--}return n}function _o(i,o,e,t,n,r){let a=[],s=[];for(let g of t)for(let h of e)i.has(v(0,h,g))||([[h-2,g],[h+2,g],[h,g-2],[h,g+2]].some(([w,A])=>o.has(v(0,w,A)))?a:s).push([0,h,g]);G(a),G(s);let c=[a,s],d=n;for(let g of c)for(;d<r&&g.length>0;){let[h,P,E]=g.pop();P%2===0&&E%2===0&&!ie(i,0,P,E)&&(i.add(v(h,P,E)),d++)}return d}function fo(i,o,e,t,n,r,a,s){let c=Pe(i,a,s,1),d=c.length,g=Math.min(Math.max(n,Math.floor(d*.9)),r);d>g?uo(i,c,o,g):d<g&&_o(i,o,e,t,d,g)}function Co(i,o,e){let t=[];for(let n of e)for(let r of o)i.has(v(0,r,n))&&t.push([0,r,n]);return t}function Kn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,r=[],a=new Set,{xs:s,ys:c}=Ct(e,t,1),{sx:d,sy:g}=lo(n,r,a,e,t),h=d,P=g,w=[[1,0],[-1,0],[0,1],[0,-1]][Math.floor(Math.random()*4)],A=co(e,t);for(let V=0;V<A;V++){let N=V%Ge(6,12)===0?Math.random()*.6+.2:Math.random()*.3,se=go(n,r,a,h,P,w,N);if(se){h=se.x,P=se.y,w=se.direction;continue}let ee=mo(n,r,a,h,P);if(ee){h=ee.x,P=ee.y,w=ee.direction;continue}break}return ho(n,a,s,c,e,t),fo(n,a,s,c,i,o,e,t),Co(n,s,c)}function Xn(i,o,e,t){let n=i+(e-1)*2,r=o+(t-1)*2,a=[];for(let s=i;s<=n;s+=2)a.push([s,o]);for(let s=o+2;s<=r;s+=2)a.push([n,s]);for(let s=n-2;s>=i;s-=2)a.push([s,r]);for(let s=r-2;s>o;s-=2)a.push([i,s]);return a}function At(i,o,e,t,n,r,a){let s=`${e}x${t}`;if(a.has(s))return!1;let c=i+(e-1)*2,d=o+(t-1)*2;if(!K(c,d,0))return!1;let g=Xn(i,o,e,t);for(let[h,P]of g){if(h%2!==0||P%2!==0||!K(h,P,0))return!1;let E=v(0,h,P);if(n.has(E)||r.has(E)||ie(n,0,h,P))return!1}return!0}function Vt(i,o,e,t,n,r,a){let s=Xn(i,o,e,t);for(let[c,d]of s)n.add(v(0,c,d));return ft(s,2,r,0),a.add(`${e}x${t}`),s.length}function Wn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,r=new Set,a=new Set,s=[];for(let g=3;g<=8;g++)for(let h=3;h<=8;h++)s.push([g,h]);G(s);let c=_t(e,t);G(c);let d=0;if(d=Se(d,s,c,i,o,(g,h,P,E)=>At(g,h,P,E,n,r,a)?Vt(g,h,P,E,n,r,a):0),d<i){let g=s.filter(([h,P])=>!a.has(`${h}x${P}`));G(g),G(c),d=Se(d,g,c,i,o,(h,P,E,w)=>At(h,P,E,w,n,r,a)?Vt(h,P,E,w,n,r,a):0)}if(d<o){let g=!0,h=!1;for(;g&&d<o;){g=!1;let P=h?[...s]:s.filter(([E,w])=>!a.has(`${E}x${w}`));if(P.length===0&&!h){h=!0;continue}G(P),G(c),d=Se(d,P,c,i,o,(E,w,A,V)=>{if(!At(E,w,A,V,n,r,a))return 0;let N=Vt(E,w,A,V,n,r,a);return N>0&&(g=!0),N})}}return Pe(n,e,t,2)}function Zn(i,o,e,t){let n=i+(e-1)*2,r=o+(t-1)*2,a=[];for(let s=o;s<=r;s+=2)for(let c=i;c<=n;c+=2)a.push([c,s]);return a}function Rt(i,o,e,t,n,r,a){let s=`${e}x${t}`;if(a.has(s))return!1;let c=i+(e-1)*2,d=o+(t-1)*2;if(!K(c,d,0))return!1;let g=Zn(i,o,e,t);for(let[h,P]of g){if(h%2!==0||P%2!==0||!K(h,P,0))return!1;let E=v(0,h,P);if(n.has(E)||r.has(E)||ie(n,0,h,P))return!1}return!0}function Ft(i,o,e,t,n,r,a){let s=Zn(i,o,e,t);for(let[c,d]of s)n.add(v(0,c,d));return ft(s,2,r,0),a.add(`${e}x${t}`),s.length}function Qn({minTarget:i,maxTarget:o,xMax:e,yMax:t}){let n=new Set,r=new Set,a=new Set,s=[];for(let g=2;g<=5;g++)for(let h=2;h<=5;h++)s.push([g,h]);G(s);let c=_t(e,t);G(c);let d=Se(0,s,c,i,o,(g,h,P,E)=>Rt(g,h,P,E,n,r,a)?Ft(g,h,P,E,n,r,a):0);if(d<i){let g=s.filter(([h,P])=>!a.has(`${h}x${P}`));G(g),G(c),d=Se(d,g,c,i,o,(h,P,E,w)=>Rt(h,P,E,w,n,r,a)?Ft(h,P,E,w,n,r,a):0)}if(d<o){let g=!0,h=!1;for(;g&&d<o;){g=!1;let P=h?[...s]:s.filter(([E,w])=>!a.has(`${E}x${w}`));if(P.length===0&&!h){h=!0;continue}G(P),G(c),d=Se(d,P,c,i,o,(E,w,A,V)=>{if(!Rt(E,w,A,V,n,r,a))return 0;let N=Ft(E,w,A,V,n,r,a);return N>0&&(g=!0),N})}}return Pe(n,e,t,2)}function Mt(i,o,e){if(!i&&!o||e.length===0)return e;let t=Math.max(...e.map(w=>w[1])),n=Math.max(...e.map(w=>w[2])),r=t*2+2,a=n*2+2,s=Math.min(36,r+4),c=Math.min(16,a+4);s%2!==0&&s--,c%2!==0&&c--,s<r&&(s=Math.max(t*2,Math.min(36-36%2,r))),c<a&&(c=Math.max(n*2,Math.min(16-16%2,a)));let d=w=>s-w,g=w=>c-w,h=[...e],P=new Set(h.map(([w,A,V])=>v(w,A,V))),E=(w,A,V)=>{if(!K(A,V,w))return;let N=v(w,A,V);P.has(N)||ie(P,w,A,V)||(P.add(N),h.push([w,A,V]))};if(i){let w=[...h];for(let[A,V,N]of w){let se=d(V);se!==V&&E(A,se,N)}}if(o){let w=[...h];for(let[A,V,N]of w){let se=g(N);se!==N&&E(A,V,se)}}return h}function Pt(i,o,e,t){let n=e&&t,r=e&&!t||!e&&t,a;n?a=.25:r?a=.5:a=1;let s=Math.max(1,Math.floor(i*a)),c=Math.max(s,Math.floor(o*a)),d=e?Math.floor(36/2):36,g=t?Math.floor(16/2):16;return{minTarget:s,maxTarget:c,xMax:d,yMax:g}}function Jn(i,o,e){if(e==="checker"){let{minTarget:t,maxTarget:n}=Pt(70,120,i,o),r=i?7:14,a=i?Math.floor(36/2):36,s=o?6:12,c=o?Math.floor(16/2):16,d=Math.floor(Math.random()*(a-r+1))+r,g=Math.floor(Math.random()*(c-s+1))+s;return Mt(i,o,qn({minTarget:t,maxTarget:n,xMax:d,yMax:g}))}if(e==="lines")return Mt(i,o,Kn(Pt(60,80,i,o)));if(e==="rings")return Mt(i,o,Wn(Pt(70,120,i,o)));if(e==="areas")return Mt(i,o,Qn(Pt(60,100,i,o)));throw new Error("Invalid mode")}function Mo(i,o){let e=36,t=0,n=16,r=0;for(let[a,s,c]of i)a===o-1&&(e=Math.min(e,s),t=Math.max(t,s),n=Math.min(n,c),r=Math.max(r,c));return e>t||n>r?null:{minX:Math.max(0,e-2),maxX:Math.min(36,t+2),minY:Math.max(0,n-2),maxY:Math.min(16,r+2)}}function Po(i,o,e){let t=[],n=[],r=[],a=o-1;for(let s=e.minY;s<=e.maxY;s++)for(let c=e.minX;c<=e.maxX;c++){let d=v(o,c,s);if(i.has(d)||!K(c,s,o))continue;let g=i.has(v(a,c,s)),h=i.has(v(a,c-1,s))&&i.has(v(a,c+1,s)),P=i.has(v(a,c-1,s-1))&&i.has(v(a,c+1,s-1))&&i.has(v(a,c-1,s+1))&&i.has(v(a,c+1,s+1));(g||h||P)&&(P?t.push([c,s]):h?n.push([c,s]):g&&r.push([c,s]))}return{bridgeLarge:t,bridgeSmall:n,direct:r}}function Oo(i,o,e){let t=[],n=o-1;if(Math.random()<.25)for(let r=e.minY;r<=e.maxY;r++)for(let a=e.minX;a<=e.maxX;a++){if(!i.has(v(n,a,r)))continue;let s=[[-1,0],[1,0],[0,-1],[0,1]],[c,d]=de(s),g=a+c,h=r+d;if(!K(g,h,o))continue;let P=v(o,g,h);i.has(P)||t.push([g,h])}return t}function vo(i){let o=Math.trunc(Math.random()*i);return o-=o%2,Math.max(o,2)}function bo(i,o,e,t,n,r,a,s,c){if(!Ne(i,o,e,t,n))return!1;if(r||a){let d=s(t),g=c(n);r&&d!==t&&Ne(i,o,e,d,n),a&&g!==n&&Ne(i,o,e,t,g),r&&a&&(d!==t||g!==n)&&Ne(i,o,e,d,g)}return!0}function yo(i,o,e,t){if(i.length>=144)return i;let n=Mo(i,o);if(!n)return i;let r=new Set(i.map(N=>v(N[0],N[1],N[2]))),{bridgeLarge:a,bridgeSmall:s,direct:c}=Po(r,o,n),d=Oo(r,o,n),g=144-i.length,h=vo(g),P=0,{mirX:E,mirY:w}=ei(i),A=[...i],V=N=>{for(let[se,ee]of N){if(P>=h||A.length>=144)return;bo(r,A,o,se,ee,e,t,E,w)&&P++}};return V(a),V(s),V(c),V(d),A}function xo(i,o,e){let t=i;for(let n=1;n<=5&&t.length<144;n++)t=yo(t,n,o,e);return t.length>144?t.slice(0,144):t}function ei(i){let o=i.map(d=>d[1]),e=i.map(d=>d[2]),t=o.length>0?Math.min(...o):0,n=o.length>0?Math.max(...o):36,r=e.length>0?Math.min(...e):0,a=e.length>0?Math.max(...e):16,s=(t+n)/2,c=(r+a)/2;return{mirX:d=>Math.round(2*s-d),mirY:d=>Math.round(2*c-d)}}function wo(i,o,e,t,n,r,a,s,c){let d=[[t,n]];if(r){let g=s(t);g!==t&&d.push([g,n])}if(a){let g=c(n);if(d.some(h=>h[0]===t&&h[1]===g)||d.push([t,g]),r){let h=s(t),P=c(n);d.some(E=>E[0]===h&&E[1]===P)||d.push([h,P])}}for(let[g,h]of d){if(!K(g,h,e))return!1;let P=v(e,g,h);if(o.has(P)||!ut(o,e,g,h)||ie(o,e,g,h))return!1}if(i.length+d.length>144)return!1;for(let[g,h]of d){let P=v(e,g,h);o.add(P),i.push([e,g,h])}return!0}function ko(i,o,e){let t=new Set(i.map(s=>v(s[0],s[1],s[2]))),{mirX:n,mirY:r}=ei(i),a=!0;for(;i.length<144&&a;){a=!1;for(let s=0;s<=5&&i.length<144;s++){let c=[];for(let d=0;d<=16;d++)for(let g=0;g<=36;g++)K(g,d,s)&&(t.has(v(s,g,d))||c.push([g,d]));for(let d=c.length-1;d>0;d--){let g=Math.floor(Math.random()*(d+1));[c[d],c[g]]=[c[g],c[d]]}for(let[d,g]of c){if(i.length>=144)break;wo(i,t,s,d,g,o,e,n,r)&&(a=!0)}}}return i}function So(i){let o=36,e=0,t=16,n=0;for(let[,r,a]of i)o=Math.min(o,r),e=Math.max(e,r),t=Math.min(t,a),n=Math.max(n,a);return{minX:Math.max(0,o-2),maxX:Math.min(36,e+2),minY:Math.max(0,t-2),maxY:Math.min(16,n+2)}}function Eo(i,o,e){for(let t=5;t>=0;t--)for(let n=e.minY;n<=e.maxY;n++)for(let r=e.minX;r<=e.maxX;r++){if(!K(r,n,t))continue;let a=v(t,r,n);if(!o.has(a)&&ut(o,t,r,n)&&!ie(o,t,r,n))return o.add(a),i.push([t,r,n]),!0}return!1}function To(i){let o=new Map;for(let[e,t,n]of i)o.set(v(e,t,n),0);for(let[e,t,n]of i){if(e===0)continue;let r=e-1,a=[v(r,t,n),v(r,t-1,n),v(r,t+1,n),v(r,t-1,n-1),v(r,t+1,n-1),v(r,t-1,n+1),v(r,t+1,n+1)];for(let s of a)o.has(s)&&o.set(s,(o.get(s)||0)+1)}return o}function Lo(i,o){let e=-1,t=-1;for(let n=i.length-1;n>=0;n--){let[r,a,s]=i[n],c=v(r,a,s);(o.get(c)||0)===0&&r>=t&&(e=n,t=r)}return e}function Io(i){if(!Un(i.length))return i;let o=new Set(i.map(r=>v(r[0],r[1],r[2]))),e=So(i);if(Eo(i,o,e)||i.length===0)return i;let t=To(i),n=Lo(i,t);return n>=0?i.splice(n,1):i.pop(),i}function ti(i,o,e){let t=[...i],n=0;for(;t.length<144&&n<50;){n++;let r=t.length;if(t=xo(t,o,e),t.length===r)break}return t.length<144&&(t=ko(t,o,e)),t.length>144&&(t=t.slice(0,144)),t=Io(t),t}var ni=100;function Do(i,o,e){let t=Jn(i,o,e);for(let n=0;n<ni;n++){let r=ti(t,i,o);if(r.length===144)return r}return[]}function ii(i,o,e){let t=i==="random"?Math.random()<.5:i==="true",n=o==="random"?Math.random()<.5:o==="true",r=e==="random"?zn():e,a=[],s=0;for(;a.length!==144||!Yn(a);)if(a=Do(t,n,r),s++,s>ni)return[];return wn(a)}var oi=(()=>{class i{constructor(){this.translate=k(we)}transform(e){let t=`CAT_${e.toUpperCase()}`,n=this.translate.instant(t);return n===t?e:n}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Ce({name:"translateGroup",type:i,pure:!0})}}return i})();var Bo=["scrollHost"];function Ao(i,o){if(i&1){let e=$();p(0,"a",4),b("click",function(){let n=y(e).$index,r=C(2);return x(r.scrollToGroup(n))}),f(1),u(2,"translateGroup"),m()}if(i&2){let e=o.$implicit;l(),O(_(2,1,e.name))}}function Vo(i,o){if(i&1&&(p(0,"div",1),R(1,Ao,3,3,"a",null,U),m()),i&2){let e=C();l(),F(e.groups)}}function Ro(i,o){if(i&1&&f(0),i&2){let e=C(2).$implicit;z(" [",e.layouts.length,"] ")}}function Fo(i,o){if(i&1){let e=$();p(0,"div",6),b("click",function(){y(e);let n=C().$implicit;return x(n.expanded=!n.expanded)}),S(1,"span",7),f(2),u(3,"translateGroup"),p(4,"span",8),T(5,Ro,1,1),m()()}if(i&2){let e=C().$implicit;l(),X("expanded",e.expanded),l(),z(" ",_(3,4,e.name)," "),l(3),L(e.isRandom?-1:5)}}function $o(i,o){if(i&1&&S(0,"app-layout-preview",27),i&2){let e=C().$implicit;M("svg",e.layout.previewSVG)("alt",e.layout.name)}}function jo(i,o){if(i&1&&S(0,"div",30),i&2){let e=C().$implicit;X("selected",e.selected),M("id","item-"+e.layout.id)}}function Go(i,o){if(i&1){let e=$();p(0,"div",26),b("keydown.enter",function(){let n=y(e).$implicit,r=C(4);return x(r.onStart(n))})("click",function(){let n=y(e).$implicit,r=C(4);return x(r.onStart(n))})("appDeferLoad",function(){let n=y(e).$implicit;return x(n.visible=!0)}),T(1,$o,1,2,"app-layout-preview",27)(2,jo,1,3,"div",28),p(3,"div",29),f(4),m()()}if(i&2){let e=o.$implicit;X("selected",e.selected),M("id","item-"+e.layout.id),l(),L(e.visible?1:2),l(3),O(e.layout.name)}}function No(i,o){if(i&1){let e=$();p(0,"div",9),R(1,Go,5,5,"div",11,U),p(3,"div",12)(4,"div",13)(5,"label",14),q(),p(6,"svg",15),S(7,"path",16),m(),f(8),u(9,"translate"),m(),Ve(),p(10,"select",17),b("change",function(n){y(e);let r=C(3);return x(r.randomMirrorXSet(n.target.value))}),p(11,"option",18),f(12),u(13,"translate"),m(),p(14,"option",19),f(15),u(16,"translate"),m(),p(17,"option",20),f(18),u(19,"translate"),m()()(),p(20,"div",13)(21,"label",21),q(),p(22,"svg",22),S(23,"path",23),m(),f(24),u(25,"translate"),m(),Ve(),p(26,"select",24),b("change",function(n){y(e);let r=C(3);return x(r.randomMirrorYSet(n.target.value))}),p(27,"option",18),f(28),u(29,"translate"),m(),p(30,"option",19),f(31),u(32,"translate"),m(),p(33,"option",20),f(34),u(35,"translate"),m()()(),p(36,"div")(37,"button",25),b("click",function(){y(e);let n=C(3);return x(n.generateRandomLayouts())})("keydown.enter",function(){y(e);let n=C(3);return x(n.generateRandomLayouts())}),f(38),u(39,"translate"),m()()()()}if(i&2){let e=C(2).$implicit,t=C();l(),F(e.layouts),l(7),z(" ",_(9,15,"MIRROR_X")," "),l(3),M("selected",t.randomMirrorX==="random"),l(),O(_(13,17,"RANDOM_MIRROR")),l(2),M("selected",t.randomMirrorX==="true"),l(),O(_(16,19,"YES")),l(2),M("selected",t.randomMirrorX==="false"),l(),O(_(19,21,"NO")),l(6),z(" ",_(25,23,"MIRROR_Y")," "),l(3),M("selected",t.randomMirrorY==="random"),l(),O(_(29,25,"RANDOM_MIRROR")),l(2),M("selected",t.randomMirrorY==="true"),l(),O(_(32,27,"YES")),l(2),M("selected",t.randomMirrorY==="false"),l(),O(_(35,29,"NO")),l(4),z(" ",_(39,31,"GENERATE")," ")}}function Ho(i,o){if(i&1&&S(0,"app-layout-preview",27),i&2){let e=C().$implicit;M("svg",e.layout.previewSVG)("alt",e.layout.name)}}function Uo(i,o){if(i&1&&S(0,"div",34),i&2){let e=C().$implicit;X("selected",e.selected)}}function zo(i,o){if(i&1){let e=$();p(0,"div",32)(1,"span",35),u(2,"translate"),f(3),u(4,"duration"),m(),p(5,"a",36),u(6,"translate"),b("click",function(n){y(e);let r=C().$implicit,a=C(4);return x(a.clearBestTimeClick(n,r))}),S(7,"i",37),m()()}if(i&2){let e=C().$implicit;l(),M("title",j(_(2,5,"STATS_BEST"))),l(2),O(_(4,7,e.bestTime)),l(2),M("title",j(_(6,9,"BEST_TIME_CLEAR")))}}function Yo(i,o){if(i&1){let e=$();p(0,"div",33),u(1,"translate"),p(2,"a",4),b("click",function(n){y(e);let r=C().$implicit,a=C(4);return x(a.removeCustomLayout(n,r))}),S(3,"i",38),m()()}i&2&&M("title",j(_(1,2,"CUSTOM_BOARD_DELETE")))}function qo(i,o){if(i&1){let e=$();p(0,"div",26),b("keydown.enter",function(){let n=y(e).$implicit,r=C(4);return x(r.onStart(n))})("click",function(){let n=y(e).$implicit,r=C(4);return x(r.onStart(n))})("appDeferLoad",function(){let n=y(e).$implicit;return x(n.visible=!0)}),T(1,Ho,1,2,"app-layout-preview",27)(2,Uo,1,2,"div",31),T(3,zo,8,11,"div",32),p(4,"div",29),f(5),m(),T(6,Yo,4,4,"div",33),m()}if(i&2){let e=o.$implicit;X("selected",e.selected),M("id","item-"+e.layout.id),l(),L(e.visible?1:2),l(2),L(e.bestTime?3:-1),l(2),O(e.layout.name),l(),L(e.layout.custom?6:-1)}}function Ko(i,o){if(i&1&&(p(0,"div",10),R(1,qo,7,7,"div",11,U),m()),i&2){let e=C(2).$implicit;l(),F(e.layouts)}}function Xo(i,o){if(i&1&&T(0,No,40,33,"div",9)(1,Ko,3,0,"div",10),i&2){let e=C().$implicit;L(e.isRandom?0:1)}}function Wo(i,o){if(i&1&&(p(0,"div",3),T(1,Fo,6,6,"div",5),T(2,Xo,2,1),m()),i&2){let e=o.$implicit,t=o.$index,n=C();M("id",W("group-",t)),l(),L(n.groups.length>1?1:-1),l(),L(e.expanded?2:-1)}}var ri=(()=>{class i{constructor(){this.layouts=B(),this.startEvent=fe(),this.scrollHost=pe.required("scrollHost"),this.groups=[],this.randomMirrorX="random",this.randomMirrorY="random",this.randomGroup={name:"",layouts:[],expanded:!0,isRandom:!0},this.storage=k(ke),this.translate=k(we),this.layoutService=k(he)}ngOnInit(){this.randomMirrorX=this.storage.getLastMirrorX()??"random",this.randomMirrorY=this.storage.getLastMirrorY()??"random",this.buildRandomGroup()}buildRandomGroup(){this.randomGroup.name=this.translate.instant("RANDOM_GROUP");let e=this.translate.instant("RANDOM_LAYOUT");for(let t=0;t<4;t++)this.randomGroup.layouts.push({layout:{id:`${st}${t}`,name:`${e} ${t+1}`,category:this.randomGroup.name,mapping:[]},visible:!1,selected:!1});this.generateRandomLayouts()}randomMirrorXSet(e){this.randomMirrorX=e,this.storage.setLastMirrorX(e),this.generateRandomLayouts()}randomMirrorYSet(e){this.randomMirrorY=e,this.storage.setLastMirrorY(e),this.generateRandomLayouts()}generateRandomLayout(e){let t=ii(this.randomMirrorX,this.randomMirrorY,"random");e.layout.previewSVG=this.layoutService.generatePreview(t),e.layout.mapping=t}generateRandomLayouts(){for(let e of this.randomGroup.layouts)setTimeout(()=>{this.generateRandomLayout(e)})}ngOnChanges(e){this.refresh()}refresh(){let e=this.layouts();if(e){this.buildGroups();let t=this.storage.getLastPlayed(),n=this.layoutService.selectBoardID;this.layoutService.selectBoardID=void 0,n&&e.some(r=>r.id===n)&&(t=n),t&&setTimeout(()=>{this.select(t)})}}onStart(e){e?.visible&&this.startEvent.emit(e.layout)}buildGroups(){let e=[],t={},n=this.layouts()??this.layoutService.layouts.items;for(let r of n){t[r.category]||(t[r.category]={name:r.category,layouts:[],expanded:!0},e.push(t[r.category]));let a=this.storage.getScore(r.id)||{};t[r.category].layouts.push({layout:r,playCount:a.playCount,bestTime:a.bestTime,visible:!1})}e.push(this.randomGroup),this.groups=e}scrollToElement(e,t){if(!e||!t)return;let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=n.top-r.top+t.scrollTop;t.scrollTo({top:a,behavior:"auto"})}scrollToGroup(e){let t=document.getElementById(`group-${e}`);t&&this.scrollToElement(t,this.scrollHost().nativeElement)}scrollToItem(e){let t=document.getElementById(`item-${e}`);t&&this.scrollToElement(t,this.scrollHost().nativeElement)}select(e){if(e){for(let t of this.groups)for(let n of t.layouts)n.selected=n.layout.id===e;this.scrollToItem(e)}}clearBestTimeClick(e,t){e.stopPropagation(),confirm(this.translate.instant("BEST_TIME_CLEAR_SURE"))&&(this.storage.clearScore(t.layout.id),t.bestTime=void 0,t.playCount=void 0)}removeCustomLayout(e,t){e.stopPropagation(),confirm(this.translate.instant("CUSTOM_BOARD_DELETE_SURE"))&&(this.layoutService.removeCustomLayout([t.layout.id]),this.refresh())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-layout-list"]],viewQuery:function(t,n){t&1&&ve(n.scrollHost,Bo,5),t&2&&be()},inputs:{layouts:[1,"layouts"]},outputs:{startEvent:"startEvent"},features:[Oe],decls:5,vars:1,consts:[["scrollHost",""],[1,"headline-anchors"],[1,"groups"],[1,"group",3,"id"],[3,"click"],[1,"group-name"],[1,"group-name",3,"click"],[1,"group-expander"],[1,"group-count"],["appDeferLoadScrollHost","",1,"previews","previews-random"],["appDeferLoadScrollHost","",1,"previews"],["tabindex","0",1,"preview",3,"id","selected"],[1,"preview-random"],[1,"random-options"],["for","random-setting-vertical"],["width","20px","height","20px","viewBox","-2 0 20 20"],["id","focus_vertical-[#842]","d","M7,20 L7,0 L9,0 L9,20 Z M0,2 L5,2 L5,4 L2,4 L2,7 L0,7 Z M11,2 L16,2 L16,7 L14,7 L14,4 L11,4 Z M0,18 L0,13 L2,13 L2,16 L5,16 L5,18 Z M16,18 L11,18 L11,16 L14,16 L14,13 L16,13 Z"],["id","random-setting-vertical",3,"change"],["value","random",3,"selected"],["value","true",3,"selected"],["value","false",3,"selected"],["for","random-setting-horizontal"],["width","20px","height","20px","viewBox","0 -2 20 20"],["d","M0,9 L0,7 L20,7 L20,9 Z M2,5 L2,0 L7,0 L7,2 L4,2 L4,5 Z M18,0 L18,5 L16,5 L16,2 L13,2 L13,0 Z M2,16 L2,11 L4,11 L4,14 L7,14 L7,16 Z M18,16 L13,16 L13,14 L16,14 L16,11 L18,11 Z"],["id","random-setting-horizontal",3,"change"],[3,"click","keydown.enter"],["tabindex","0",1,"preview",3,"keydown.enter","click","appDeferLoad","id"],[1,"svg-board",3,"svg","alt"],[1,"preview-placeholder",3,"id","selected"],[1,"preview-name"],[1,"preview-placeholder",3,"id"],[1,"preview-placeholder",3,"selected"],[1,"preview-best-time"],[1,"preview-custom",3,"title"],[1,"preview-placeholder"],[3,"title"],[3,"click","title"],[1,"icon-cancel-squared"],[1,"icon-trash-empty"]],template:function(t,n){t&1&&(T(0,Vo,3,0,"div",1),p(1,"div",2,0),R(3,Wo,3,4,"div",3,U),m()),t&2&&(L(n.groups.length>1?0:-1),l(3),F(n.groups))},dependencies:[xn,Nn,Hn,ht,Q,oi],styles:['[_nghost-%COMP%]{display:flex;overflow:hidden;flex-direction:column;flex:1;border:1px solid var(--card-layout-color-border);border-radius:4px}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{border-bottom:1px solid var(--card-layout-color-border);width:100%;display:flex;flex-wrap:wrap;padding-top:2px;padding-bottom:2px;color:var(--dialog-text-color);white-space:nowrap}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;flex:1 1 140px;padding:2px 4px;font-size:.9em;cursor:pointer;text-align:center}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--dialog-headline-color);background-color:var(--dialog-background-color-hover)}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{justify-content:center}}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]{overflow:hidden auto;width:100%;flex:1}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{border-top:1px solid var(--card-layout-color-border);color:var(--main-content-text-color);padding-top:12px;padding-bottom:12px;height:48px;display:flex;justify-content:space-between;align-items:center;text-align:center;cursor:pointer}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]:hover{color:var(--dialog-headline-color);background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander[_ngcontent-%COMP%]{margin-left:20px;min-width:20px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander[_ngcontent-%COMP%]:after{content:"+";color:var(--main-content-text-color-muted);font-size:1.2em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander.expanded[_ngcontent-%COMP%]:after{content:"-"}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-count[_ngcontent-%COMP%]{font-size:.8em;color:var(--main-content-text-color-muted);margin-right:20px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]:first-of-type   .group-name[_ngcontent-%COMP%]{border-top:inherit}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{padding:20px 10px 10px;display:flex;flex-direction:column;gap:10px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;align-items:center;flex-direction:row;font-size:.9em;display:flex}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--main-content-text-color)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-evenly;gap:4px;padding-bottom:12px;box-sizing:border-box}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-top:8px;width:300px;height:200px;cursor:pointer;border:1px solid var(--card-layout-color-border);background-color:var(--card-layout-color-bg);display:block;position:relative;overflow:clip;box-sizing:border-box}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{display:block;width:100%;height:200px;text-align:center;padding-bottom:1.5em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]{position:absolute;right:0;background-color:var(--preview-overlay-background);color:var(--preview-overlay-text);text-shadow:1px 1px var(--preview-overlay-text-shadow);border-bottom-left-radius:3px;padding:3px 3px 3px 6px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;min-width:1.2em;text-align:right;transition:all .1s;margin-top:-1px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.3)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%]{position:absolute;width:100%;height:1.5em;display:block;bottom:0;background-color:var(--card-text-color-bg);color:var(--card-text-color);text-align:center;font-size:.8em;padding:2px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]{top:0;display:flex;flex-direction:row;justify-content:center}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]{bottom:0;padding:2px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus{background-color:var(--card-layout-color-bg-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover   .preview-name[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus   .preview-name[_ngcontent-%COMP%]{background-color:var(--card-text-color-bg-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus   .preview-custom[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]{border:1px solid var(--card-layout-color-border-selected);box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}@media only screen and (max-width:2200px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:200px;height:190px}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:49%}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:96%}}@media only screen and (max-height:500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:120px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%;height:100%}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-1[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-2[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-3[_ngcontent-%COMP%]{display:none}}@supports (display: grid){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{display:grid;gap:4px;padding-right:4px;padding-bottom:12px;align-content:start;grid-template-columns:repeat(6,1fr);place-items:stretch stretch}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr 2fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-top:0;width:100%;max-width:none;min-width:0;box-sizing:border-box;height:200px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%;height:200px}@media only screen and (max-width:2200px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:190px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{height:190px}}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{grid-column:1/-1;flex-direction:row;justify-content:space-around}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-3[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-2[_ngcontent-%COMP%]{display:none}}@media only screen and (max-height:500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:120px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{height:100%}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:1fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr}}}']})}}return i})();function Zo(i,o){if(i&1&&(p(0,"option",5),f(1),u(2,"translate"),u(3,"translate"),m()),i&2){let e=o.$implicit,t=C();M("value",e.id)("selected",t.buildMode===e.id),l(),Re("",_(2,4,e.id)," [",_(3,6,e.id+"_DESC"),"]")}}function Qo(i,o){if(i&1&&(f(0),u(1,"translate")),i&2){let e=o.$implicit,t=o.$index,n=o.$count;Re(" ",_(1,2,e.title),"",t!==n-1?", ":""," ")}}function Jo(i,o){if(i&1&&(f(0," ["),R(1,Qo,2,4,null,null,U),f(3,"] ")),i&2){let e=C().$implicit;l(),F(e.features)}}function er(i,o){if(i&1&&(p(0,"option",5),f(1),u(2,"translate"),T(3,Jo,4,0),m()),i&2){let e=o.$implicit,t=C();M("value",e.id)("selected",t.gameMode()===e.id),l(),z("",_(2,4,e.id)," "),l(2),L(e.features.length>0?3:-1)}}var ai=(()=>{class i{constructor(){this.startEvent=fe(),this.gameMode=We.required(),this.buildMode=Ze,this.buildModes=un,this.gameModes=fn,this.layoutService=k(he),this.storage=k(ke)}onStart(e){e&&(this.startEvent.emit({layout:e,buildMode:this.buildMode,gameMode:this.gameMode()}),this.storage.storeLastPlayed(e.id))}randomGame(){let e=Math.floor(Math.random()*this.layoutService.layouts.items.length);this.onStart(this.layoutService.layouts.items[e])}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-choose-layout"]],inputs:{gameMode:[1,"gameMode"]},outputs:{startEvent:"startEvent",gameMode:"gameModeChange"},decls:20,vars:10,consts:[[3,"startEvent","layouts"],[1,"choose-buttons"],[1,"generator"],["for","board-generator-select"],["id","board-generator-select",3,"change"],[3,"value","selected"],[1,"mode"],["for","game-mode-select"],["id","game-mode-select",3,"change"],[1,"start-links"],[3,"click"]],template:function(t,n){t&1&&(p(0,"app-layout-list",0),b("startEvent",function(a){return n.onStart(a)}),m(),p(1,"div",1)(2,"div",2)(3,"label",3),f(4),u(5,"translate"),m(),p(6,"select",4),b("change",function(a){return n.buildMode=a.target.value}),R(7,Zo,4,8,"option",5,U),m()(),p(9,"div",6)(10,"label",7),f(11),u(12,"translate"),m(),p(13,"select",8),b("change",function(a){return n.gameMode.set(a.target.value)}),R(14,er,4,6,"option",5,U),m()(),p(16,"div",9)(17,"button",10),b("click",function(){return n.randomGame()}),f(18),u(19,"translate"),m()()()),t&2&&(M("layouts",n.layoutService.layouts.items),l(4),z("",_(5,4,"BOARD_GENERATOR"),":"),l(3),F(n.buildModes),l(4),z("",_(12,6,"GAME_MODE"),":"),l(3),F(n.gameModes),l(4),O(_(19,8,"START_RANDOM")))},dependencies:[ri,Q],styles:["[_nghost-%COMP%]{padding:0;margin:0;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-flow:row nowrap;align-items:flex-end;gap:8px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{text-align:right;display:inline-block}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:2px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:30%}@media only screen and (max-height:700px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:50%}}@media only screen and (max-height:500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{padding-top:4px}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px}}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:unset}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7em}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:unset}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{display:none}}"]})}}return i})();var Ot=class{constructor(){this.gestureIndicators=[]}hide(o){let e=o;e&&setTimeout(()=>{e.state="hidden",setTimeout(()=>{this.removeIndicator(o)},250)},500)}removeIndicator(o){for(let e=0;e<this.gestureIndicators.length;e++){let t=this.gestureIndicators[e];if(t.x===o.x&&t.y===o.y){this.gestureIndicators.splice(e,1);break}}}setSize(o,e){this.gestureIndicators[o].size=e,this.gestureIndicators[o].top=this.gestureIndicators[o].y-e/2,this.gestureIndicators[o].left=this.gestureIndicators[o].x-e/2}display(o,e,t){if(o>0&&e>0){let n={x:o,y:e,size:t,top:e-t/2,left:o-t/2,state:"hidden"};return this.gestureIndicators.push(n),setTimeout(()=>{n.state="visible"},100),n}}};var si=(()=>{class i{transform(e,t){return`${t}${e??""}`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Ce({name:"prefix",type:i,pure:!0})}}return i})();var tr=(i,o)=>o.source.z+":"+o.source.x+":"+o.source.y;function nr(i,o){if(i&1&&(q(),p(0,"title"),f(1),u(2,"translate"),m()),i&2){let e=C().$implicit;l(),O(_(2,1,e.url))}}function ir(i,o){if(i&1){let e=$();q(),p(0,"g",9),b("mouseup",function(n){let r=y(e).$implicit,a=C();return x(a.onClickUp(n,r))})("touchend",function(n){let r=y(e).$implicit,a=C();return x(a.onTouchTileEnd(n,r))}),p(1,"g",10),T(2,nr,3,3,":svg:title"),S(3,"rect",11)(4,"rect",12)(5,"use",13),u(6,"prefix"),S(7,"use",14),m()()}if(i&2){let e=o.$implicit,t=C();X("selected",e.source.selected)("hidden",e.source.picked)("hinted",e.source.hinted)("wiggle",e.source.effects==null?null:e.source.effects.wiggle),Z("transform",e.pos.translate),l(2),L(e.url?2:-1),l(3),Z("href",Jt(6,15,e.url,t.urlPrefix),null,"xlink")("x",t.imagePos[0])("y",t.imagePos[1])("width",t.imagePos[2])("height",t.imagePos[3])}}function or(i,o){if(i&1&&S(0,"div",15),i&2){let e=o.$implicit;Xe("top",e.top,"px")("left",e.left,"px")("width",e.size,"px")("height",e.size,"px")("transform",e.transform),X("visible",e.state==="visible")}}var li=1470,ci=960;function vt(i,o,e){return Math.min(Math.max(o,i),e)}var di=(()=>{class i{constructor(){this.background=B(),this.theme=B(),this.imageSet=B(),this.kyodaiUrl=B(),this.pattern=B(),this.stones=B(),this.clickEvent=fe(),this.indicators=new Ot,this.drawStones=[],this.rotate=!1,this.transformSVG="",this.transformStage="",this.viewport=`0 0 ${li} ${ci}`,this.prefix="",this.urlPrefix="",this.imagePos=[1,1,69,88],this.imageCut=[0,0,65,90],this.scale=1,this.panX=0,this.panY=0,this.bounds=[0,0,li,ci],this.lastPinch=0,this.touchPoints=[],this.initialDistance=0,this.initialScale=1,this.lastTouchX=0,this.lastTouchY=0,this.initialTouchX=0,this.initialTouchY=0,this.hasTouchPanMoved=!1,this.hasPinchChanged=!1,this.lastMouseX=0,this.lastMouseY=0,this.initialMouseX=0,this.initialMouseY=0,this.isPanning=!1,this.isPinching=!1,this.app=k(ge),this.patternService=k(Fn),this.element=k(_e)}ngOnInit(){this.resize(window)}ngOnChanges(e){if(e.stones&&this.updateStones(e.stones.currentValue),e.background&&this.updateBackground(e.background.currentValue),e.theme||e.pattern){let t=this.background();t&&this.updateBackground(t)}if(e.imageSet){this.prefix=`b_${e.imageSet.currentValue}_`,this.urlPrefix=`#b_${e.imageSet.currentValue}_`;let t=dt(e.imageSet.currentValue);this.imagePos=t?[0,0,75,100]:[6,6,63,88],this.imageCut=t?[1,1,73,98]:[0,0,65,90]}}onWheel(e){e.preventDefault();let n=(e.deltaY<0?1:-1)===1?this.scale+.15:this.scale-.15;this.zoomSVGValue(n,e.clientX,e.clientY);let r=this.indicators.display(e.clientX,e.clientY,n*10);this.indicators.hide(r)}onResize(e){let t=e.target;t&&this.resize(t)}onMouseDown(e){this.scale>1&&(e.preventDefault(),this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,this.initialMouseX=e.clientX,this.initialMouseY=e.clientY)}onMouseMove(e){if(this.scale>1){if(!this.isPanning&&this.initialMouseX!==0&&this.initialMouseY!==0){let t=e.clientX-this.initialMouseX,n=e.clientY-this.initialMouseY;Math.hypot(t,n)>=10&&(this.isPanning=!0)}this.isPanning&&(e.preventDefault(),this.updatePanning(e))}}onMouseUp(e){let t=e.type==="mouseleave";if(this.isPanning)e.preventDefault(),this.updatePanning(e);else if(!t){if(this.scale===1)this.clickEvent.emit(void 0);else if(this.initialMouseX!==0&&this.initialMouseY!==0){let n=e.clientX-this.initialMouseX,r=e.clientY-this.initialMouseY;Math.hypot(n,r)<4&&this.clickEvent.emit(void 0)}}this.stopPanning()}onTouchTileEnd(e,t){this.hasPinchChanged||this.hasTouchPanMoved||this.clickEvent.emit(t?.source)}onClickUp(e,t){this.initialMouseX=0,this.initialMouseY=0,this.isPanning?(this.updatePanning(e),this.stopPanning()):(this.clickEvent.emit(t?.source),e.stopPropagation())}onTouchStart(e){e.preventDefault(),this.touchPoints=[],this.hasTouchPanMoved=!1,this.hasPinchChanged=!1;let t=Array.from(e.touches);for(let n of t)this.touchPoints.push({x:n.clientX,y:n.clientY,identifier:n.identifier});if(this.touchPoints.length===1)this.lastTouchX=this.touchPoints[0].x,this.lastTouchY=this.touchPoints[0].y,this.initialTouchX=this.touchPoints[0].x,this.initialTouchY=this.touchPoints[0].y,this.isPanning=!0;else if(this.touchPoints.length===2){this.isPanning=!1,this.isPinching=!0,this.initialDistance=this.getDistance(this.touchPoints[0],this.touchPoints[1]),this.initialScale=this.scale,this.indicators.gestureIndicators=[];let n=(this.touchPoints[0].x+this.touchPoints[1].x)/2,r=(this.touchPoints[0].y+this.touchPoints[1].y)/2;this.indicators.display(n,r,30),this.lastPinch=Date.now()}}onTouchMove(e){e.preventDefault(),this.touchPoints=[];let t=Array.from(e.touches);for(let n of t)this.touchPoints.push({x:n.clientX,y:n.clientY,identifier:n.identifier});if(this.isPinching&&this.touchPoints.length===2){let r=this.getDistance(this.touchPoints[0],this.touchPoints[1])/this.initialDistance,a=(this.touchPoints[0].x+this.touchPoints[1].x)/2,s=(this.touchPoints[0].y+this.touchPoints[1].y)/2;if(this.indicators.gestureIndicators[0]){let d=this.indicators.gestureIndicators[0];d.x=a,d.y=s,d.top=s-d.size/2,d.left=a-d.size/2}else this.indicators.display(a,s,30);let c=vt(30*r,10,80);this.indicators.setSize(0,c),Math.abs(r-1)>=.1&&(this.hasPinchChanged=!0),this.lastPinch=Date.now()}else if(this.isPanning&&this.touchPoints.length===1&&this.scale>1&&Date.now()-this.lastPinch>600){let n=this.touchPoints[0].x,r=this.touchPoints[0].y,a=n-this.lastTouchX,s=r-this.lastTouchY;if(Math.hypot(n-this.initialTouchX,r-this.initialTouchY)>=10){this.hasTouchPanMoved=!0;let d=this.indicators.display(n,r,10);this.indicators.hide(d)}this.setPanValue(this.panX+a,this.panY+s),this.lastTouchX=n,this.lastTouchY=r}}onTouchEnd(e){if(e.preventDefault(),this.isPinching){let n=this.indicators.gestureIndicators.at(0);n&&this.indicators.hide(n);let r=Array.from(e.touches).map(c=>({x:c.clientX,y:c.clientY,identifier:c.identifier})),a=Array.from(e.changedTouches).map(c=>({x:c.clientX,y:c.clientY,identifier:c.identifier})),s=[];if(r.length>=2?s.push(r[0],r[1]):r.length===1&&a.length>0?s.push(r[0],a[0]):a.length>=2&&s.push(a[0],a[1]),s.length===2){let d=this.getDistance(s[0],s[1])/this.initialDistance,g=this.initialScale;Math.abs(d-1)>=.1&&(g=this.initialScale*d);let h=(s[0].x+s[1].x)/2,P=(s[0].y+s[1].y)/2;this.zoomSVGValue(g,h,P)}this.isPinching=!1,this.lastPinch=Date.now()}else this.isPanning&&(this.updateTransform(),this.isPanning=!1);this.touchPoints=[];let t=Array.from(e.touches);for(let n of t)this.touchPoints.push({x:n.clientX,y:n.clientY,identifier:n.identifier});this.touchPoints.length===0&&(this.hasTouchPanMoved=!1,this.hasPinchChanged=!1,this.initialTouchX=0,this.initialTouchY=0)}updatePanning(e){let t=e.clientX-this.lastMouseX,n=e.clientY-this.lastMouseY,r=this.indicators.display(e.clientX,e.clientY,10);this.indicators.hide(r),this.setPanValue(this.panX+t,this.panY+n),this.lastMouseX=e.clientX,this.lastMouseY=e.clientY,this.updateTransform()}stopPanning(){this.isPanning=!1,this.initialMouseX=0,this.initialMouseY=0}setPanValue(e,t){let n=this.element.nativeElement.offsetWidth||0,r=this.element.nativeElement.offsetHeight||0,a=50,s=Math.max(0,(this.scale-1)*n),c=Math.max(0,(this.scale-1)*r),d=-s-a,g=a,h=-c-a,P=a;this.panX=vt(e,d,g),this.panY=vt(t,h,P)}zoomSVGValue(e,t,n){let r=this.scale,a=vt(e,1,2);if(a!==r){if(a<1.01)this.scale=1,this.panX=0,this.panY=0;else{let s=(t-this.panX)/this.scale,c=(n-this.panY)/this.scale,d=t-s*a,g=n-c*a;this.scale=a,this.setPanValue(d,g)}this.updateTransform()}}updateViewPort(){window.requestAnimationFrame(()=>{this.setViewPort()})}updateTransform(){window.requestAnimationFrame(()=>{this.setTransform()})}setTransform(){let e=this.scale>1?` scale(${this.scale})`:"";if(this.transformSVG=`translate(${this.panX}px, ${this.panY}px)${e}`,this.rotate){let[t,n,r,a]=It(this.bounds),s=t+r/2,c=n+a/2;this.transformStage=`rotate(90 ${s} ${c})`}else this.transformStage=""}getDistance(e,t){let n=t.x-e.x,r=t.y-e.y;return Math.hypot(n,r)}resize(e){let t=e.innerHeight>e.innerWidth;this.panX=0,this.panY=0,this.scale=1,this.updateTransform(),t!==this.rotate&&(this.rotate=t),this.updateViewPort()}setViewPort(){let[e,t,n,r]=It(this.bounds);if(this.rotate){let a=e+n/2,s=t+r/2,c=r,d=n;e=a-c/2,t=s-d/2,n=c,r=d}this.viewport=`${e} ${t} ${n} ${r}`}updateStones(e){if(!e)return;this.scale=1,this.panX=0,this.panY=0;let t=e.filter(n=>n!==void 0).map(n=>({z:n.z,x:n.x,y:n.y,v:n.v,visible:!0,url:n.img?.id,pos:vn(n.z,n.x,n.y),source:n,className:n.effects?.wiggle?"wiggle":void 0}));this.bounds=yn(t),this.drawStones=bn(t),this.setViewPort(),this.setTransform()}cssBarColors(){return(Fe.find(t=>t.id===this.app.settings.theme)??Fe[0]).colors}updateMahBackground(e){this.backgroundUrl="",e&&this.patternService.svgDataUrl(e,this.cssBarColors()).then(t=>this.backgroundUrl=t).catch(console.error)}updateBackground(e){let t=Je.find(n=>n.img===e);if(!t){this.backgroundUrl=void 0;return}if(this.backgroundRepeat=!!t.repeat,t.type==="MAH"){this.updateMahBackground(this.pattern());return}this.backgroundUrl=`url("assets/img/${t.img}.${t.type??"jpg"}")`}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-board"]],hostVars:4,hostBindings:function(t,n){t&1&&b("wheel",function(a){return n.onWheel(a)})("resize",function(a){return n.onResize(a)},Xt)("mousedown",function(a){return n.onMouseDown(a)})("mousemove",function(a){return n.onMouseMove(a)})("mouseup",function(a){return n.onMouseUp(a)})("mouseleave",function(a){return n.onMouseUp(a)})("touchstart",function(a){return n.onTouchStart(a)})("touchmove",function(a){return n.onTouchMove(a)})("touchend",function(a){return n.onTouchEnd(a)})("touchcancel",function(a){return n.onTouchEnd(a)}),t&2&&(Xe("background-image",n.backgroundUrl),X("background-repeat",n.backgroundRepeat))},inputs:{background:[1,"background"],theme:[1,"theme"],imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],pattern:[1,"pattern"],stones:[1,"stones"]},outputs:{clickEvent:"clickEvent"},features:[Oe],decls:14,vars:18,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",1,"board-svg",3,"mouseup"],["id","front","width","300","height","400","viewBox","0 0 300 400"],["transform","translate(28,-614)","d","M -4.7687833,775.07096 C -9.6501835,741.99485 -16.84552,674.23676 -1.2788716,652.0641 18.998297,625.94378 233.50094,631.63117 263.31435,653.90999 276.21398,662.64856 70.349579,663.12124 47.099353,691.74479 24.390958,719.11242 0.65060847,818.18718 -4.7687833,775.07096 Z",2,"fill","#ffffff","fill-opacity","0.3","fill-rule","evenodd","stroke","none","filter","blur(10px)"],["id","mah-image-clip"],["rx","10","ry","10","fill","#fff"],["app-image-set-loader","",3,"imageSet","kyodaiUrl","dark","prefix"],[1,"stage"],[1,"draw",3,"selected","hidden","hinted","wiggle"],[1,"gesture-indicator",3,"top","left","width","height","transform","visible"],[1,"draw",3,"mouseup","touchend"],[1,"tile"],["x","3","y","3","width","75","height","100","rx","10","ry","10",1,"shadow"],["x","0","y","0","width","75","height","100","rx","10","ry","10",1,"stone"],["clip-path","url(#mah-image-clip)"],[0,"xlink","href","#front","x","0","y","0","width","75","height","100",1,"front"],[1,"gesture-indicator"]],template:function(t,n){t&1&&(q(),p(0,"svg",0),b("mouseup",function(a){return n.onMouseUp(a)}),p(1,"defs")(2,"svg",1),S(3,"path",2),m(),p(4,"clipPath",3),S(5,"rect",4),m()(),p(6,"style"),f(7," g.tile { transform-origin: 50px 32.5px; opacity: 1; transition: transform 120ms ease-in-out; } @keyframes mah-wiggle { 0% { transform: rotate(0deg); } 20% { transform: rotate(-3deg); } 40% { transform: rotate(3deg); } 60% { transform: rotate(-1deg); } 80% { transform: rotate(1deg); } 100% { transform: rotate(0deg); } } g.wiggle g.tile { animation: mah-wiggle 250ms ease-in-out; } g.hinted g.tile { transform: scale(1.12); } g.hinted g.tile > rect { stroke: #9f0000; stroke-width: 3px; } @keyframes mah-select-pop { 0% { transform: scale(1); } 60% { transform: scale(1.08); } 100% { transform: scale(1.04); } } g.selected g.tile { transform: scale(1.04); animation: mah-select-pop 140ms ease-out; } g.selected g.tile rect.stone { stroke: black; fill: #F8EABB; } g.selected.hinted g.tile { transform: scale(1.14); animation: none; } g.selected.hinted g.tile rect.stone { stroke: #9f0000; stroke-width: 3px; } g.draw rect.shadow { fill: #191919; opacity: 0.6; stroke-width: 1; stroke: black; } g.draw rect.stone { fill: #FFF9E5; stroke-width: 1; stroke: black; } g.hidden { opacity: 0; } g.stage.contrast g.draw rect.stone { stroke-width: 2; } g.stage.contrast g.draw rect.shadow { opacity: 0.7; } g.stage.dark g.draw rect.shadow { opacity: 0.6; stroke-width: 1; fill: #9d948c; stroke: green; } g.stage.dark g.draw rect.stone { fill: #000; stroke-width: 1; stroke: #9d948c; } g.stage.dark g.selected g.tile rect.stone { stroke: #F8EABB; fill: black; } g.stage.dark g.hinted g.tile rect.stone { stroke: #ef0202; } g.stage.dark g.selected.hinted g.tile rect.stone { stroke: #ef0202; } g.stage.dark.contrast g.draw rect.stone { stroke-width: 2; } g.stage.dark.contrast g.draw rect.shadow { opacity: 0.7; } g.stage.dark .front { display: none; } g.stage.dark .front { display: unset; } @media (prefers-reduced-motion: reduce) { g.tile { transition: none; } g.wiggle g.tile { animation: none; } g.selected g.tile { animation: none; } } "),m(),S(8,"defs",5),p(9,"g",6),R(10,ir,8,18,":svg:g",7,tr),m()(),R(12,or,1,12,"div",8,U)),t&2&&(Xe("transform",n.transformSVG),X("rotate",n.rotate),Z("viewBox",n.viewport),l(5),Z("x",n.imageCut[0])("y",n.imageCut[1])("width",n.imageCut[2])("height",n.imageCut[3]),l(3),M("imageSet",n.imageSet())("kyodaiUrl",n.kyodaiUrl())("dark",n.app.settings.dark)("prefix",n.prefix),l(),X("dark",n.app.settings.dark)("contrast",n.app.settings.contrast),Z("transform",n.transformStage),l(),F(n.drawStones),l(2),F(n.indicators.gestureIndicators))},dependencies:[gt,si,Q],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;background-repeat:repeat;background-size:cover}.background-repeat[_nghost-%COMP%]{background-size:unset}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform-origin:0 0 0;transform:translate(0) scale(1);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .gesture-indicator[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;height:50px;width:50px;display:block;border-radius:50%;text-align:center;line-height:45px;z-index:10;background-color:var(--gesture-indicator);transform:scale(0);transition:transform .15s ease-in-out}[_nghost-%COMP%]   .gesture-indicator.visible[_ngcontent-%COMP%]{transform:scale(1.5)}"]})}}return i})();var pi=(()=>{class i{transform(e){return e===Le}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Ce({name:"gameModeEasy",type:i,pure:!0})}}return i})(),gi=(()=>{class i{transform(e){return e===Le||e===_n}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275pipe=Ce({name:"gameModeStandard",type:i,pure:!0})}}return i})();var rr=["info"],ar=["settings"],sr=["help"],lr=["newgame"];function cr(i,o){if(i&1){let e=$();p(0,"button",23),u(1,"translate"),b("click",function(){y(e);let n=C();return x(n.enterFullScreen())}),S(2,"i",38),m()}i&2&&M("title",j(_(1,2,"FULLSCREEN")))}function dr(i,o){i&1&&S(0,"app-help")}function pr(i,o){i&1&&S(0,"app-tiles-info")}function gr(i,o){i&1&&S(0,"app-settings")}function mr(i,o){if(i&1){let e=$();p(0,"app-choose-layout",39),b("startEvent",function(n){y(e);let r=C();return x(r.startGame(n))}),m()}if(i&2){let e=C();M("gameMode",e.game.mode)}}function hr(i,o){if(i&1&&(p(0,"div"),f(1),u(2,"translate"),m()),i&2){let e=C(2);l(),O(_(2,1,e.game.message.messageID))}}function ur(i,o){if(i&1&&(p(0,"div"),f(1),u(2,"duration"),m()),i&2){let e=C(2);l(),O(_(2,1,e.game.message.playTime))}}function _r(i,o){if(i&1){let e=$();p(0,"div",41)(1,"button",42),b("click",function(n){y(e);let r=C(2);return x(r.onShuffleContinue(n))}),S(2,"i",13),p(3,"span",11),f(4),u(5,"translate"),m()(),p(6,"button",43),b("click",function(n){y(e);let r=C(2);return x(r.onSurrenderGame(n))}),S(7,"i",16),p(8,"span",11),f(9),u(10,"translate"),m()()()}i&2&&(l(4),O(_(5,2,"SHUFFLE")),l(5),O(_(10,4,"RESTART")))}function fr(i,o){if(i&1){let e=$();p(0,"div",40),b("click",function(){y(e);let n=C();return x(n.clickMessage())}),T(1,hr,3,3,"div"),T(2,ur,3,3,"div"),T(3,_r,11,6,"div",41),m()}if(i&2){let e=C();l(),L(e.game.message.messageID?1:-1),l(),L(e.game.message.playTime?2:-1),l(),L(e.game.message.askShuffle?3:-1)}}var mi=(()=>{class i{constructor(){this.info=pe.required("info"),this.settings=pe.required("settings"),this.help=pe.required("help"),this.newgame=pe.required("newgame"),this.app=k(ge),this.fullScreenEnabled=!0,this.title="",this.workerService=k(nt),this.game=this.app.game,this.fullScreenEnabled=this.canFullscreen(),this.title=`${this.app.name} v${J.version}`}showNewGame(){this.newgame().visible.set(!0)}handleKeyDownEventKey(e){switch(e){case"h":{this.help().toggle();break}case"i":{this.info().toggle();break}case"s":{this.settings().toggle();break}case"t":{this.game.hint();break}case"m":{this.game.shuffle();break}case"g":{this.debugSolve();break}case"u":{this.game.back();break}case"n":{this.game.pause(),this.newgame().toggle();break}case" ":case"space":case"Space":case"spacebar":case"Spacebar":case"p":{this.game.isRunning()?this.game.pause():this.game.isPaused()&&this.game.resume();break}default:return!1}return!0}handleKeyDownDialogExit(){let e=this.help();if(e.visible())return e.toggle(),!0;let t=this.newgame();if(t.visible())return t.toggle(),!0;let n=this.info();if(n.visible())return n.toggle(),!0;let r=this.settings();return r.visible()?(r.toggle(),!0):!1}handleKeyDownEvent(e){e.key==="Escape"&&this.handleKeyDownDialogExit()||(e.target?.nodeName??"").toLocaleLowerCase()==="input"||this.handleKeyDownEventKey(e.key)&&e.preventDefault()}stoneClick(e){this.game.click(e)}isFullscreenEnabled(){let e=window.document;if(typeof e.fullscreenEnabled=="boolean")return e.fullscreenEnabled;let t=document.documentElement;return!!(t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen)}canFullscreen(){return J.mobile?!1:this.isFullscreenEnabled()}isFullscreen(){let e=window.document;return!!(e.fullscreenElement||e.webkitIsFullScreen||e.mozFullScreen)}exitFullscreen(){let e=window.document;e.exitFullscreen?e.exitFullscreen().catch(t=>{console.error(t)}):e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}requestFullscreen(){let e=document.body;e.requestFullscreen?e.requestFullscreen().catch(t=>{console.error(t)}):e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()}enterFullScreen(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}newGame(){this.game.pause(),this.showNewGame()}startGame(e){this.newgame().visible.set(!1),this.game.reset(),this.game.start(e.layout,e.buildMode,e.gameMode)}toggleDialogState(e){e?this.app.game.isPaused()||this.app.game.pause():(this.app.settings.save(),this.app.game.isPaused()&&this.app.game.resume())}clickMessage(){if(this.game.isPaused()){if(this.game.message?.askShuffle)return;this.game.resume()}else this.game.reset(),this.showNewGame()}onShuffleContinue(e){e.stopPropagation(),this.game.gameOverEasyModeShuffle()}onSurrenderGame(e){e.stopPropagation(),this.game.surrender(),this.showNewGame()}debugSolve(){if(J.production)return;let e=(t,n)=>{let r=n[t],a=n[t+1];if(!r||!a)return;let s=this.game.board.stones.filter(c=>c.z===r[0]&&c.x===r[1]&&c.y===r[2]||c.z===a[0]&&c.x===a[1]&&c.y===a[2]);if(s.length>1){for(let c of s)c.selected=!0;setTimeout(()=>{this.game.board.pick(s[0],s[1]),e(t+2,n)},300)}};this.workerService.solveGame(this.game.board.stones.filter(t=>!t.picked).map(t=>t.toPosition()),t=>{e(0,t.order)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-game-component"]],viewQuery:function(t,n){t&1&&ve(n.info,rr,5)(n.settings,ar,5)(n.help,sr,5)(n.newgame,lr,5),t&2&&be(4)},hostBindings:function(t,n){t&1&&b("keydown",function(a){return n.handleKeyDownEvent(a)},Ye)},decls:90,vars:102,consts:[["help",""],["info",""],["settings",""],["newgame",""],[1,"controls","controls-top"],[1,"ctrl","ctrl-name"],[1,"button",3,"click","title"],[1,"icon-logo"],[1,"name"],[1,"ctrl","ctrl-game"],[1,"icon-pause"],[1,"label"],[1,"button","feature",3,"click","title"],[1,"icon-spin1"],[1,"icon-undo"],[1,"icon-lightbulb"],[1,"icon-loop"],[1,"board",3,"clickEvent","stones","theme","imageSet","kyodaiUrl","background","pattern"],[1,"controls","controls-bottom"],[1,"ctrl","ctrl-stats"],["title","Menu","aria-haspopup","true",1,"button","menu-button"],[1,"icon-menu"],["role","menu",1,"menu"],["role","menuitem",1,"button",3,"click","title"],[1,"icon-cog"],[1,"icon-volume-low"],[1,"icon-calendar"],["role","menuitem",1,"button",3,"title"],[1,"ctrl","ctrl-time"],[1,"label","text"],[1,"time"],["className","overlay-help",3,"clickEvent","title"],["className","overlay-info",3,"clickEvent","title"],["className","overlay-settings",3,"clickEvent","title"],["className","overlay-newgame",3,"clickEvent","title"],[1,"choose",3,"gameMode"],["className","overlay-message",3,"clickEvent","visible","noCloseButton"],[1,"overlay-message-message"],[1,"icon-resize-full-alt"],[1,"choose",3,"startEvent","gameMode"],[1,"overlay-message-message",3,"click"],[1,"overlay-message-actions"],[1,"button","feature",3,"click"],[1,"button",3,"click"]],template:function(t,n){if(t&1){let r=$();p(0,"div",4)(1,"div",5)(2,"button",6),u(3,"translate"),b("click",function(){y(r);let s=ye(74);return x(s.toggle())}),S(4,"i",7),p(5,"span",8),f(6),m()()(),p(7,"div",9)(8,"button",6),u(9,"translate"),b("click",function(){return y(r),x(n.game.toggle())}),S(10,"i",10),p(11,"span",11),f(12),u(13,"translate"),m()(),p(14,"button",12),u(15,"gameModeEasy"),u(16,"translate"),b("click",function(){return y(r),x(n.game.shuffle())}),S(17,"i",13),p(18,"span",11),f(19),u(20,"translate"),m()(),p(21,"button",12),u(22,"gameModeStandard"),u(23,"translate"),b("click",function(){return y(r),x(n.game.back())}),S(24,"i",14),p(25,"span",11),f(26),u(27,"translate"),m()(),p(28,"button",12),u(29,"gameModeStandard"),u(30,"translate"),b("click",function(){return y(r),x(n.game.hint())}),S(31,"i",15),p(32,"span",11),f(33),u(34,"translate"),m()(),p(35,"button",6),u(36,"translate"),b("click",function(){return y(r),x(n.newGame())}),S(37,"i",16),p(38,"span",11),f(39),u(40,"translate"),m()()()(),p(41,"app-board",17),b("clickEvent",function(s){return y(r),x(n.stoneClick(s))}),m(),p(42,"div",18)(43,"div",19)(44,"button",20),S(45,"i",21),m(),p(46,"div",22)(47,"button",23),u(48,"translate"),b("click",function(){y(r);let s=ye(81);return x(s.toggle())}),S(49,"i",24),m(),p(50,"button",23),u(51,"translate"),b("click",function(){return y(r),x(n.app.toggleSound())}),S(52,"i",25),m(),p(53,"button",23),u(54,"translate"),b("click",function(){y(r);let s=ye(77);return x(s.toggle())}),S(55,"i",26),m(),T(56,cr,3,4,"button",27),m()(),p(57,"div",28)(58,"span",29)(59,"small"),f(60),u(61,"translate"),m(),p(62,"span"),f(63),m()(),p(64,"span",29)(65,"small"),f(66),u(67,"translate"),m(),p(68,"span"),f(69),m()(),p(70,"span",30),f(71),u(72,"duration"),m()()(),p(73,"app-dialog",31,0),b("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(75,dr,1,0,"app-help"),m(),p(76,"app-dialog",32,1),u(78,"translate"),b("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(79,pr,1,0,"app-tiles-info"),m(),p(80,"app-dialog",33,2),u(82,"translate"),b("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(83,gr,1,0,"app-settings"),m(),p(84,"app-dialog",34,3),u(86,"translate"),b("clickEvent",function(s){return y(r),x(n.toggleDialogState(s))}),T(87,mr,1,1,"app-choose-layout",35),m(),p(88,"app-dialog",36),b("clickEvent",function(){return y(r),x(n.clickMessage())}),T(89,fr,4,3,"div",37),m()}if(t&2){let r=ye(74),a=ye(77),s=ye(81),c=ye(85);l(2),M("title",j(_(3,56,"OPEN_HELP"))),l(4),O(n.app.name),l(2),M("title",j(_(9,58,"PAUSE_LONG"))),l(4),O(_(13,60,"PAUSE")),l(2),X("enabled",_(15,62,n.game.mode)),M("title",j(_(16,64,"SHUFFLE_LONG"))),l(5),O(_(20,66,"SHUFFLE")),l(2),X("enabled",_(22,68,n.game.mode)),M("title",j(_(23,70,"UNDO_LONG"))),Z("disabled",n.game.board.undo.length===0?!0:null),l(5),O(_(27,72,"UNDO")),l(2),X("enabled",_(29,74,n.game.mode)),M("title",j(_(30,76,"HINT_LONG"))),l(5),O(_(34,78,"HINT")),l(2),M("title",j(_(36,80,"RESTART_LONG"))),l(4),O(_(40,82,"RESTART")),l(2),M("stones",n.game.board.stones)("theme",n.app.settings.theme)("imageSet",n.app.settings.tileset)("kyodaiUrl",n.app.settings.kyodaiUrl)("background",n.app.settings.background)("pattern",n.app.settings.pattern),l(6),M("title",j(_(48,84,"OPEN_SETTINGS"))),l(3),X("inactive",!n.app.settings.sounds),M("title",j(_(51,86,"AUDIO_SOUNDS"))),l(3),M("title",j(_(54,88,"TILES_INFO"))),l(3),L(n.fullScreenEnabled?56:-1),l(4),z("",_(61,90,"STONES"),":"),l(3),O(n.game.board.count),l(3),z("",_(67,92,"FREE"),":"),l(3),O(n.game.board.free.length),l(2),O(_(72,94,n.game.clock.elapsed)),l(2),M("title",n.title),l(2),L(r.visible()?75:-1),l(),M("title",_(78,96,"TILES")),l(3),L(a.visible()?79:-1),l(),M("title",_(82,98,"SETTINGS")),l(3),L(s.visible()?83:-1),l(),M("title",_(86,100,"SELECT_BOARD")),l(3),L(c.visible()?87:-1),l(),M("visible",!!n.game.message)("noCloseButton",!0),l(),L(n.game.message?89:-1)}},dependencies:[di,En,Vn,Gn,ai,Sn,ht,gi,pi,Q],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;width:100%;height:100%;background-color:var(--main-bg-color)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{min-width:170px;display:flex;justify-content:space-between;padding-left:12px;padding-right:12px}@media only screen and (min-width:3000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:4em}}@media only screen and (max-width:2200px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.6em}}@media only screen and (max-width:1900px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.3em}}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.2em}}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{color:var(--main-text-color);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding:.3em .9em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{text-decoration:none;font-weight:500;color:var(--main-text-color);padding:.3em .9em;border-radius:10px;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease,transform .05s ease}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] + .label[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--main-text-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[disabled][_ngcontent-%COMP%]{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:6px;border-radius:10px;font-family:Kulim Park,Tahoma,sans-serif;color:var(--main-text-color);padding:.3em .9em;cursor:pointer;border:1px solid transparent;background-clip:padding-box;transition:color .15s ease,background-color .15s ease,border-color .15s ease,box-shadow .15s ease,transform .05s ease;background-color:transparent;font-size:inherit}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{background-image:linear-gradient(to bottom,color-mix(in oklab,var(--main-bg-color-lt) 35%,transparent),color-mix(in oklab,var(--main-bg-color) 90%,transparent));border:1px solid color-mix(in oklab,var(--main-bg-color-lt) 70%,transparent);background-color:color-mix(in oklab,var(--main-bg-color) 78%,transparent);color:var(--main-text-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active{transform:translateY(1px);box-shadow:inset 0 1px 1px #00000026,0 0 #0000}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 2px var(--main-bg-color),0 0 0 4px var(--main-bg-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[disabled][_ngcontent-%COMP%]{opacity:.55;cursor:not-allowed;pointer-events:none;filter:saturate(.75)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .feature.enabled[_ngcontent-%COMP%]{display:unset}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]{font-weight:600;cursor:pointer}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]   .icon-logo[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]:hover{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]{cursor:default;gap:24px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-variant-numeric:lining-nums}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-family:Kulim Park,Tahoma,sans-serif;min-width:98px;display:inline-block;text-align:center;font-variant-numeric:slashed-zero tabular-nums}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]{cursor:default}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:none;width:2.2em;height:2.2em;padding:0;border-radius:999px;justify-content:center;align-items:center}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05em}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]{border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]{border-top:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .board[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;overflow:hidden}@media only screen and (max-width:1000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:1.2em;padding:.3em}[_nghost-%COMP%]   .time[_ngcontent-%COMP%]{padding:.3em}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:700px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:1.1em}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{min-width:unset}}@media only screen and (max-width:500px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{font-size:1em}}@media only screen and (max-width:400px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.9em}}@media only screen and (max-width:350px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   span.name[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width:280px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{gap:2px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none;position:absolute;bottom:100%;right:0;background:var(--dialog-background-color);border:1px solid var(--dialog-border-color);border-radius:8px;flex-direction:column;z-index:10;gap:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:0;margin-left:0;width:2.2em;height:2.2em;border-radius:8px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.05em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]:hover   .menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]:focus-within   .menu[_ngcontent-%COMP%]{display:flex}}@media only screen and (width>=400px)and (height<=600px){[_nghost-%COMP%]{flex-direction:row;position:relative;padding-left:calc(52px + env(safe-area-inset-left));padding-right:calc(52px + env(safe-area-inset-right))}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl-name[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl-name[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]{flex-direction:column;min-width:unset;max-width:52px;height:calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));position:absolute;left:env(safe-area-inset-left);border-bottom:unset}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]{flex-direction:column;min-width:98px;max-width:98px;height:calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));position:absolute;right:env(safe-area-inset-right);align-items:flex-end;border-top:unset}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{align-items:flex-end}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{padding-right:.3em;min-width:unset}}@media only screen and (width>=400px)and (height<=260px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:.1em}}"]})}}return i})();var Cr=["gameComponent"],Mr=["editorPlaceholder"];function Pr(i,o){if(i&1&&S(0,"app-game-component",3,1),i&2){let e=C();me("theme-"+e.app.settings.theme),M("hidden",e.loading)}}function Or(i,o){}var hi=(()=>{class i{constructor(){this.gameComponent=pe.required("gameComponent"),this.editorPlaceholder=pe.required("editorPlaceholder",{read:yt}),this.app=k(ge),this.loading=!0,this.editorVisible=!1,this.layoutService=k(he),this.meta=k(cn),this.updateName(),this.registerWindowListeners()}ngOnInit(){this.init().catch(e=>{console.error(e)})}handleKeyDownEvent(e){(e.target?.nodeName??"").toLocaleLowerCase()!=="input"&&J.editor&&e.key==="e"&&(this.toggleEditor(),e.preventDefault())}loadEditor(){J.editor&&import("./chunk-R7E3XC6W.js").then(({EditorComponent:e})=>{let t=this.editorPlaceholder().createComponent(e);this.editorSubscription=t.instance.closeEvent.subscribe(()=>{this.toggleEditor()})}).catch(e=>{console.error(e)})}toggleEditor(){J.editor&&(this.editorVisible=!this.editorVisible,this.editorVisible?(this.app.game.pause(),this.loadEditor()):(this.editorSubscription&&(this.editorSubscription.unsubscribe(),this.editorSubscription=void 0),this.editorPlaceholder().clear()))}init(){return le(this,null,function*(){yield this.layoutService.get(),this.loading=!1;let e=new URLSearchParams(window.location.search),t=yield this.checkImport(e.get("mah"));this.layoutService.selectBoardID=t[0]||e.get("board"),window.location.search&&this.clearSearchParameters(),(this.app.game.isIdle()||this.layoutService.selectBoardID)&&this.gameComponent().showNewGame()})}clearSearchParameters(){try{window.history.replaceState(null,"",window.location.pathname)}catch(e){console.error(e)}}checkImport(e){return le(this,null,function*(){if(!e)return[];try{let t=[],n=JSON.parse(atob(e)),r=[];for(let a of n.boards){let s=this.layoutService.expandLayout(a,!0);t.push(s.id),!this.layoutService.layouts.items.some(c=>c.id===s.id)&&!r.some(c=>c.id===s.id)&&r.push(he.layout2loadLayout(s,a.map))}return r.length>0&&this.layoutService.storeCustomBoards(r),t}catch(t){return console.error(t),[]}})}registerWindowListeners(){window.addEventListener("beforeunload",()=>{this.app.game.isRunning()&&this.app.game.pause()},!1),window.addEventListener("blur",()=>{this.app.game.isRunning()&&this.app.game.pause()},!1)}updateName(){let e=this.meta.getTag("name=application-name");this.app.name=e?e.content:this.app.name}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=H({type:i,selectors:[["app-root"]],viewQuery:function(t,n){t&1&&ve(n.gameComponent,Cr,5)(n.editorPlaceholder,Mr,5,yt),t&2&&be(2)},hostBindings:function(t,n){t&1&&b("keydown",function(a){return n.handleKeyDownEvent(a)},Ye)},decls:3,vars:1,consts:[["editorPlaceholder",""],["gameComponent",""],[3,"hidden","class"],[3,"hidden"]],template:function(t,n){t&1&&(T(0,Pr,2,3,"app-game-component",2),Wt(1,Or,0,0,"ng-template",null,0,en)),t&2&&L(n.editorVisible?-1:0)},dependencies:[mi],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}"]})}}return i})();var $t=new zt("TRANSLATE_HTTP_LOADER_CONFIG"),vr=(()=>{class i{http;config;constructor(){this.config=jt({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},k($t)),this.http=this.config.useHttpBackend?new xe(k(xt)):k(xe)}getTranslation(e){let t=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${e}${this.config.suffix}${t}`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=ue({token:i,factory:i.\u0275fac})}return i})();function ui(i={}){let o=i.useHttpBackend??!1;return[{provide:$t,useValue:i},{provide:dn,useClass:vr,deps:[o?xt:xe,$t]}]}J.production&&void 0;rn(hi,{providers:[tn(),Yt(an,nn,...J.modules),pn({loader:ui({prefix:"./assets/i18n/",suffix:".json"}),fallbackLang:"en"}),ge,he,nt,Ae,pt,sn(ln())]}).catch(console.error);
