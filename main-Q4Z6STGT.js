import{a as qe,b as We}from"./chunk-C2QOITZD.js";import{a as $e,c as lt,d as je}from"./chunk-MPSRV6SZ.js";import{a as J}from"./chunk-TTFSU4TC.js";import{a as At,b as ze,d as Ue}from"./chunk-36AIYSCB.js";import{b as we,c as ke,d as Se,e as Ee,f as Be,j as Ye,k as Xe,l as ne,n as He,o as it}from"./chunk-76WANFPN.js";import{E as Rt,c as te,d as Ft,e as Le,f as Te,j as Fe,k as Re,o as ee,p as Ae,r as Ge,u as Ne}from"./chunk-JDE2M4PC.js";import{$a as Bt,A as fe,Aa as St,Ba as Et,Ca as Lt,Da as at,E as b,Ea as E,F as w,Fa as L,G as gt,H as Wt,Ha as Q,Ia as W,Ja as Z,Ka as x,L as ht,La as m,M as ft,Ma as f,Na as k,Oa as _t,Pa as Pt,Q as _e,Qa as Qt,Ra as R,Sa as Pe,Ta as y,Ua as Tt,Va as M,Wa as Oe,Xa as ve,Ya as tt,Za as Ct,_a as ct,a as de,ab as G,b as qt,bb as Dt,cb as v,d as pe,da as Ce,db as T,ea as bt,eb as z,fb as Jt,ga as g,gb as A,hb as It,i as ge,ka as Zt,kb as _,l as me,lb as C,mb as xe,nb as ye,ob as be,pa as Kt,pb as et,qa as q,qb as H,r as ue,rb as nt,sa as wt,sb as Vt,ta as mt,u as yt,ua as Me,va as kt,vb as De,w as he,wb as Ie,xb as ot,y as S,yb as Ve}from"./chunk-4UN4TNNB.js";var bn=["*"];function wn(n,o){if(n&1&&(_t(0,"h1"),Qt(1,"i",5),v(2),Pt()),n&2){let r=M(2);g(2),T(r.title())}}function kn(n,o){if(n&1){let r=R();_t(0,"a",6),_(1,"translate"),Tt("click",function(){b(r);let e=M(2);return w(e.toggle())}),Qt(2,"i",7),Pt()}n&2&&Pe("title",A(C(1,2,"CLOSE")))}function Sn(n,o){if(n&1){let r=R();_t(0,"div",1),Tt("click",function(){b(r);let e=M();return w(e.toggle())}),_t(1,"div",2),Tt("click",function(e){return b(r),w(e.stopPropagation())}),_t(2,"div",3),E(3,wn,3,1,"h1"),E(4,kn,3,4,"a",4),Pt(),ve(5),Pt()()}if(n&2){let r=M();Dt(It("overlay ",r.className())),g(3),L(r.title()?3:-1),g(),L(r.noClose()?-1:4)}}var Ze=(()=>{let o=class o{constructor(){this.title=H(),this.className=H(),this.visible=Vt(!1),this.noClose=H(!1),this.clickEvent=et()}toggle(){this.visible.set(!this.visible()),this.clickEvent.emit(this.visible())}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q({type:o,selectors:[["app-dialog"]],inputs:{title:[1,"title"],className:[1,"className"],visible:[1,"visible"],noClose:[1,"noClose"]},outputs:{visible:"visibleChange",clickEvent:"clickEvent"},ngContentSelectors:bn,decls:1,vars:1,consts:[[3,"class"],[3,"click"],[1,"overlay-popup",3,"click"],[1,"dialog-header"],["role","button",1,"close",3,"title"],[1,"icon-logo"],["role","button",1,"close",3,"click","title"],[1,"icon-cancel-circled2"]],template:function(e,i){e&1&&(Oe(),E(0,Sn,6,5,"div",0)),e&2&&L(i.visible()?0:-1)},dependencies:[ot],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;color:var(--main-content-text-color)}[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:var(--dialog-headline-color);margin-top:-8px;margin-bottom:10px;line-height:1.3em}@media only screen and (max-width: 700px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.2em}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.1em}}"]});let n=o;return n})();function oe(n){return(n<10?"0":"")+n.toString()}var Gt=(()=>{let o=class o{transform(t){if(Number.isNaN(t)||t===0)return"-";let e=Math.floor(t/1e3),i=Math.floor(e/3600),s=Math.floor((e-i*3600)/60),a=e-i*3600-s*60;return`${i>0?`${oe(i)}:`:""}${oe(s)}:${oe(a)}`}};o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=mt({name:"duration",type:o,pure:!0});let n=o;return n})();var dt=class dt{constructor(o,r,t,e){this.left=o,this.top=r,this.right=t,this.bottom=e}static fromElement(o){let{left:r,top:t,right:e,bottom:i}=o.getBoundingClientRect();return new dt(r,t,e,i)}static fromWindow(o){return new dt(0,0,o.innerWidth,o.innerHeight)}inflate(o){this.left-=o,this.top-=o,this.right+=o,this.bottom+=o}intersectsWith(o){return o.left<this.right&&this.left<o.right&&o.top<this.bottom&&this.top<o.bottom}intersectsWithY(o){return o.top<this.bottom&&this.top<o.bottom}getIntersectionWith(o){let r=Math.max(this.left,o.left),t=Math.max(this.top,o.top),e=Math.min(this.right,o.right),i=Math.min(this.bottom,o.bottom);return e>=r&&i>=t?new dt(r,t,e,i):dt.empty}};dt.empty=new dt(0,0,0,0);var rt=dt;var Mt=(()=>{let o=class o{constructor(){this.scrollNotify=new Zt,this.observeNotify=new Zt,this.currentViewport=new rt(0,0,0,0),this.scrollSubject=new pe,this.platformId=S(_e),this.isBrowser=ke(this.platformId),this.hasIntersectionObserver=o.checkIntersectionObserver();let t=this.scrollSubject.asObservable();this.scrollObservable=ge(t.pipe(ue(300)),t.pipe(me(100))),this.scrollObservable.subscribe(e=>{this.scrollNotify.emit(e)}),this.currentViewport=rt.fromWindow(window)}getObserver(){return this.intersectionObserver?this.intersectionObserver:(this.intersectionObserver=new IntersectionObserver(t=>{this.observeNotify.next(t)},{threshold:0}),this.intersectionObserver)}notifyScroll(t){if(this.hasIntersectionObserver)return;let e=t.element?rt.fromElement(t.element):rt.fromWindow(window),i=e.bottom-e.top;e.bottom+=i,e.top-=i,this.currentViewport=e,this.scrollSubject.next({rect:e})}static checkIntersectionObserver(){let t="IntersectionObserver"in window,i=window.navigator.userAgent.match(/Edge\/(\d*)\./i),s=!!i&&i.length>1,a=s&&!!i&&Number.parseInt(i[1],10)>15;return t&&(!s||a)}};o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=yt({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();var Ke=(()=>{let o=class o{constructor(){this.scrollTo=H(),this.element=S(ft),this.scrollNotify=S(Mt)}ngOnChanges(t){if(t.scrollTo?.currentValue){let e=t.scrollTo.currentValue;if(e.id&&e.id.length>0){let i=document.getElementById(e.id);i&&(this.element.nativeElement.scrollTop=i.offsetTop-i.offsetHeight)}}}scrollTrack(t){this.scrollNotify.notifyScroll({name:"scroll-host",element:this.element.nativeElement})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=wt({type:o,selectors:[["","appDeferLoadScrollHost",""]],hostBindings:function(e,i){e&1&&y("scroll",function(a){return i.scrollTrack(a)})},inputs:{scrollTo:[1,"scrollTo"]},features:[ht]});let n=o;return n})();var Qe=(()=>{let o=class o{constructor(){this.preRender=H(!1),this.appDeferLoad=et(),this.timeoutLoadMS=20,this.elementRef=S(ft),this.deferLoadService=S(Mt)}ngAfterViewInit(){this.deferLoadService.isBrowser?this.deferLoadService.hasIntersectionObserver?this.registerIntersectionObserver():this.addScrollListeners():this.preRender()&&this.load()}ngOnDestroy(){this.removeListeners()}static getScrollPosition(){return window.scrollY+(document.documentElement.clientHeight||document.body.clientHeight)}loadAndUnobserve(){this.load(),this.unobserve(),this.removeListeners()}cancelDelayLoad(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}delayLoad(){this.timeoutId||(this.timeoutId=setTimeout(()=>{this.loadAndUnobserve(),this.cancelDelayLoad()},this.timeoutLoadMS))}manageIntersection(t){this.checkIfIntersecting(t)?this.delayLoad():this.cancelDelayLoad()}registerIntersectionObserver(){this.intersectionObserver||(this.intersectionObserver=this.deferLoadService.getObserver(),this.intersectionObserver&&this.elementRef.nativeElement&&(this.intersectionObserver.observe(this.elementRef.nativeElement),this.observeSubscription=this.deferLoadService.observeNotify.subscribe(t=>{this.checkForIntersection(t)})))}checkForIntersection(t){for(let e of t)e.target===this.elementRef.nativeElement&&this.manageIntersection(e)}checkIfIntersecting(t){return t?.time?t.isIntersecting:this.isVisible()}load(){this.removeListeners(),this.appDeferLoad.emit()}loadFromScroll(){setTimeout(()=>{this.load()})}addScrollListeners(){this.scrollSubscription=this.deferLoadService.scrollNotify.subscribe(t=>{this.checkInView(t.rect)&&this.loadFromScroll()}),setTimeout(()=>{this.checkInView(this.deferLoadService.currentViewport)&&this.loadFromScroll()})}unobserve(){this.intersectionObserver&&this.elementRef.nativeElement&&(this.intersectionObserver.unobserve(this.elementRef.nativeElement),this.intersectionObserver=void 0)}removeListeners(){this.scrollSubscription&&(this.scrollSubscription.unsubscribe(),this.scrollSubscription=void 0),this.unobserve(),this.observeSubscription&&(this.observeSubscription.unsubscribe(),this.observeSubscription=void 0)}checkInView(t){return rt.fromElement(this.elementRef.nativeElement).intersectsWithY(t)}isVisible(){let t=o.getScrollPosition();return this.elementRef.nativeElement.offsetTop<=t}};o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=wt({type:o,selectors:[["","appDeferLoad",""]],inputs:{preRender:[1,"preRender"]},outputs:{appDeferLoad:"appDeferLoad"}});let n=o;return n})();function h(n,o,r){return`${n}|${o}|${r}`}function vt(n,o){return Math.floor(Math.random()*(o-n+1))+n}function U(n){return n[Math.floor(Math.random()*n.length)]}function I(n){for(let o=n.length-1;o>0;o--){let r=Math.floor(Math.random()*(o+1));[n[o],n[r]]=[n[r],n[o]]}return n}function F(n,o,r){return n>=0&&n<=36&&o>=0&&o<=16&&r>=0&&r<=5}function Y(n,o,r,t){return n.has(h(o,r-1,t-1))||n.has(h(o,r,t-1))||n.has(h(o,r+1,t-1))||n.has(h(o,r-1,t))||n.has(h(o,r+1,t))||n.has(h(o,r-1,t+1))||n.has(h(o,r,t+1))||n.has(h(o,r+1,t+1))}function Nt(n,o,r,t){if(o===0)return!0;let e=o-1;return n.has(h(e,r,t))||n.has(h(e,r-1,t))&&n.has(h(e,r+1,t))?!0:n.has(h(e,r-1,t-1))&&n.has(h(e,r+1,t-1))&&n.has(h(e,r-1,t+1))&&n.has(h(e,r+1,t+1))}function xt(n,o,r,t,e){if(!F(t,e,r))return!1;let i=h(r,t,e);return n.has(i)||!Nt(n,r,t,e)||Y(n,r,t,e)?!1:(n.add(i),o.push([r,t,e]),!0)}function Je(n){return n%2!==0}function tn(){return U(["lines","lines","lines","checker","checker","areas","areas","rings"])}function $t(n,o){let r=[];for(let t=0;t<=o;t+=2)for(let e=0;e<=n;e+=2)r.push([e,t]);return r}function Yt(n,o,r,t=0){for(let[e,i]of n)for(let s=-o;s<=o;s++)for(let a=-o;a<=o;a++){let c=e+a,l=i+s;F(c,l,t)&&r.add(h(t,c,l))}}function st(n,o,r,t=2){let e=[];for(let i=0;i<=r;i+=t)for(let s=0;s<=o;s+=t)n.has(h(0,s,i))&&e.push([0,s,i]);return e}function Xt(n,o,r=1){let t=[];for(let i=0;i<=n;i+=r)t.push(i);let e=[];for(let i=0;i<=o;i+=r)e.push(i);return{xs:t,ys:e}}function pt(n,o,r,t,e,i){let s=n;for(let[a,c]of o){if(s>=e)break;for(let[l,d]of r){if(s>=e)break;let p=i(l,d,a,c);if(p>0&&(s+=p,s>=t&&s<=e))break}if(s>=t&&s<=e)break}return s}function en(n){return n.some(o=>o[0]>0)}function En(n,o,r,t,e,i){let s=vt(e,i),a=s*4,c=[];for(let d of t)for(let p of r)c.push([p,d]);I(c);let l=0;for(;l<s&&a-- >0&&c.length>0;){let[d,p]=c.pop();if(d===r[0]||d===r.at(-1)||p===t[0]||p===t.at(-1))continue;let u=h(o,d,p);if(!n.has(u))continue;let O=Math.random()<.5?"h":"v",P=[];O==="h"?(P.push(u),d+1<=r.at(-1)&&P.push(h(o,d+1,p))):(P.push(u),p+1<=t.at(-1)&&P.push(h(o,d,p+1)));let D=!1;for(let B of P)n.delete(B)&&(D=!0);D&&l++}}function Ln(n,o,r){for(let t of r)for(let e of o)e%2!==0||t%2!==0||n.add(h(0,e,t))}function Tn(){let n=Math.random()<.5?0:U([0,0,2,2,4]),o=Math.random()<.5?0:U([0,0,2,2,4]),r=Math.random()<.5?0:U([0,2,2,4]),t=Math.random()<.5?0:U([0,2,2,4]);return{left:n,right:o,top:r,bottom:t}}function Bn(n,o,r,t,e,i){let{left:s,right:a,top:c,bottom:l}=i;for(let d of r)for(let p of o)(p<s||p>t-a||d<c||d>e-l)&&n.delete(h(0,p,d))}function Dn(n,o,r){return Math.min(Math.max(o,Math.floor(n*.45)),r)}function In(n,o,r){let t=o.length;if(t<=r)return t;let e=I([...o]);for(;t>r&&e.length>0;){let i=e.pop();n.delete(h(0,i[1],i[2]))&&t--}return t}function Vn(n,o,r){let t=[];for(let e of r)for(let i of o)n.has(h(0,i,e))||t.push([0,i,e]);return t}function Fn(n,o,r,t){I(o);let e=r;for(;e<t&&o.length>0;){let[,i,s]=o.pop();Y(n,0,i,s)||(n.add(h(0,i,s)),e++)}return e}function nn({minTarget:n,maxTarget:o,xMax:r,yMax:t}){let e=new Set,{xs:i,ys:s}=Xt(r,t,1);Ln(e,i,s);let a=Tn();Bn(e,i,s,r,t,a),En(e,0,i,s,6,32);let c=st(e,r,t,1),l=c.length,d=Dn(l,n,o);if(l>d)l=In(e,c,d);else if(l<d){let p=Vn(e,i,s);l=Fn(e,p,l,d)}return st(e,r,t,1)}function ie(n,o,r,t,e,i=!1){if(t%2!==0||e%2!==0||!F(t,e,0))return!1;let s=h(0,t,e);return n.has(s)||Y(n,0,t,e)?!1:(n.add(s),o.push([0,t,e]),i&&r.add(s),!0)}function Rn(n,o,r,t,e){let i=Math.floor(t/2),s=Math.floor(e/2);return i-=i%2,s-=s%2,F(i,s,0)||(i=0,s=0),ie(n,o,r,i,s,!0),{sx:i,sy:s}}function An(n,o){let r=n+o,t=Math.max(40,Math.floor(r*.8)),e=Math.max(t+100,Math.floor(r*2));return vt(t,e)}function Gn(n,o){let r=[n[0],n[1]],t=[-n[0],-n[1]],e=n[0]===0?[[1,0],[-1,0]]:[[0,1],[0,-1]],i=[r,...e,t];return Math.random()<o&&(i=I(i)),Math.random()<.2&&(i=[...I([...e]),r,t]),i}function Nn(n,o,r,t,e,i,s){let a=Gn(i,s);for(let[c,l]of a){let d=t+c*2,p=e+l*2;if(F(d,p,0)&&ie(n,o,r,d,p,!0))return{x:d,y:p,direction:[c,l]}}return null}function $n(n,o,r,t,e){let i=I([[1,0],[-1,0],[0,1],[0,-1]]);for(let[s,a]of i){let c=t+s*2,l=e+a*2;if(!(!F(c,l,0)||Y(n,0,c,l)||n.has(h(0,c,l)))&&ie(n,o,r,c,l,!0))return{x:c,y:l,direction:[s,a]}}return null}function Yn(n,o,r,t,e,i){let s=Math.random()<.4?U([0,0,2]):0,a=Math.random()<.4?U([0,0,2]):0,c=Math.random()<.4?U([0,2]):0,l=Math.random()<.4?U([0,2]):0;for(let d of t)for(let p of r)if(p<s||p>e-a||d<c||d>i-l){let u=h(0,p,d);o.has(u)||n.delete(u)}}function Xn(n,o,r,t){let e=o.length,i=I([...o].filter(s=>!r.has(h(0,s[1],s[2]))));for(;e>t&&i.length>0;){let s=i.pop();n.delete(h(0,s[1],s[2]))&&e--}return e}function Hn(n,o,r,t,e,i){let s=[],a=[];for(let d of t)for(let p of r)n.has(h(0,p,d))||([[p-2,d],[p+2,d],[p,d-2],[p,d+2]].some(([P,D])=>o.has(h(0,P,D)))?s:a).push([0,p,d]);I(s),I(a);let c=[s,a],l=e;for(let d of c)for(;l<i&&d.length>0;){let[p,u,O]=d.pop();u%2===0&&O%2===0&&!Y(n,0,u,O)&&(n.add(h(p,u,O)),l++)}return l}function zn(n,o,r,t,e,i,s,a){let c=st(n,s,a,1),l=c.length,d=Math.min(Math.max(e,Math.floor(l*.9)),i);l>d?l=Xn(n,c,o,d):l<d&&(l=Hn(n,o,r,t,l,d))}function Un(n,o,r){let t=[];for(let e of r)for(let i of o)n.has(h(0,i,e))&&t.push([0,i,e]);return t}function on({minTarget:n,maxTarget:o,xMax:r,yMax:t}){let e=new Set,i=[],s=new Set,{xs:a,ys:c}=Xt(r,t,1),{sx:l,sy:d}=Rn(e,i,s,r,t),p=l,u=d,P=[[1,0],[-1,0],[0,1],[0,-1]][Math.floor(Math.random()*4)],D=An(r,t);for(let B=0;B<D;B++){let V=B%vt(6,12)===0?Math.random()*.6+.2:Math.random()*.3,j=Nn(e,i,s,p,u,P,V);if(j){p=j.x,u=j.y,P=j.direction;continue}let ut=$n(e,i,s,p,u);if(ut){p=ut.x,u=ut.y,P=ut.direction;continue}break}return Yn(e,s,a,c,r,t),zn(e,s,a,c,n,o,r,t),Un(e,a,c)}function rn(n,o,r,t){let e=n+(r-1)*2,i=o+(t-1)*2,s=[];for(let a=n;a<=e;a+=2)s.push([a,o]);for(let a=o+2;a<=i;a+=2)s.push([e,a]);for(let a=e-2;a>=n;a-=2)s.push([a,i]);for(let a=i-2;a>o;a-=2)s.push([n,a]);return s}function re(n,o,r,t,e,i,s){let a=`${r}x${t}`;if(s.has(a))return!1;let c=n+(r-1)*2,l=o+(t-1)*2;if(!F(c,l,0))return!1;let d=rn(n,o,r,t);for(let[p,u]of d){if(p%2!==0||u%2!==0||!F(p,u,0))return!1;let O=h(0,p,u);if(e.has(O)||i.has(O)||Y(e,0,p,u))return!1}return!0}function se(n,o,r,t,e,i,s){let a=rn(n,o,r,t);for(let[c,l]of a)e.add(h(0,c,l));return Yt(a,2,i,0),s.add(`${r}x${t}`),a.length}function sn({minTarget:n,maxTarget:o,xMax:r,yMax:t}){let e=new Set,i=new Set,s=new Set,a=[];for(let d=3;d<=8;d++)for(let p=3;p<=8;p++)a.push([d,p]);I(a);let c=$t(r,t);I(c);let l=0;if(l=pt(l,a,c,n,o,(d,p,u,O)=>re(d,p,u,O,e,i,s)?se(d,p,u,O,e,i,s):0),l<n){let d=a.filter(([p,u])=>!s.has(`${p}x${u}`));I(d),I(c),l=pt(l,d,c,n,o,(p,u,O,P)=>re(p,u,O,P,e,i,s)?se(p,u,O,P,e,i,s):0)}if(l<o){let d=!0,p=!1;for(;d&&l<o;){d=!1;let u=p?[...a]:a.filter(([O,P])=>!s.has(`${O}x${P}`));if(u.length===0&&!p){p=!0;continue}I(u),I(c),l=pt(l,u,c,n,o,(O,P,D,B)=>{if(!re(O,P,D,B,e,i,s))return 0;let V=se(O,P,D,B,e,i,s);return V>0&&(d=!0),V})}}return st(e,r,t,2)}function an(n,o,r,t){let e=n+(r-1)*2,i=o+(t-1)*2,s=[];for(let a=o;a<=i;a+=2)for(let c=n;c<=e;c+=2)s.push([c,a]);return s}function ae(n,o,r,t,e,i,s){let a=`${r}x${t}`;if(s.has(a))return!1;let c=n+(r-1)*2,l=o+(t-1)*2;if(!F(c,l,0))return!1;let d=an(n,o,r,t);for(let[p,u]of d){if(p%2!==0||u%2!==0||!F(p,u,0))return!1;let O=h(0,p,u);if(e.has(O)||i.has(O)||Y(e,0,p,u))return!1}return!0}function ce(n,o,r,t,e,i,s){let a=an(n,o,r,t);for(let[c,l]of a)e.add(h(0,c,l));return Yt(a,2,i,0),s.add(`${r}x${t}`),a.length}function cn({minTarget:n,maxTarget:o,xMax:r,yMax:t}){let e=new Set,i=new Set,s=new Set,a=[];for(let d=2;d<=5;d++)for(let p=2;p<=5;p++)a.push([d,p]);I(a);let c=$t(r,t);I(c);let l=pt(0,a,c,n,o,(d,p,u,O)=>ae(d,p,u,O,e,i,s)?ce(d,p,u,O,e,i,s):0);if(l<n){let d=a.filter(([p,u])=>!s.has(`${p}x${u}`));I(d),I(c),l=pt(l,d,c,n,o,(p,u,O,P)=>ae(p,u,O,P,e,i,s)?ce(p,u,O,P,e,i,s):0)}if(l<o){let d=!0,p=!1;for(;d&&l<o;){d=!1;let u=p?[...a]:a.filter(([O,P])=>!s.has(`${O}x${P}`));if(u.length===0&&!p){p=!0;continue}I(u),I(c),l=pt(l,u,c,n,o,(O,P,D,B)=>{if(!ae(O,P,D,B,e,i,s))return 0;let V=ce(O,P,D,B,e,i,s);return V>0&&(d=!0),V})}}return st(e,r,t,2)}function Ht(n,o,r){if(!n&&!o||r.length===0)return r;let t=Math.max(...r.map(P=>P[1])),e=Math.max(...r.map(P=>P[2])),i=t*2+2,s=e*2+2,a=Math.min(36,i+4),c=Math.min(16,s+4);a%2!==0&&a--,c%2!==0&&c--,a<i&&(a=Math.max(t*2,Math.min(36-36%2,i))),c<s&&(c=Math.max(e*2,Math.min(16-16%2,s)));let l=P=>a-P,d=P=>c-P,p=[...r],u=new Set(p.map(([P,D,B])=>h(P,D,B))),O=(P,D,B)=>{if(!F(D,B,P))return;let V=h(P,D,B);u.has(V)||Y(u,P,D,B)||(u.add(V),p.push([P,D,B]))};if(n){let P=[...p];for(let[D,B,V]of P){let j=l(B);j!==B&&O(D,j,V)}}if(o){let P=[...p];for(let[D,B,V]of P){let j=d(V);j!==V&&O(D,B,j)}}return p}function zt(n,o,r,t){let e=r&&t,i=r&&!t||!r&&t,s;e?s=.25:i?s=.5:s=1;let a=Math.max(1,Math.floor(n*s)),c=Math.max(a,Math.floor(o*s)),l=r?Math.floor(36/2):36,d=t?Math.floor(16/2):16;return{minTarget:a,maxTarget:c,xMax:l,yMax:d}}function ln(n,o,r){if(r==="checker"){let{minTarget:t,maxTarget:e}=zt(70,120,n,o),i=n?7:14,s=n?Math.floor(36/2):36,a=o?6:12,c=o?Math.floor(16/2):16,l=Math.floor(Math.random()*(s-i+1))+i,d=Math.floor(Math.random()*(c-a+1))+a;return Ht(n,o,nn({minTarget:t,maxTarget:e,xMax:l,yMax:d}))}if(r==="lines")return Ht(n,o,on(zt(60,80,n,o)));if(r==="rings")return Ht(n,o,sn(zt(70,120,n,o)));if(r==="areas")return Ht(n,o,cn(zt(60,100,n,o)));throw new Error("Invalid mode")}function jn(n,o){let r=36,t=0,e=16,i=0;for(let[s,a,c]of n)s===o-1&&(r=Math.min(r,a),t=Math.max(t,a),e=Math.min(e,c),i=Math.max(i,c));return r>t||e>i?null:{minX:Math.max(0,r-2),maxX:Math.min(36,t+2),minY:Math.max(0,e-2),maxY:Math.min(16,i+2)}}function qn(n,o,r){let t=[],e=[],i=[],s=o-1;for(let a=r.minY;a<=r.maxY;a++)for(let c=r.minX;c<=r.maxX;c++){let l=h(o,c,a);if(n.has(l)||!F(c,a,o))continue;let d=n.has(h(s,c,a)),p=n.has(h(s,c-1,a))&&n.has(h(s,c+1,a)),u=n.has(h(s,c-1,a-1))&&n.has(h(s,c+1,a-1))&&n.has(h(s,c-1,a+1))&&n.has(h(s,c+1,a+1));(d||p||u)&&(u?t.push([c,a]):p?e.push([c,a]):d&&i.push([c,a]))}return{bridgeLarge:t,bridgeSmall:e,direct:i}}function Wn(n,o,r){let t=[],e=o-1;if(Math.random()<.25)for(let i=r.minY;i<=r.maxY;i++)for(let s=r.minX;s<=r.maxX;s++){if(!n.has(h(e,s,i)))continue;let a=[[-1,0],[1,0],[0,-1],[0,1]],[c,l]=U(a),d=s+c,p=i+l;if(!F(d,p,o))continue;let u=h(o,d,p);n.has(u)||t.push([d,p])}return t}function Zn(n){let o=Math.trunc(Math.random()*n);return o-=o%2,Math.max(o,2)}function Kn(n,o,r,t,e,i,s,a,c){if(!xt(n,o,r,t,e))return!1;if(i||s){let l=a(t),d=c(e);i&&l!==t&&xt(n,o,r,l,e),s&&d!==e&&xt(n,o,r,t,d),i&&s&&(l!==t||d!==e)&&xt(n,o,r,l,d)}return!0}function Qn(n,o,r,t){if(n.length>=144)return n;let e=jn(n,o);if(!e)return n;let i=new Set(n.map(V=>h(V[0],V[1],V[2]))),{bridgeLarge:s,bridgeSmall:a,direct:c}=qn(i,o,e),l=Wn(i,o,e),d=144-n.length,p=Zn(d),u=0,{mirX:O,mirY:P}=dn(n),D=[...n],B=V=>{for(let[j,ut]of V){if(u>=p||D.length>=144)return;Kn(i,D,o,j,ut,r,t,O,P)&&u++}};return B(s),B(a),B(c),B(l),D}function Jn(n,o,r){let t=n;for(let e=1;e<=5&&t.length<144;e++)t=Qn(t,e,o,r);return t.length>144?t.slice(0,144):t}function dn(n){let o=n.map(l=>l[1]),r=n.map(l=>l[2]),t=o.length>0?Math.min(...o):0,e=o.length>0?Math.max(...o):36,i=r.length>0?Math.min(...r):0,s=r.length>0?Math.max(...r):16,a=(t+e)/2,c=(i+s)/2;return{mirX:l=>Math.round(2*a-l),mirY:l=>Math.round(2*c-l)}}function to(n,o,r,t,e,i,s,a,c){let l=[[t,e]];if(i){let d=a(t);d!==t&&l.push([d,e])}if(s){let d=c(e);if(l.some(p=>p[0]===t&&p[1]===d)||l.push([t,d]),i){let p=a(t),u=c(e);l.some(O=>O[0]===p&&O[1]===u)||l.push([p,u])}}for(let[d,p]of l){if(!F(d,p,r))return!1;let u=h(r,d,p);if(o.has(u)||!Nt(o,r,d,p)||Y(o,r,d,p))return!1}if(n.length+l.length>144)return!1;for(let[d,p]of l){let u=h(r,d,p);o.add(u),n.push([r,d,p])}return!0}function eo(n,o,r){let t=new Set(n.map(a=>h(a[0],a[1],a[2]))),{mirX:e,mirY:i}=dn(n),s=!0;for(;n.length<144&&s;){s=!1;for(let a=0;a<=5&&n.length<144;a++){let c=[];for(let l=0;l<=16;l++)for(let d=0;d<=36;d++)F(d,l,a)&&(t.has(h(a,d,l))||c.push([d,l]));for(let l=c.length-1;l>0;l--){let d=Math.floor(Math.random()*(l+1));[c[l],c[d]]=[c[d],c[l]]}for(let[l,d]of c){if(n.length>=144)break;to(n,t,a,l,d,o,r,e,i)&&(s=!0)}}}return n}function no(n){let o=36,r=0,t=16,e=0;for(let[,i,s]of n)o=Math.min(o,i),r=Math.max(r,i),t=Math.min(t,s),e=Math.max(e,s);return{minX:Math.max(0,o-2),maxX:Math.min(36,r+2),minY:Math.max(0,t-2),maxY:Math.min(16,e+2)}}function oo(n,o,r){for(let t=5;t>=0;t--)for(let e=r.minY;e<=r.maxY;e++)for(let i=r.minX;i<=r.maxX;i++){if(!F(i,e,t))continue;let s=h(t,i,e);if(!o.has(s)&&Nt(o,t,i,e)&&!Y(o,t,i,e))return o.add(s),n.push([t,i,e]),!0}return!1}function io(n){let o=new Map;for(let[r,t,e]of n)o.set(h(r,t,e),0);for(let[r,t,e]of n){if(r===0)continue;let i=r-1,s=[h(i,t,e),h(i,t-1,e),h(i,t+1,e),h(i,t-1,e-1),h(i,t+1,e-1),h(i,t-1,e+1),h(i,t+1,e+1)];for(let a of s)o.has(a)&&o.set(a,(o.get(a)||0)+1)}return o}function ro(n,o){let r=-1,t=-1;for(let e=n.length-1;e>=0;e--){let[i,s,a]=n[e],c=h(i,s,a);(o.get(c)||0)===0&&i>=t&&(r=e,t=i)}return r}function so(n){if(!Je(n.length))return n;let o=new Set(n.map(i=>h(i[0],i[1],i[2]))),r=no(n);if(oo(n,o,r)||n.length===0)return n;let t=io(n),e=ro(n,t);return e>=0?n.splice(e,1):n.pop(),n}function pn(n,o,r){let t=[...n],e=0;for(;t.length<144&&e<50;){e++;let i=t.length;if(t=Jn(t,o,r),t.length===i)break}return t.length<144&&(t=eo(t,o,r)),t.length>144&&(t=t.slice(0,144)),t=so(t),t}var gn=100;function ao(n,o,r){let t=ln(n,o,r);for(let e=0;e<gn;e++){let i=pn(t,n,o);if(i.length===144)return i}return[]}function mn(n,o,r){let t=n==="random"?Math.random()<.5:n==="true",e=o==="random"?Math.random()<.5:o==="true",i=r==="random"?tn():r,s=[],a=0;for(;s.length!==144||!en(s);)if(s=ao(t,e,i),a++,a>gn)return[];return Ue(s)}var co=["scrollHost"];function lo(n,o){if(n&1){let r=R();m(0,"a",4),y("click",function(){let e=b(r).$index,i=M(2);return w(i.scrollToGroup(e))}),v(1),f()}if(n&2){let r=o.$implicit;g(),T(r.name)}}function po(n,o){if(n&1&&(m(0,"div",1),W(1,lo,2,1,"a",null,Q),f()),n&2){let r=M();g(),Z(r.groups)}}function go(n,o){if(n&1&&v(0),n&2){let r=M(2).$implicit;z(" [",r.layouts.length,"] ")}}function mo(n,o){if(n&1){let r=R();m(0,"div",6),y("click",function(){b(r);let e=M().$implicit;return w(e.expanded=!e.expanded)}),k(1,"span",7),v(2),m(3,"span",8),E(4,go,1,1),f()()}if(n&2){let r=M().$implicit;g(),G("expanded",r.expanded),g(),z(" ",r.name," "),g(2),L(r.isRandom?-1:4)}}function uo(n,o){if(n&1&&k(0,"app-layout-preview",24),n&2){let r=M().$implicit;x("svg",r.layout.previewSVG)("alt",r.layout.name)}}function ho(n,o){if(n&1&&k(0,"div",27),n&2){let r=M().$implicit;G("selected",r.selected),x("id","item-"+r.layout.id)}}function fo(n,o){if(n&1){let r=R();m(0,"div",23),y("keydown.enter",function(){let e=b(r).$implicit,i=M(4);return w(i.onStart(e))})("click",function(){let e=b(r).$implicit,i=M(4);return w(i.onStart(e))})("appDeferLoad",function(){let e=b(r).$implicit;return w(e.visible=!0)}),E(1,uo,1,2,"app-layout-preview",24)(2,ho,1,3,"div",25),m(3,"div",26),v(4),f()()}if(n&2){let r=o.$implicit;G("selected",r.selected),x("id","item-"+r.layout.id),g(),L(r.visible?1:2),g(3),T(r.layout.name)}}function _o(n,o){if(n&1){let r=R();m(0,"div",9),W(1,fo,5,5,"div",11,Q),m(3,"div",12)(4,"div",13)(5,"label"),gt(),m(6,"svg",14),k(7,"path",15),f(),v(8),_(9,"translate"),f(),Wt(),m(10,"select",16),y("change",function(e){b(r);let i=M(3);return w(i.randomMirrorXSet(e.target.value))}),m(11,"option",17),v(12),_(13,"translate"),f(),m(14,"option",18),v(15),_(16,"translate"),f(),m(17,"option",19),v(18),_(19,"translate"),f()()(),m(20,"div",13)(21,"label"),gt(),m(22,"svg",20),k(23,"path",21),f(),v(24),_(25,"translate"),f(),Wt(),m(26,"select",16),y("change",function(e){b(r);let i=M(3);return w(i.randomMirrorYSet(e.target.value))}),m(27,"option",17),v(28),_(29,"translate"),f(),m(30,"option",18),v(31),_(32,"translate"),f(),m(33,"option",19),v(34),_(35,"translate"),f()()(),m(36,"div")(37,"button",22),y("click",function(){b(r);let e=M(3);return w(e.generateRandomLayouts())})("keydown.enter",function(){b(r);let e=M(3);return w(e.generateRandomLayouts())}),v(38),_(39,"translate"),f()()()()}if(n&2){let r=M(2).$implicit,t=M();g(),Z(r.layouts),g(7),z(" ",C(9,15,"MIRROR_X")," "),g(3),x("selected",t.randomMirrorX==="random"),g(),T(C(13,17,"RANDOM_MIRROR")),g(2),x("selected",t.randomMirrorX==="true"),g(),T(C(16,19,"YES")),g(2),x("selected",t.randomMirrorX==="false"),g(),T(C(19,21,"NO")),g(6),z(" ",C(25,23,"MIRROR_Y")," "),g(3),x("selected",t.randomMirrorY==="random"),g(),T(C(29,25,"RANDOM_MIRROR")),g(2),x("selected",t.randomMirrorY==="true"),g(),T(C(32,27,"YES")),g(2),x("selected",t.randomMirrorY==="false"),g(),T(C(35,29,"NO")),g(4),z(" ",C(39,31,"GENERATE")," ")}}function Co(n,o){if(n&1&&k(0,"app-layout-preview",24),n&2){let r=M().$implicit;x("svg",r.layout.previewSVG)("alt",r.layout.name)}}function Mo(n,o){if(n&1&&k(0,"div",27),n&2){let r=M().$implicit;G("selected",r.selected),x("id","item-"+r.layout.id)}}function Po(n,o){if(n&1){let r=R();m(0,"div",28)(1,"span",30),_(2,"translate"),v(3),_(4,"duration"),f(),m(5,"a",31),_(6,"translate"),y("click",function(e){b(r);let i=M().$implicit,s=M(4);return w(s.clearBestTimeClick(e,i))}),k(7,"i",32),f()()}if(n&2){let r=M().$implicit;g(),x("title",A(C(2,5,"STATS_BEST"))),g(2),T(C(4,7,r.bestTime)),g(2),x("title",A(C(6,9,"BEST_TIME_CLEAR")))}}function Oo(n,o){if(n&1){let r=R();m(0,"div",29),_(1,"translate"),m(2,"a",4),y("click",function(e){b(r);let i=M().$implicit,s=M(4);return w(s.removeCustomLayout(e,i))}),k(3,"i",33),f()()}n&2&&x("title",A(C(1,2,"CUSTOM_BOARD_DELETE")))}function vo(n,o){if(n&1){let r=R();m(0,"div",23),y("keydown.enter",function(){let e=b(r).$implicit,i=M(4);return w(i.onStart(e))})("click",function(){let e=b(r).$implicit,i=M(4);return w(i.onStart(e))})("appDeferLoad",function(){let e=b(r).$implicit;return w(e.visible=!0)}),E(1,Co,1,2,"app-layout-preview",24)(2,Mo,1,3,"div",25),E(3,Po,8,11,"div",28),m(4,"div",26),v(5),f(),E(6,Oo,4,4,"div",29),f()}if(n&2){let r=o.$implicit;G("selected",r.selected),x("id","item-"+r.layout.id),g(),L(r.visible?1:2),g(2),L(r.bestTime?3:-1),g(2),T(r.layout.name),g(),L(r.layout.custom?6:-1)}}function xo(n,o){if(n&1&&(m(0,"div",10),W(1,vo,7,7,"div",11,Q),f()),n&2){let r=M(2).$implicit;g(),Z(r.layouts)}}function yo(n,o){if(n&1&&E(0,_o,40,33,"div",9)(1,xo,3,0,"div",10),n&2){let r=M().$implicit;L(r.isRandom?0:1)}}function bo(n,o){if(n&1&&(m(0,"div",3),E(1,mo,5,4,"div",5),E(2,yo,2,1),f()),n&2){let r=o.$implicit,t=o.$index,e=M();x("id",It("group-",t)),g(),L(e.groups.length>1?1:-1),g(),L(r.expanded?2:-1)}}var un=(()=>{let o=class o{constructor(){this.layouts=H(),this.startEvent=et(),this.scrollHost=nt.required("scrollHost"),this.groups=[],this.randomMirrorX="random",this.randomMirrorY="random",this.randomGroup={name:"",layouts:[],expanded:!0,isRandom:!0},this.storage=S(Rt),this.translate=S(Ie),this.layoutService=S(it)}ngOnInit(){this.randomMirrorX=this.storage.getLastMirrorX()??"random",this.randomMirrorY=this.storage.getLastMirrorY()??"random",this.buildRandomGroup()}buildRandomGroup(){this.randomGroup.name=this.translate.instant("RANDOM_GROUP");let t=this.translate.instant("RANDOM_LAYOUT");for(let e=0;e<4;e++)this.randomGroup.layouts.push({layout:{id:`${$e}${e}`,name:`${t} ${e+1}`,category:this.randomGroup.name,mapping:[]},visible:!1,selected:!1});this.generateRandomLayouts()}randomMirrorXSet(t){this.randomMirrorX=t,this.storage.setLastMirrorX(t),this.generateRandomLayouts()}randomMirrorYSet(t){this.randomMirrorY=t,this.storage.setLastMirrorY(t),this.generateRandomLayouts()}generateRandomLayout(t){let e=mn(this.randomMirrorX,this.randomMirrorY,"random");t.layout.previewSVG=this.layoutService.generatePreview(e),t.layout.mapping=e}generateRandomLayouts(){for(let t of this.randomGroup.layouts)setTimeout(()=>{this.generateRandomLayout(t)})}ngOnChanges(t){this.refresh()}refresh(){let t=this.layouts();if(t){this.buildGroups();let e=this.storage.getLastPlayed(),i=this.layoutService.selectBoardID;this.layoutService.selectBoardID=void 0,i&&t.some(s=>s.id===i)&&(e=i),e&&setTimeout(()=>{this.select(e)})}}onStart(t){t?.visible&&this.startEvent.emit(t.layout)}buildGroups(){let t=[],e={},i=this.layouts()??this.layoutService.layouts.items;for(let s of i){e[s.category]||(e[s.category]={name:s.category,layouts:[],expanded:!0},t.push(e[s.category]));let a=this.storage.getScore(s.id)||{};e[s.category].layouts.push({layout:s,playCount:a.playCount,bestTime:a.bestTime,visible:!1})}t.push(this.randomGroup),this.groups=t}scrollToElement(t,e){if(!t||!e)return;let i=t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=i.top-s.top+e.scrollTop;e.scrollTo({top:a,behavior:"auto"})}scrollToGroup(t){let e=document.getElementById(`group-${t}`);e&&this.scrollToElement(e,this.scrollHost().nativeElement)}scrollToItem(t){let e=document.getElementById(`item-${t}`);e&&this.scrollToElement(e,this.scrollHost().nativeElement)}select(t){if(t){for(let e of this.groups)for(let i of e.layouts)i.selected=i.layout.id===t;this.scrollToItem(t)}}clearBestTimeClick(t,e){t.stopPropagation(),confirm(this.translate.instant("BEST_TIME_CLEAR_SURE"))&&(this.storage.clearScore(e.layout.id),e.bestTime=void 0,e.playCount=void 0)}removeCustomLayout(t,e){t.stopPropagation(),confirm(this.translate.instant("CUSTOM_BOARD_DELETE_SURE"))&&(this.layoutService.removeCustomLayout([e.layout.id]),this.refresh())}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q({type:o,selectors:[["app-layout-list"]],viewQuery:function(e,i){e&1&&tt(i.scrollHost,co,5),e&2&&Ct()},inputs:{layouts:[1,"layouts"]},outputs:{startEvent:"startEvent"},features:[ht],decls:5,vars:1,consts:[["scrollHost",""],[1,"headline-anchors"],[1,"groups"],[1,"group",3,"id"],[3,"click"],[1,"group-name"],[1,"group-name",3,"click"],[1,"group-expander"],[1,"group-count"],["appDeferLoadScrollHost","",1,"previews","previews-random"],["appDeferLoadScrollHost","",1,"previews"],["tabindex","0",1,"preview",3,"id","selected"],[1,"preview-random"],[1,"random-options"],["width","20px","height","20px","viewBox","-2 0 20 20"],["id","focus_vertical-[#842]","d","M7,20 L7,0 L9,0 L9,20 Z M0,2 L5,2 L5,4 L2,4 L2,7 L0,7 Z M11,2 L16,2 L16,7 L14,7 L14,4 L11,4 Z M0,18 L0,13 L2,13 L2,16 L5,16 L5,18 Z M16,18 L11,18 L11,16 L14,16 L14,13 L16,13 Z"],[3,"change"],["value","random",3,"selected"],["value","true",3,"selected"],["value","false",3,"selected"],["width","20px","height","20px","viewBox","0 -2 20 20"],["d","M0,9 L0,7 L20,7 L20,9 Z M2,5 L2,0 L7,0 L7,2 L4,2 L4,5 Z M18,0 L18,5 L16,5 L16,2 L13,2 L13,0 Z M2,16 L2,11 L4,11 L4,14 L7,14 L7,16 Z M18,16 L13,16 L13,14 L16,14 L16,11 L18,11 Z"],[3,"click","keydown.enter"],["tabindex","0",1,"preview",3,"keydown.enter","click","appDeferLoad","id"],[1,"svg-board",3,"svg","alt"],[1,"preview-placeholder",3,"id","selected"],[1,"preview-name"],[1,"preview-placeholder",3,"id"],[1,"preview-best-time"],[1,"preview-custom",3,"title"],[3,"title"],[3,"click","title"],[1,"icon-cancel-squared"],[1,"icon-trash-empty"]],template:function(e,i){e&1&&(E(0,po,3,0,"div",1),m(1,"div",2,0),W(3,bo,3,4,"div",3,Q),f()),e&2&&(L(i.groups.length>1?0:-1),g(3),Z(i.groups))},dependencies:[ze,Ke,Qe,Gt,ot],styles:['[_nghost-%COMP%]{display:flex;overflow:hidden;flex-direction:column;flex:1;border:1px solid var(--card-layout-color-border);border-radius:4px}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{border-bottom:1px solid var(--card-layout-color-border);width:100%;display:flex;flex-wrap:wrap;padding-top:2px;padding-bottom:2px;color:var(--dialog-text-color);white-space:nowrap}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;flex:1 1 140px;padding:2px 4px;font-size:.9em;cursor:pointer;text-align:center}[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--main-text-color-lt)}@media only screen and (max-width: 1000px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{justify-content:center}}@media only screen and (width >= 400px) and (height <= 600px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]{overflow:hidden auto;width:100%;flex:1}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]{border-top:1px solid var(--card-layout-color-border);color:var(--main-content-text-color);padding-top:12px;padding-bottom:12px;height:48px;display:flex;justify-content:space-between;align-items:center;text-align:center;cursor:pointer}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]:hover{background-color:var(--dialog-background-color-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander[_ngcontent-%COMP%]{margin-left:20px;min-width:20px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander[_ngcontent-%COMP%]:after{content:"+";color:var(--main-content-text-color-muted);font-size:1.2em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-expander.expanded[_ngcontent-%COMP%]:after{content:"-"}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .group-name[_ngcontent-%COMP%]   .group-count[_ngcontent-%COMP%]{font-size:.8em;color:var(--main-content-text-color-muted);margin-right:20px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]:first-of-type   .group-name[_ngcontent-%COMP%]{border-top:inherit}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{padding:20px 10px 10px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1;margin-right:20px;align-items:center;flex-direction:row;display:flex}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:8px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   .random-options[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--main-content-text-color)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-top:20px;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-evenly;gap:4px;padding-bottom:12px;box-sizing:border-box}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-top:8px;width:300px;height:200px;cursor:pointer;border:1px solid var(--card-layout-color-border);background-color:var(--card-layout-color-bg);display:block;position:relative;overflow:clip;box-sizing:border-box}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{display:block;width:100%;height:200px;text-align:center;padding-bottom:1.5em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]{position:absolute;right:0;background-color:var(--preview-overlay-background);color:var(--preview-overlay-text);text-shadow:1px 1px var(--preview-overlay-text-shadow);border-bottom-left-radius:3px;padding:3px 3px 3px 6px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;min-width:1.2em;text-align:right;transition:all .1s;margin-top:-1px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.3)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%]{position:absolute;width:100%;height:1.5em;display:block;bottom:0;background-color:var(--card-text-color-bg);color:var(--card-text-color);text-align:center;font-size:.8em;padding:2px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-best-time[_ngcontent-%COMP%]{top:0;display:flex;flex-direction:row;justify-content:center}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%]{bottom:0;padding:2px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus{background-color:var(--card-layout-color-bg-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover   .preview-name[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus   .preview-name[_ngcontent-%COMP%]{background-color:var(--card-text-color-bg-hover)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:hover   .preview-custom[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]:focus   .preview-custom[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview.selected[_ngcontent-%COMP%]{border:1px solid var(--card-layout-color-border-selected);box-shadow:#00000029 0 3px 6px,#0000003b 0 3px 6px}@media only screen and (max-width: 2200px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:200px;height:190px}}@media only screen and (max-width: 700px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:49%}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:96%}}@media only screen and (max-height: 500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:120px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%;height:100%}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-1[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-2[_ngcontent-%COMP%], [_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-3[_ngcontent-%COMP%]{display:none}}@supports (display: grid){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}@media only screen and (width >= 400px) and (height <= 600px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .headline-anchors[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{display:grid;gap:4px;padding-right:4px;padding-bottom:12px;align-content:start;grid-template-columns:repeat(6,1fr);justify-items:stretch;align-items:stretch}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr 1fr 2fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{margin-top:0;width:100%;max-width:none;min-width:0;box-sizing:border-box;height:200px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{width:100%;height:200px}@media only screen and (max-width: 2200px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:190px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{height:190px}}@media only screen and (max-width: 1000px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview-random[_ngcontent-%COMP%]{grid-column:1/-1}}@media only screen and (max-width: 700px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-3[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   #item-random-2[_ngcontent-%COMP%]{display:none}}@media only screen and (max-height: 500px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:120px}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   app-layout-preview[_ngcontent-%COMP%]{height:100%}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews[_ngcontent-%COMP%]{grid-template-columns:1fr}[_nghost-%COMP%]   .groups[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   .previews-random[_ngcontent-%COMP%]{grid-template-columns:1fr}}}']});let n=o;return n})();function wo(n,o){if(n&1&&(m(0,"option",5),v(1),_(2,"translate"),_(3,"translate"),f()),n&2){let r=o.$implicit,t=M();x("value",r.id)("selected",t.buildMode===r.id),g(),Jt("",C(2,4,r.id)," [",C(3,6,r.id+"_DESC"),"]")}}function ko(n,o){if(n&1&&(v(0),_(1,"translate")),n&2){let r=o.$implicit,t=o.$index,e=o.$count;Jt(" ",C(1,2,r.title),"",t!==e-1?", ":""," ")}}function So(n,o){if(n&1&&(v(0," ["),W(1,ko,2,4,null,null,Q),v(3,"] ")),n&2){let r=M().$implicit;g(),Z(r.features)}}function Eo(n,o){if(n&1&&(m(0,"option",5),v(1),_(2,"translate"),E(3,So,4,0),f()),n&2){let r=o.$implicit,t=M();x("value",r.id)("selected",t.gameMode()===r.id),g(),z("",C(2,4,r.id)," "),g(2),L(r.features.length>0?3:-1)}}var hn=(()=>{let o=class o{constructor(){this.startEvent=et(),this.gameMode=Vt.required(),this.buildMode=Fe,this.buildModes=Re,this.gameModes=Ge,this.layoutService=S(it),this.storage=S(Rt)}onStart(t){t&&(this.startEvent.emit({layout:t,buildMode:this.buildMode,gameMode:this.gameMode()}),this.storage.storeLastPlayed(t.id))}randomGame(){let t=Math.floor(Math.random()*this.layoutService.layouts.items.length);this.onStart(this.layoutService.layouts.items[t])}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q({type:o,selectors:[["app-choose-layout"]],inputs:{gameMode:[1,"gameMode"]},outputs:{startEvent:"startEvent",gameMode:"gameModeChange"},decls:20,vars:10,consts:[[3,"startEvent","layouts"],[1,"choose-buttons"],[1,"generator"],["for","board-generator-select"],["id","board-generator-select",3,"change"],[3,"value","selected"],[1,"mode"],["for","game-mode-select"],["id","game-mode-select",3,"change"],[1,"start-links"],[1,"link",3,"click"]],template:function(e,i){e&1&&(m(0,"app-layout-list",0),y("startEvent",function(a){return i.onStart(a)}),f(),m(1,"div",1)(2,"div",2)(3,"label",3),v(4),_(5,"translate"),f(),m(6,"select",4),y("change",function(a){return i.buildMode=a.target.value}),W(7,wo,4,8,"option",5,Q),f()(),m(9,"div",6)(10,"label",7),v(11),_(12,"translate"),f(),m(13,"select",8),y("change",function(a){return i.gameMode.set(a.target.value)}),W(14,Eo,4,6,"option",5,Q),f()(),m(16,"div",9)(17,"button",10),y("click",function(){return i.randomGame()}),v(18),_(19,"translate"),f()()()),e&2&&(x("layouts",i.layoutService.layouts.items),g(4),z("",C(5,4,"BOARD_GENERATOR"),":"),g(3),Z(i.buildModes),g(4),z("",C(12,6,"GAME_MODE"),":"),g(3),Z(i.gameModes),g(4),T(C(19,8,"START_RANDOM")))},dependencies:[un,ot],styles:["[_nghost-%COMP%]{padding:0;margin:0;width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-flow:row nowrap;align-items:flex-end;gap:8px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{text-align:right;display:inline-block}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--input-text-color);text-decoration:none;padding:8px 12px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:2px}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .generator[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], [_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:30%}@media only screen and (max-height: 700px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:50%}}@media only screen and (max-height: 500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{padding-top:4px}}@media only screen and (max-width: 500px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:5px}}@media only screen and (width >= 400px) and (height <= 600px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:unset}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7em}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{max-width:unset}[_nghost-%COMP%]   .choose-buttons[_ngcontent-%COMP%]   .start-links[_ngcontent-%COMP%]{display:none}}"]});let n=o;return n})();var Ut=class{constructor(){this.gestureIndicators=[]}hide(o){let r=o;r&&setTimeout(()=>{r.state="hidden",setTimeout(()=>{this.removeIndicator(o)},250)},500)}removeIndicator(o){for(let r=0;r<this.gestureIndicators.length;r++){let t=this.gestureIndicators[r];if(t.x===o.x&&t.y===o.y){this.gestureIndicators.splice(r,1);break}}}setSize(o,r){this.gestureIndicators[o].size=r,this.gestureIndicators[o].top=this.gestureIndicators[o].y-r/2,this.gestureIndicators[o].left=this.gestureIndicators[o].x-r/2}display(o,r,t){if(o>0&&r>0){let e={x:o,y:r,size:t,top:r-t/2,left:o-t/2,state:"hidden"};return this.gestureIndicators.push(e),setTimeout(()=>{e.state="visible"},100),e}}};var fn=(()=>{let o=class o{transform(t,e){return`${e}${t??""}`}};o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=mt({name:"prefix",type:o,pure:!0});let n=o;return n})();var Lo=(n,o)=>o.source.z+":"+o.source.x+":"+o.source.y;function To(n,o){if(n&1&&(gt(),m(0,"title"),v(1),_(2,"translate"),f()),n&2){let r=M().$implicit;g(),T(C(2,1,r.url))}}function Bo(n,o){if(n&1){let r=R();gt(),m(0,"g",9),y("mouseup",function(e){let i=b(r).$implicit,s=M();return w(s.onClickUp(e,i))})("touchend",function(e){let i=b(r).$implicit,s=M();return w(s.onTouchTileEnd(e,i))}),m(1,"g",10),E(2,To,3,3,":svg:title"),k(3,"rect",11)(4,"rect",12)(5,"use",13),_(6,"prefix"),k(7,"use",14),f()()}if(n&2){let r=o.$implicit,t=M();G("selected",r.source.selected)("hidden",r.source.picked)("hinted",r.source.hinted)("wiggle",r.source.effects==null?null:r.source.effects.wiggle),at("transform",r.pos.translate),g(2),L(r.url?2:-1),g(3),at("href",xe(6,15,r.url,t.urlPrefix),null,"xlink")("x",t.imagePos[0])("y",t.imagePos[1])("width",t.imagePos[2])("height",t.imagePos[3])}}function Do(n,o){if(n&1&&k(0,"div",15),n&2){let r=o.$implicit;Bt("top",r.top,"px")("left",r.left,"px")("width",r.size,"px")("height",r.size,"px")("transform",r.transform),G("visible",r.state==="visible")}}var _n=1470,Cn=960;function jt(n,o,r){return Math.min(Math.max(o,n),r)}var Mn=(()=>{let o=class o{constructor(){this.background=H(),this.imageSet=H(),this.kyodaiUrl=H(),this.stones=H(),this.clickEvent=et(),this.indicators=new Ut,this.drawStones=[],this.rotate=!1,this.transformSVG="",this.transformStage="",this.viewport=`0 0 ${_n} ${Cn}`,this.prefix="",this.urlPrefix="",this.imagePos=[1,1,69,88],this.imageCut=[0,0,65,90],this.scale=1,this.panX=0,this.panY=0,this.bounds=[0,0,_n,Cn],this.lastPinch=0,this.touchPoints=[],this.initialDistance=0,this.initialScale=1,this.lastTouchX=0,this.lastTouchY=0,this.initialTouchX=0,this.initialTouchY=0,this.hasTouchPanMoved=!1,this.hasPinchChanged=!1,this.lastMouseX=0,this.lastMouseY=0,this.initialMouseX=0,this.initialMouseY=0,this.isPanning=!1,this.isPinching=!1,this.app=S(lt),this.element=S(ft)}ngOnInit(){this.resize(window)}ngOnChanges(t){if(t.stones&&this.updateStones(t.stones.currentValue),t.background&&this.updateBackground(t.background.currentValue),t.imageSet){this.prefix=`b_${t.imageSet.currentValue}_`,this.urlPrefix=`#b_${t.imageSet.currentValue}_`;let e=je(t.imageSet.currentValue);this.imagePos=e?[0,0,75,100]:[6,6,63,88],this.imageCut=e?[1,1,73,98]:[0,0,65,90]}}onWheel(t){t.preventDefault();let i=(t.deltaY<0?1:-1)===1?this.scale+.15:this.scale-.15;this.zoomSVGValue(i,t.clientX,t.clientY);let s=this.indicators.display(t.clientX,t.clientY,i*10);this.indicators.hide(s)}onResize(t){let e=t.target;e&&this.resize(e)}onMouseDown(t){this.scale>1&&(t.preventDefault(),this.lastMouseX=t.clientX,this.lastMouseY=t.clientY,this.initialMouseX=t.clientX,this.initialMouseY=t.clientY)}onMouseMove(t){if(this.scale>1){if(!this.isPanning&&this.initialMouseX!==0&&this.initialMouseY!==0){let e=t.clientX-this.initialMouseX,i=t.clientY-this.initialMouseY;Math.hypot(e,i)>=10&&(this.isPanning=!0)}this.isPanning&&(t.preventDefault(),this.updatePanning(t))}}onMouseUp(t){let e=t.type==="mouseleave";if(this.isPanning)t.preventDefault(),this.updatePanning(t);else if(!e){if(this.scale===1)this.clickEvent.emit(void 0);else if(this.initialMouseX!==0&&this.initialMouseY!==0){let i=t.clientX-this.initialMouseX,s=t.clientY-this.initialMouseY;Math.hypot(i,s)<4&&this.clickEvent.emit(void 0)}}this.stopPanning()}onTouchTileEnd(t,e){this.hasPinchChanged||this.hasTouchPanMoved||this.clickEvent.emit(e?.source)}onClickUp(t,e){this.initialMouseX=0,this.initialMouseY=0,this.isPanning?(this.updatePanning(t),this.stopPanning()):(this.clickEvent.emit(e?.source),t.stopPropagation())}onTouchStart(t){t.preventDefault(),this.touchPoints=[],this.hasTouchPanMoved=!1,this.hasPinchChanged=!1;let e=Array.from(t.touches);for(let i of e)this.touchPoints.push({x:i.clientX,y:i.clientY,identifier:i.identifier});if(this.touchPoints.length===1)this.lastTouchX=this.touchPoints[0].x,this.lastTouchY=this.touchPoints[0].y,this.initialTouchX=this.touchPoints[0].x,this.initialTouchY=this.touchPoints[0].y,this.isPanning=!0;else if(this.touchPoints.length===2){this.isPanning=!1,this.isPinching=!0,this.initialDistance=this.getDistance(this.touchPoints[0],this.touchPoints[1]),this.initialScale=this.scale,this.indicators.gestureIndicators=[];let i=(this.touchPoints[0].x+this.touchPoints[1].x)/2,s=(this.touchPoints[0].y+this.touchPoints[1].y)/2;this.indicators.display(i,s,30),this.lastPinch=Date.now()}}onTouchMove(t){t.preventDefault(),this.touchPoints=[];let e=Array.from(t.touches);for(let i of e)this.touchPoints.push({x:i.clientX,y:i.clientY,identifier:i.identifier});if(this.isPinching&&this.touchPoints.length===2){let s=this.getDistance(this.touchPoints[0],this.touchPoints[1])/this.initialDistance,a=(this.touchPoints[0].x+this.touchPoints[1].x)/2,c=(this.touchPoints[0].y+this.touchPoints[1].y)/2;if(this.indicators.gestureIndicators[0]){let d=this.indicators.gestureIndicators[0];d.x=a,d.y=c,d.top=c-d.size/2,d.left=a-d.size/2}else this.indicators.display(a,c,30);let l=jt(30*s,10,80);this.indicators.setSize(0,l),Math.abs(s-1)>=.1&&(this.hasPinchChanged=!0),this.lastPinch=Date.now()}else if(this.isPanning&&this.touchPoints.length===1&&this.scale>1&&Date.now()-this.lastPinch>600){let i=this.touchPoints[0].x,s=this.touchPoints[0].y,a=i-this.lastTouchX,c=s-this.lastTouchY;if(Math.hypot(i-this.initialTouchX,s-this.initialTouchY)>=10){this.hasTouchPanMoved=!0;let d=this.indicators.display(i,s,10);this.indicators.hide(d)}this.setPanValue(this.panX+a,this.panY+c),this.lastTouchX=i,this.lastTouchY=s}}onTouchEnd(t){if(t.preventDefault(),this.isPinching){let i=this.indicators.gestureIndicators.at(0);i&&this.indicators.hide(i);let s=Array.from(t.touches).map(l=>({x:l.clientX,y:l.clientY,identifier:l.identifier})),a=Array.from(t.changedTouches).map(l=>({x:l.clientX,y:l.clientY,identifier:l.identifier})),c=[];if(s.length>=2?c.push(s[0],s[1]):s.length===1&&a.length>0?c.push(s[0],a[0]):a.length>=2&&c.push(a[0],a[1]),c.length===2){let d=this.getDistance(c[0],c[1])/this.initialDistance,p=this.initialScale;Math.abs(d-1)>=.1&&(p=this.initialScale*d);let u=(c[0].x+c[1].x)/2,O=(c[0].y+c[1].y)/2;this.zoomSVGValue(p,u,O)}this.isPinching=!1,this.lastPinch=Date.now()}else this.isPanning&&(this.updateTransform(),this.isPanning=!1);this.touchPoints=[];let e=Array.from(t.touches);for(let i of e)this.touchPoints.push({x:i.clientX,y:i.clientY,identifier:i.identifier});this.touchPoints.length===0&&(this.hasTouchPanMoved=!1,this.hasPinchChanged=!1,this.initialTouchX=0,this.initialTouchY=0)}updatePanning(t){let e=t.clientX-this.lastMouseX,i=t.clientY-this.lastMouseY,s=this.indicators.display(t.clientX,t.clientY,10);this.indicators.hide(s),this.setPanValue(this.panX+e,this.panY+i),this.lastMouseX=t.clientX,this.lastMouseY=t.clientY,this.updateTransform()}stopPanning(){this.isPanning=!1,this.initialMouseX=0,this.initialMouseY=0}setPanValue(t,e){let i=this.element.nativeElement.offsetWidth||0,s=this.element.nativeElement.offsetHeight||0,a=50,c=Math.max(0,(this.scale-1)*i),l=Math.max(0,(this.scale-1)*s),d=-c-a,p=a,u=-l-a,O=a;this.panX=jt(t,d,p),this.panY=jt(e,u,O)}zoomSVGValue(t,e,i){let s=this.scale,a=jt(t,1,2);if(a!==s){if(a<1.01)this.scale=1,this.panX=0,this.panY=0;else{let c=(e-this.panX)/this.scale,l=(i-this.panY)/this.scale,d=e-c*a,p=i-l*a;this.scale=a,this.setPanValue(d,p)}this.updateTransform()}}updateViewPort(){window.requestAnimationFrame(()=>{this.setViewPort()})}updateTransform(){window.requestAnimationFrame(()=>{this.setTransform()})}setTransform(){let t=this.scale>1?` scale(${this.scale})`:"";if(this.transformSVG=`translate(${this.panX}px, ${this.panY}px)${t}`,this.rotate){let[e,i,s,a]=ne(this.bounds),c=e+s/2,l=i+a/2;this.transformStage=`rotate(90 ${c} ${l})`}else this.transformStage=""}getDistance(t,e){let i=e.x-t.x,s=e.y-t.y;return Math.hypot(i,s)}resize(t){let e=t.innerHeight>t.innerWidth;this.panX=0,this.panY=0,this.scale=1,this.updateTransform(),e!==this.rotate&&(this.rotate=e),this.updateViewPort()}setViewPort(){let[t,e,i,s]=ne(this.bounds);if(this.rotate){let a=t+i/2,c=e+s/2,l=s,d=i;t=a-l/2,e=c-d/2,i=l,s=d}this.viewport=`${t} ${e} ${i} ${s}`}updateStones(t){if(!t)return;this.scale=1,this.panX=0,this.panY=0;let e=t.filter(i=>i!==void 0).map(i=>({z:i.z,x:i.x,y:i.y,v:i.v,visible:!0,url:i.img?.id,pos:Ye(i.z,i.x,i.y),source:i,className:i.effects?.wiggle?"wiggle":void 0}));this.bounds=He(e),this.drawStones=Xe(e),this.setViewPort(),this.setTransform()}webpSupported(){try{let t=document.createElement("canvas");return!t.getContext?.("2d")?!1:t.toDataURL("image/webp").startsWith("data:image/webp")}catch{return!1}}backgroundFormat(){return this.webpSupported()?"webp":"jpg"}updateBackground(t){let e=Ne.find(i=>i.img===t)?.img;this.backgroundUrl=e?`url("assets/img/${e}.${this.backgroundFormat()}")`:void 0}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q({type:o,selectors:[["app-board"]],hostVars:2,hostBindings:function(e,i){e&1&&y("wheel",function(a){return i.onWheel(a)})("resize",function(a){return i.onResize(a)},Ce)("mousedown",function(a){return i.onMouseDown(a)})("mousemove",function(a){return i.onMouseMove(a)})("mouseup",function(a){return i.onMouseUp(a)})("mouseleave",function(a){return i.onMouseUp(a)})("touchstart",function(a){return i.onTouchStart(a)})("touchmove",function(a){return i.onTouchMove(a)})("touchend",function(a){return i.onTouchEnd(a)})("touchcancel",function(a){return i.onTouchEnd(a)}),e&2&&Bt("background-image",i.backgroundUrl)},inputs:{background:[1,"background"],imageSet:[1,"imageSet"],kyodaiUrl:[1,"kyodaiUrl"],stones:[1,"stones"]},outputs:{clickEvent:"clickEvent"},features:[ht],decls:14,vars:18,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",1,"board-svg",3,"mouseup"],["id","front","width","300","height","400","viewBox","0 0 300 400"],["transform","translate(28,-614)","d","M -4.7687833,775.07096 C -9.6501835,741.99485 -16.84552,674.23676 -1.2788716,652.0641 18.998297,625.94378 233.50094,631.63117 263.31435,653.90999 276.21398,662.64856 70.349579,663.12124 47.099353,691.74479 24.390958,719.11242 0.65060847,818.18718 -4.7687833,775.07096 Z",2,"fill","#ffffff","fill-opacity","0.3","fill-rule","evenodd","stroke","none","filter","blur(10px)"],["id","mah-image-clip"],["rx","10","ry","10","fill","#fff"],["app-image-set-loader","",3,"imageSet","kyodaiUrl","dark","prefix"],[1,"stage"],[1,"draw",3,"selected","hidden","hinted","wiggle"],[1,"gesture-indicator",3,"top","left","width","height","transform","visible"],[1,"draw",3,"mouseup","touchend"],[1,"tile"],["x","3","y","3","width","75","height","100","rx","10","ry","10",1,"shadow"],["x","0","y","0","width","75","height","100","rx","10","ry","10",1,"stone"],["clip-path","url(#mah-image-clip)"],[0,"xlink","href","#front","x","0","y","0","width","75","height","100",1,"front"],[1,"gesture-indicator"]],template:function(e,i){e&1&&(gt(),m(0,"svg",0),y("mouseup",function(a){return i.onMouseUp(a)}),m(1,"defs")(2,"svg",1),k(3,"path",2),f(),m(4,"clipPath",3),k(5,"rect",4),f()(),m(6,"style"),v(7," g.tile { transform-origin: 50px 32.5px; opacity: 1; transition: transform 120ms ease-in-out; } @keyframes mah-wiggle { 0% { transform: rotate(0deg); } 20% { transform: rotate(-3deg); } 40% { transform: rotate(3deg); } 60% { transform: rotate(-1deg); } 80% { transform: rotate(1deg); } 100% { transform: rotate(0deg); } } g.wiggle g.tile { animation: mah-wiggle 250ms ease-in-out; } g.hinted g.tile { transform: scale(1.12); } g.hinted g.tile > rect { stroke: #9f0000; stroke-width: 3px; } @keyframes mah-select-pop { 0% { transform: scale(1); } 60% { transform: scale(1.08); } 100% { transform: scale(1.04); } } g.selected g.tile { transform: scale(1.04); animation: mah-select-pop 140ms ease-out; } g.selected g.tile rect.stone { stroke: black; fill: #F8EABB; } g.selected.hinted g.tile { transform: scale(1.14); animation: none; } g.selected.hinted g.tile rect.stone { stroke: #9f0000; stroke-width: 3px; } g.draw rect.shadow { fill: #191919; opacity: 0.6; stroke-width: 1; stroke: black; } g.draw rect.stone { fill: #FFF9E5; stroke-width: 1; stroke: black; } g.hidden { opacity: 0; } g.stage.contrast g.draw rect.stone { stroke-width: 2; } g.stage.contrast g.draw rect.shadow { opacity: 0.7; } g.stage.dark g.draw rect.shadow { opacity: 0.6; stroke-width: 1; fill: #9d948c; stroke: green; } g.stage.dark g.draw rect.stone { fill: #000; stroke-width: 1; stroke: #9d948c; } g.stage.dark g.selected g.tile rect.stone { stroke: #F8EABB; fill: black; } g.stage.dark g.hinted g.tile rect.stone { stroke: #ef0202; } g.stage.dark g.selected.hinted g.tile rect.stone { stroke: #ef0202; } g.stage.dark.contrast g.draw rect.stone { stroke-width: 2; } g.stage.dark.contrast g.draw rect.shadow { opacity: 0.7; } g.stage.dark .front { display: none; } g.stage.dark .front { display: unset; } @media (prefers-reduced-motion: reduce) { g.tile { transition: none; } g.wiggle g.tile { animation: none; } g.selected g.tile { animation: none; } } "),f(),k(8,"defs",5),m(9,"g",6),W(10,Bo,8,18,":svg:g",7,Lo),f()(),W(12,Do,1,12,"div",8,Q)),e&2&&(Bt("transform",i.transformSVG),G("rotate",i.rotate),at("viewBox",i.viewport),g(5),at("x",i.imageCut[0])("y",i.imageCut[1])("width",i.imageCut[2])("height",i.imageCut[3]),g(3),x("imageSet",i.imageSet())("kyodaiUrl",i.kyodaiUrl())("dark",i.app.settings.dark)("prefix",i.prefix),g(),G("dark",i.app.settings.dark)("contrast",i.app.settings.contrast),at("transform",i.transformStage),g(),Z(i.drawStones),g(2),Z(i.indicators.gestureIndicators))},dependencies:[We,fn,ot],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block;background-repeat:repeat;background-size:cover}[_nghost-%COMP%]   .board-svg[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform-origin:0 0 0;transform:translate(0) scale(1);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .gesture-indicator[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;position:fixed;top:0;left:0;height:50px;width:50px;display:block;border-radius:50%;text-align:center;line-height:45px;z-index:10;background-color:var(--gesture-indicator);transform:scale(0);transition:transform .15s ease-in-out}[_nghost-%COMP%]   .gesture-indicator.visible[_ngcontent-%COMP%]{transform:scale(1.5)}"]});let n=o;return n})();var Pn=(()=>{let o=class o{transform(t){return t===ee}};o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=mt({name:"gameModeEasy",type:o,pure:!0});let n=o;return n})(),On=(()=>{let o=class o{transform(t){return t===ee||t===Ae}};o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=mt({name:"gameModeStandard",type:o,pure:!0});let n=o;return n})();var Io=["info"],Vo=["settings"],Fo=["help"],Ro=["newgame"],Ao=()=>[import("./chunk-DEUNS7WP.js").then(n=>n.HelpComponent)],Go=()=>[import("./chunk-KU3LCR26.js").then(n=>n.TilesInfoComponent)],No=()=>[import("./chunk-XMDXNEUY.js").then(n=>n.SettingsComponent)];function $o(n,o){if(n&1){let r=R();m(0,"button",23),_(1,"translate"),y("click",function(){b(r);let e=M();return w(e.enterFullScreen())}),k(2,"i",38),f()}n&2&&x("title",A(C(1,2,"FULLSCREEN")))}function Yo(n,o){n&1&&k(0,"app-help")}function Xo(n,o){n&1&&(kt(0,Yo,1,0),St(1,0,Ao),Lt(),Et())}function Ho(n,o){n&1&&k(0,"app-tiles-info")}function zo(n,o){n&1&&(kt(0,Ho,1,0),St(1,0,Go),Lt(),Et())}function Uo(n,o){n&1&&k(0,"app-settings")}function jo(n,o){n&1&&(kt(0,Uo,1,0),St(1,0,No),Lt(),Et())}function qo(n,o){if(n&1){let r=R();m(0,"app-choose-layout",39),y("startEvent",function(e){b(r);let i=M();return w(i.startGame(e))}),f()}if(n&2){let r=M();x("gameMode",r.game.mode)}}function Wo(n,o){if(n&1&&(m(0,"div"),v(1),_(2,"translate"),f()),n&2){let r=M(2);g(),T(C(2,1,r.game.message.messageID))}}function Zo(n,o){if(n&1&&(m(0,"div"),v(1),_(2,"duration"),f()),n&2){let r=M(2);g(),T(C(2,1,r.game.message.playTime))}}function Ko(n,o){if(n&1){let r=R();m(0,"div",40),y("click",function(){b(r);let e=M();return w(e.clickMessage())}),E(1,Wo,3,3,"div"),E(2,Zo,3,3,"div"),f()}if(n&2){let r=M();g(),L(r.game.message.messageID?1:-1),g(),L(r.game.message.playTime?2:-1)}}var vn=(()=>{let o=class o{constructor(){this.info=nt.required("info"),this.settings=nt.required("settings"),this.help=nt.required("help"),this.newgame=nt.required("newgame"),this.app=S(lt),this.fullScreenEnabled=!0,this.title="",this.workerService=S(At),this.game=this.app.game,this.fullScreenEnabled=this.canFullscreen(),this.title=`${this.app.name} v${J.version}`}showNewGame(){this.newgame().visible.set(!0)}handleKeyDownEventKey(t){switch(t){case"h":{this.help().toggle();break}case"i":{this.info().toggle();break}case"s":{this.settings().toggle();break}case"t":{this.game.hint();break}case"m":{this.game.shuffle();break}case"g":{this.debugSolve();break}case"u":{this.game.back();break}case"n":{this.game.pause(),this.newgame().toggle();break}case" ":case"space":case"Space":case"spacebar":case"Spacebar":case"p":{this.game.isRunning()?this.game.pause():this.game.isPaused()&&this.game.resume();break}default:return!1}return!0}handleKeyDownDialogExit(){let t=this.help();if(t.visible())return t.toggle(),!0;let e=this.newgame();if(e.visible())return e.toggle(),!0;let i=this.info();if(i.visible())return i.toggle(),!0;let s=this.settings();return s.visible()?(s.toggle(),!0):!1}handleKeyDownEvent(t){t.key==="Escape"&&this.handleKeyDownDialogExit()||(t.target?.nodeName??"").toLocaleLowerCase()==="input"||this.handleKeyDownEventKey(t.key)&&t.preventDefault()}stoneClick(t){this.game.click(t)}isFullscreenEnabled(){let t=window.document;if(typeof t.fullscreenEnabled=="boolean")return t.fullscreenEnabled;let e=document.documentElement;return!!(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen)}canFullscreen(){return J.mobile?!1:this.isFullscreenEnabled()}isFullscreen(){let t=window.document;return!!(t.fullscreenElement||t.webkitIsFullScreen||t.mozFullScreen)}exitFullscreen(){let t=window.document;t.exitFullscreen?t.exitFullscreen().catch(e=>{console.error(e)}):t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}requestFullscreen(){let t=document.body;t.requestFullscreen?t.requestFullscreen().catch(e=>{console.error(e)}):t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()}enterFullScreen(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}newGame(){this.game.pause(),this.showNewGame()}startGame(t){this.newgame().visible.set(!1),this.game.reset(),this.game.start(t.layout,t.buildMode,t.gameMode)}toggleDialogState(t){t?this.app.game.isPaused()||this.app.game.pause():(this.app.settings.save(),this.app.game.isPaused()&&this.app.game.resume())}clickMessage(){this.game.isPaused()?this.game.resume():(this.game.reset(),this.showNewGame())}debugSolve(){if(J.production)return;let t=(e,i)=>{let s=i[e],a=i[e+1];if(!s||!a)return;let c=this.game.board.stones.filter(l=>l.z===s[0]&&l.x===s[1]&&l.y===s[2]||l.z===a[0]&&l.x===a[1]&&l.y===a[2]);if(c.length>1){for(let l of c)l.selected=!0;setTimeout(()=>{this.game.board.pick(c[0],c[1]),t(e+2,i)},300)}};this.workerService.solveGame(this.game.board.stones.filter(e=>!e.picked).map(e=>e.toPosition()),e=>{t(0,e.order)})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q({type:o,selectors:[["app-game-component"]],viewQuery:function(e,i){e&1&&(tt(i.info,Io,5),tt(i.settings,Vo,5),tt(i.help,Fo,5),tt(i.newgame,Ro,5)),e&2&&Ct(4)},hostBindings:function(e,i){e&1&&y("keydown",function(a){return i.handleKeyDownEvent(a)},bt)},decls:90,vars:100,consts:[["help",""],["info",""],["settings",""],["newgame",""],[1,"controls","controls-top"],[1,"ctrl","ctrl-name"],[1,"link","button",3,"click","title"],[1,"icon-logo"],[1,"name"],[1,"ctrl","ctrl-game"],[1,"icon-pause"],[1,"label"],[1,"link","button","feature",3,"click","title"],[1,"icon-spin1"],[1,"icon-undo"],[1,"icon-lightbulb"],[1,"icon-loop"],[1,"board",3,"clickEvent","stones","imageSet","kyodaiUrl","background"],[1,"controls","controls-bottom"],[1,"ctrl","ctrl-stats"],["title","Menu","aria-haspopup","true",1,"link","button","menu-button"],[1,"icon-menu"],["role","menu",1,"menu"],["role","menuitem",1,"link","button",3,"click","title"],[1,"icon-cog"],[1,"icon-volume-low"],[1,"icon-calendar"],["role","menuitem",1,"link","button",3,"title"],[1,"ctrl","ctrl-time"],[1,"label","button","text"],[1,"time"],["className","overlay-help",3,"clickEvent","title"],["className","overlay-info",3,"clickEvent","title"],["className","overlay-settings",3,"clickEvent","title"],["className","overlay-newgame",3,"clickEvent","title"],[1,"choose",3,"gameMode"],["className","overlay-message",3,"clickEvent","visible","noClose"],[1,"overlay-message-message"],[1,"icon-resize-full-alt"],[1,"choose",3,"startEvent","gameMode"],[1,"overlay-message-message",3,"click"]],template:function(e,i){if(e&1){let s=R();m(0,"div",4)(1,"div",5)(2,"button",6),_(3,"translate"),y("click",function(){b(s);let c=ct(74);return w(c.toggle())}),k(4,"i",7),m(5,"span",8),v(6),f()()(),m(7,"div",9)(8,"button",6),_(9,"translate"),y("click",function(){return b(s),w(i.game.toggle())}),k(10,"i",10),m(11,"span",11),v(12),_(13,"translate"),f()(),m(14,"button",12),_(15,"gameModeEasy"),_(16,"translate"),y("click",function(){return b(s),w(i.game.shuffle())}),k(17,"i",13),m(18,"span",11),v(19),_(20,"translate"),f()(),m(21,"button",12),_(22,"gameModeStandard"),_(23,"translate"),y("click",function(){return b(s),w(i.game.back())}),k(24,"i",14),m(25,"span",11),v(26),_(27,"translate"),f()(),m(28,"button",12),_(29,"gameModeStandard"),_(30,"translate"),y("click",function(){return b(s),w(i.game.hint())}),k(31,"i",15),m(32,"span",11),v(33),_(34,"translate"),f()(),m(35,"button",6),_(36,"translate"),y("click",function(){return b(s),w(i.newGame())}),k(37,"i",16),m(38,"span",11),v(39),_(40,"translate"),f()()()(),m(41,"app-board",17),y("clickEvent",function(c){return b(s),w(i.stoneClick(c))}),f(),m(42,"div",18)(43,"div",19)(44,"button",20),k(45,"i",21),f(),m(46,"div",22)(47,"button",23),_(48,"translate"),y("click",function(){b(s);let c=ct(81);return w(c.toggle())}),k(49,"i",24),f(),m(50,"button",23),_(51,"translate"),y("click",function(){return b(s),w(i.app.toggleSound())}),k(52,"i",25),f(),m(53,"button",23),_(54,"translate"),y("click",function(){b(s);let c=ct(77);return w(c.toggle())}),k(55,"i",26),f(),E(56,$o,3,4,"button",27),f()(),m(57,"div",28)(58,"span",29)(59,"small"),v(60),_(61,"translate"),f(),m(62,"span"),v(63),f()(),m(64,"span",29)(65,"small"),v(66),_(67,"translate"),f(),m(68,"span"),v(69),f()(),m(70,"span",30),v(71),_(72,"duration"),f()()(),m(73,"app-dialog",31,0),y("clickEvent",function(c){return b(s),w(i.toggleDialogState(c))}),E(75,Xo,3,0),f(),m(76,"app-dialog",32,1),_(78,"translate"),y("clickEvent",function(c){return b(s),w(i.toggleDialogState(c))}),E(79,zo,3,0),f(),m(80,"app-dialog",33,2),_(82,"translate"),y("clickEvent",function(c){return b(s),w(i.toggleDialogState(c))}),E(83,jo,3,0),f(),m(84,"app-dialog",34,3),_(86,"translate"),y("clickEvent",function(c){return b(s),w(i.toggleDialogState(c))}),E(87,qo,1,1,"app-choose-layout",35),f(),m(88,"app-dialog",36),y("clickEvent",function(){return b(s),w(i.clickMessage())}),E(89,Ko,3,2,"div",37),f()}if(e&2){let s=ct(74),a=ct(77),c=ct(81),l=ct(85);g(2),x("title",A(C(3,54,"OPEN_HELP"))),g(4),T(i.app.name),g(2),x("title",A(C(9,56,"PAUSE_LONG"))),g(4),T(C(13,58,"PAUSE")),g(2),G("enabled",C(15,60,i.game.mode)),x("title",A(C(16,62,"SHUFFLE_LONG"))),g(5),T(C(20,64,"SHUFFLE")),g(2),G("enabled",C(22,66,i.game.mode)),x("title",A(C(23,68,"UNDO_LONG"))),at("disabled",i.game.board.undo.length===0?!0:null),g(5),T(C(27,70,"UNDO")),g(2),G("enabled",C(29,72,i.game.mode)),x("title",A(C(30,74,"HINT_LONG"))),g(5),T(C(34,76,"HINT")),g(2),x("title",A(C(36,78,"RESTART_LONG"))),g(4),T(C(40,80,"RESTART")),g(2),x("stones",i.game.board.stones)("imageSet",i.app.settings.tileset)("kyodaiUrl",i.app.settings.kyodaiUrl)("background",i.app.settings.background),g(6),x("title",A(C(48,82,"OPEN_SETTINGS"))),g(3),G("inactive",!i.app.settings.sounds),x("title",A(C(51,84,"AUDIO_SOUNDS"))),g(3),x("title",A(C(54,86,"TILES_INFO"))),g(3),L(i.fullScreenEnabled?56:-1),g(4),z("",C(61,88,"STONES"),":"),g(3),T(i.game.board.count),g(3),z("",C(67,90,"FREE"),":"),g(3),T(i.game.board.free.length),g(2),T(C(72,92,i.game.clock.elapsed)),g(2),x("title",i.title),g(2),L(s.visible()?75:-1),g(),x("title",C(78,94,"TILES")),g(3),L(a.visible()?79:-1),g(),x("title",C(82,96,"SETTINGS")),g(3),L(c.visible()?83:-1),g(),x("title",C(86,98,"SELECT_BOARD")),g(3),L(l.visible()?87:-1),g(),x("visible",!!i.game.message)("noClose",!0),g(),L(i.game.message?89:-1)}},dependencies:[Mn,hn,Ze,Gt,On,Pn,ot],styles:["[_nghost-%COMP%]{display:flex;flex-flow:column nowrap;width:100%;height:100%;background-color:var(--main-bg-color)}.dkgreen[_nghost-%COMP%]{--main-bg-color: #19262e;--main-bg-color-lt: #22353f;--main-bg-color-dk: #142026}.dkblue[_nghost-%COMP%]{--main-bg-color: #001552;--main-bg-color-lt: #22353f;--main-bg-color-dk: #142026;--main-text-color: #fff;--main-text-color-lt: #ffe9c0;--main-text-color-dk: #dcdbdb;--dialog-text-color: #001552}.ltblue[_nghost-%COMP%]{--main-bg-color: #34385a;--main-bg-color-lt: #22353f;--main-bg-color-dk: #142026;--main-text-color: #fff;--main-text-color-lt: #ffe9c0;--main-text-color-dk: #dcdbdb;--dialog-text-color: #34385a}.white[_nghost-%COMP%]{--main-bg-color: #fff;--main-bg-color-lt: #b9b9b9;--main-bg-color-dk: #f6f5f5;--main-text-color: #000;--main-text-color-lt: #646464;--main-text-color-dk: #8c8c8c;--dialog-text-color: #000}.brown[_nghost-%COMP%]{--main-bg-color: brown;--main-bg-color-lt: #ad2d2d;--main-bg-color-dk: #982626;--main-text-color: #fff;--main-text-color-lt: #ffe9c0;--main-text-color-dk: #dcdbdb;--dialog-text-color: #601616}.black[_nghost-%COMP%]{--main-bg-color: #000;--main-bg-color-lt: #3a3a3a;--main-bg-color-dk: #171717}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{min-width:170px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .feature.enabled[_ngcontent-%COMP%]{display:unset}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{display:inline-block;color:var(--main-text-color);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{text-decoration:none;font-weight:400;color:var(--main-text-color);margin-left:16px;padding:.2em .8em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:2px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--main-text-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[disabled][_ngcontent-%COMP%]{color:var(--main-text-color-dk)}@media only screen and (min-width: 400px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{margin-left:10px}}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{background-color:transparent;background-image:none;border-color:transparent;border-radius:3px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:hover{border-color:var(--main-bg-color-lt)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]{font-weight:600;cursor:pointer}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]   .icon-logo[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]{margin-left:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .inactive[_ngcontent-%COMP%]:hover{color:var(--main-text-color-dk)}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-game[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]{cursor:default;float:right;padding-right:12px;padding-top:2px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{margin-right:26px;font-variant-numeric:lining-nums}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-right:6px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{min-width:98px;display:inline-block;text-align:right;font-variant-numeric:slashed-zero tabular-nums}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]{cursor:default}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-left:10px}@media only screen and (min-width: 500px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-game[_ngcontent-%COMP%]{padding-right:8px}}@media only screen and (min-width: 700px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.2em}}@media only screen and (min-width: 1000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.3em}}@media only screen and (min-width: 1900px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.6em}}@media only screen and (min-width: 2200px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:2.3em}}@media only screen and (min-width: 3000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:4em}}@media only screen and (max-width: 1000px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:1.3em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:.2em}}@media only screen and (max-width: 700px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 500px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{padding:0 6px}}@media only screen and (max-width: 400px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding:.2em;margin-left:2px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{min-width:80px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{margin-left:0}}@media only screen and (max-width: 280px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]{font-size:18px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl-game[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding-left:.1em;padding-right:.1em}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{min-width:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu-button[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:none;position:absolute;bottom:100%;right:0;background:var(--dialog-background-color);border:1px solid var(--dialog-border-color);border-radius:8px;flex-direction:column;z-index:10}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:.5em;margin-left:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]:hover   .menu[_ngcontent-%COMP%], [_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl.ctrl-stats[_ngcontent-%COMP%]:focus-within   .menu[_ngcontent-%COMP%]{display:flex}}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]{border-bottom:1px solid var(--main-bg-color-lt)}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]{border-top:1px solid var(--main-bg-color-lt);margin-bottom:4px}[_nghost-%COMP%]   .board[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;overflow:hidden}@media only screen and (width >= 400px) and (height <= 600px){[_nghost-%COMP%]{flex-direction:row;padding-left:calc(52px + env(safe-area-inset-left));padding-right:calc(52px + env(safe-area-inset-right))}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{float:unset!important;text-align:center}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:32px}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:block;margin-left:0;margin-bottom:10px;padding-left:0;padding-right:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .feature.enabled[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]{min-width:unset;max-width:52px;padding:0;display:flex;flex-direction:column;height:calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));position:absolute;left:env(safe-area-inset-left);justify-content:space-between}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]   .ctrl.ctrl-name[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]   .ctrl.ctrl-game[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]   .ctrl.ctrl-game[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-of-type{margin-bottom:2px}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]   span.name[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls-top[_ngcontent-%COMP%]   span.label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]{min-width:98px;max-width:98px;display:flex;flex-direction:column;height:calc(100% - env(safe-area-inset-top) - env(safe-area-inset-bottom));position:absolute;right:env(safe-area-inset-right);padding:0;align-items:flex-end}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;text-align:right}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-left:0}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]{text-align:right;justify-content:flex-end;padding-right:6px;padding-left:6px}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{text-align:right;min-width:0}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{text-align:right;margin-right:0;margin-bottom:8px}[_nghost-%COMP%]   .controls-bottom[_ngcontent-%COMP%]   .ctrl.ctrl-time[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-right:0;line-height:.9em}}@media only screen and (width >= 400px) and (height <= 300px){[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{margin-bottom:0}[_nghost-%COMP%]   .controls[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}}"]});let n=o;return n})();var Qo=["gameComponent"],Jo=["editorPlaceholder"];function ti(n,o){if(n&1&&k(0,"app-game-component",3,1),n&2){let r=M();Dt(r.app.settings.theme),x("hidden",r.loading)}}function ei(n,o){}var xn=(()=>{let o=class o{constructor(){this.gameComponent=nt.required("gameComponent"),this.editorPlaceholder=nt.required("editorPlaceholder",{read:Kt}),this.app=S(lt),this.loading=!0,this.editorVisible=!1,this.layoutService=S(it),this.meta=S(Be),this.updateName(),this.registerWindowListeners()}ngOnInit(){this.init().catch(t=>{console.error(t)})}handleKeyDownEvent(t){(t.target?.nodeName??"").toLocaleLowerCase()!=="input"&&J.editor&&t.key==="e"&&(this.toggleEditor(),t.preventDefault())}loadEditor(){J.editor&&import("./chunk-TKDX5737.js").then(({EditorComponent:t})=>{let e=this.editorPlaceholder().createComponent(t);this.editorSubscription=e.instance.closeEvent.subscribe(()=>{this.toggleEditor()})}).catch(t=>{console.error(t)})}toggleEditor(){J.editor&&(this.editorVisible=!this.editorVisible,this.editorVisible?(this.app.game.pause(),this.loadEditor()):(this.editorSubscription&&(this.editorSubscription.unsubscribe(),this.editorSubscription=void 0),this.editorPlaceholder().clear()))}init(){return qt(this,null,function*(){yield this.layoutService.get(),this.loading=!1;let t=new URLSearchParams(window.location.search),e=yield this.checkImport(t.get("mah"));this.layoutService.selectBoardID=e[0]||t.get("board"),window.location.search&&this.clearSearchParameters(),(this.app.game.isIdle()||this.layoutService.selectBoardID)&&this.gameComponent().showNewGame()})}clearSearchParameters(){try{window.history.replaceState(null,"",window.location.pathname)}catch(t){console.error(t)}}checkImport(t){return qt(this,null,function*(){if(!t)return[];try{let e=[],i=JSON.parse(atob(t)),s=[];for(let a of i.boards){let c=this.layoutService.expandLayout(a,!0);e.push(c.id),!this.layoutService.layouts.items.some(l=>l.id===c.id)&&!s.some(l=>l.id===c.id)&&s.push(it.layout2loadLayout(c,a.map))}return s.length>0&&this.layoutService.storeCustomBoards(s),e}catch(e){return console.error(e),[]}})}registerWindowListeners(){window.addEventListener("beforeunload",()=>{this.app.game.isRunning()&&this.app.game.pause()},!1),window.addEventListener("blur",()=>{this.app.game.isRunning()&&this.app.game.pause()},!1)}updateName(){let t=this.meta.getTag("name=application-name");this.app.name=t?t.content:this.app.name}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=q({type:o,selectors:[["app-root"]],viewQuery:function(e,i){e&1&&(tt(i.gameComponent,Qo,5),tt(i.editorPlaceholder,Jo,5,Kt)),e&2&&Ct(2)},hostBindings:function(e,i){e&1&&y("keydown",function(a){return i.handleKeyDownEvent(a)},bt)},decls:3,vars:1,consts:[["editorPlaceholder",""],["gameComponent",""],[3,"hidden","class"],[3,"hidden"]],template:function(e,i){e&1&&(E(0,ti,2,3,"app-game-component",2),Me(1,ei,0,0,"ng-template",null,0,ye)),e&2&&L(i.editorVisible?-1:0)},dependencies:[vn],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}"]});let n=o;return n})();var le=new he("TRANSLATE_HTTP_LOADER_CONFIG"),ni=(()=>{class n{http;config;constructor(){this.config=de({prefix:"/assets/i18n/",suffix:".json",enforceLoading:!1,useHttpBackend:!1},S(le)),this.http=this.config.useHttpBackend?new Ft(S(te)):S(Ft)}getTranslation(r){let t=this.config.enforceLoading?`?enforceLoading=${Date.now()}`:"";return this.http.get(`${this.config.prefix}${r}${this.config.suffix}${t}`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function yn(n={}){let o=n.useHttpBackend??!1;return[{provide:le,useValue:n},{provide:De,useClass:ni,deps:[o?te:Ft,le]}]}J.production&&void 0;Se(xn,{providers:[be(),fe(Ee,we,...J.modules),Ve({loader:yn({prefix:"./assets/i18n/",suffix:".json"}),fallbackLang:"en"}),lt,it,At,Mt,qe,Le(Te())]}).catch(console.error);
