import{C as ue,D as he,I as fe,K as ee,c as ie,e as Q,g as L,j as ae,k as ce,n as H,p as de,s as T,u as O,w as y,x as M,y as _,z as le}from"./chunk-UWITPWPI.js";function pe(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(s)}return null}var X=class{};var S=class{},F=class{},b=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let o=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(o,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let i=this.headers.get(t);if(!i)return;i=i.filter(c=>s.indexOf(c)===-1),i.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,i)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var J=class{encodeKey(e){return me(e)}encodeValue(e){return me(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Fe(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let s=o.indexOf("="),[i,c]=s==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,s)),e.decodeValue(o.slice(s+1))],a=t.get(i)||[];a.push(c),t.set(i,a)}),t}var Ue=/%(\d[a-f0-9])/gi,Ce={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function me(n){return encodeURIComponent(n).replace(Ue,(e,t)=>Ce[t]??e)}function $(n){return`${n}`}var E=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new J,e.fromString){if(e.fromObject)throw new T(2805,!1);this.map=Fe(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],o=Array.isArray(r)?r.map($):[$(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let o=e[r];Array.isArray(o)?o.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push($(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],o=r.indexOf($(e.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var V=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function je(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ge(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _e(n){return typeof Blob<"u"&&n instanceof Blob}function ye(n){return typeof FormData<"u"&&n instanceof FormData}function Be(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ee="Content-Type",Te="Accept",we="X-Request-URL",Re="text/plain",ve="application/json",Ge=`${ve}, ${Re}, */*`,x=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,o){this.url=t,this.method=e.toUpperCase();let s;if(je(this.method)||o?(this.body=r!==void 0?r:null,s=o):s=r,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new T(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),this.transferCache=s.transferCache}if(this.headers??=new b,this.context??=new V,!this.params)this.params=new E,this.urlWithParams=t;else{let i=this.params.toString();if(i.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),a=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+a+i}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ge(this.body)||_e(this.body)||ye(this.body)||Be(this.body)?this.body:this.body instanceof E?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ye(this.body)?null:_e(this.body)?this.body.type||null:ge(this.body)?null:typeof this.body=="string"?Re:this.body instanceof E?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?ve:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,s=e.keepalive??this.keepalive,i=e.priority||this.priority,c=e.cache||this.cache,a=e.mode||this.mode,u=e.redirect||this.redirect,g=e.credentials||this.credentials,p=e.referrer||this.referrer,R=e.integrity||this.integrity,B=e.transferCache??this.transferCache,G=e.timeout??this.timeout,z=e.body!==void 0?e.body:this.body,d=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,m=e.headers||this.headers,I=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(m=Object.keys(e.setHeaders).reduce((v,N)=>v.set(N,e.setHeaders[N]),m)),e.setParams&&(I=Object.keys(e.setParams).reduce((v,N)=>v.set(N,e.setParams[N]),I)),new n(t,r,z,{params:I,headers:m,context:f,reportProgress:l,responseType:o,withCredentials:d,transferCache:B,keepalive:s,cache:c,priority:i,timeout:G,mode:a,redirect:u,credentials:g,referrer:p,integrity:R})}},P=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(P||{}),D=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new b,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},K=class n extends D{constructor(e={}){super(e)}type=P.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},U=class n extends D{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=P.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},A=class extends D{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ze=200,Xe=204;function te(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var Ne=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,o={}){let s;if(t instanceof x)s=t;else{let a;o.headers instanceof b?a=o.headers:a=new b(o.headers);let u;o.params&&(o.params instanceof E?u=o.params:u=new E({fromObject:o.params})),s=new x(t,r,o.body!==void 0?o.body:null,{headers:a,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,integrity:o.integrity,timeout:o.timeout})}let i=Q(s).pipe(ce(a=>this.handler.handle(a)));if(t instanceof x||o.observe==="events")return i;let c=i.pipe(ae(a=>a instanceof U));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(L(a=>{if(a.body!==null&&!(a.body instanceof ArrayBuffer))throw new T(2806,!1);return a.body}));case"blob":return c.pipe(L(a=>{if(a.body!==null&&!(a.body instanceof Blob))throw new T(2807,!1);return a.body}));case"text":return c.pipe(L(a=>{if(a.body!==null&&typeof a.body!="string")throw new T(2808,!1);return a.body}));case"json":default:return c.pipe(L(a=>a.body))}case"response":return c;default:throw new T(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new E().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,te(o,r))}post(t,r,o={}){return this.request("POST",t,te(o,r))}put(t,r,o={}){return this.request("PUT",t,te(o,r))}static \u0275fac=function(r){return new(r||n)(M(S))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var $e=new y("");function Oe(n,e){return e(n)}function Je(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}function Ve(n,e,t){return(r,o)=>he(t,()=>e(r,s=>n(s,o)))}var Me=new y(""),ne=new y(""),Pe=new y(""),oe=new y("",{providedIn:"root",factory:()=>!0});function Ke(){let n=null;return(e,t)=>{n===null&&(n=(_(Me,{optional:!0})??[]).reduceRight(Je,Oe));let r=_(ee);if(_(oe)){let s=r.add();return n(e,t).pipe(H(s))}else return n(e,t)}}var W=(()=>{class n extends S{backend;injector;chain=null;pendingTasks=_(ee);contributeToStability=_(oe);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ne),...this.injector.get(Pe,[])]));this.chain=r.reduceRight((o,s)=>Ve(o,s,this.injector),Oe)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(H(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(M(F),M(ue))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();var We=/^\)\]\}',?\n/,Ye=RegExp(`^${we}:`,"m");function qe(n){return"responseURL"in n&&n.responseURL?n.responseURL:Ye.test(n.getAllResponseHeaders())?n.getResponseHeader(we):null}var re=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new T(-2800,!1);let r=this.xhrFactory;return Q(null).pipe(de(()=>new ie(s=>{let i=r.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((d,l)=>i.setRequestHeader(d,l.join(","))),t.headers.has(Te)||i.setRequestHeader(Te,Ge),!t.headers.has(Ee)){let d=t.detectContentTypeHeader();d!==null&&i.setRequestHeader(Ee,d)}if(t.timeout&&(i.timeout=t.timeout),t.responseType){let d=t.responseType.toLowerCase();i.responseType=d!=="json"?d:"text"}let c=t.serializeBody(),a=null,u=()=>{if(a!==null)return a;let d=i.statusText||"OK",l=new b(i.getAllResponseHeaders()),m=qe(i)||t.url;return a=new K({headers:l,status:i.status,statusText:d,url:m}),a},g=()=>{let{headers:d,status:l,statusText:m,url:I}=u(),f=null;l!==Xe&&(f=typeof i.response>"u"?i.responseText:i.response),l===0&&(l=f?ze:0);let v=l>=200&&l<300;if(t.responseType==="json"&&typeof f=="string"){let N=f;f=f.replace(We,"");try{f=f!==""?JSON.parse(f):null}catch(De){f=N,v&&(v=!1,f={error:De,text:f})}}v?(s.next(new U({body:f,headers:d,status:l,statusText:m,url:I||void 0})),s.complete()):s.error(new A({error:f,headers:d,status:l,statusText:m,url:I||void 0}))},p=d=>{let{url:l}=u(),m=new A({error:d,status:i.status||0,statusText:i.statusText||"Unknown Error",url:l||void 0});s.error(m)},R=p;t.timeout&&(R=d=>{let{url:l}=u(),m=new A({error:new DOMException("Request timed out","TimeoutError"),status:i.status||0,statusText:i.statusText||"Request timeout",url:l||void 0});s.error(m)});let B=!1,G=d=>{B||(s.next(u()),B=!0);let l={type:P.DownloadProgress,loaded:d.loaded};d.lengthComputable&&(l.total=d.total),t.responseType==="text"&&i.responseText&&(l.partialText=i.responseText),s.next(l)},z=d=>{let l={type:P.UploadProgress,loaded:d.loaded};d.lengthComputable&&(l.total=d.total),s.next(l)};return i.addEventListener("load",g),i.addEventListener("error",p),i.addEventListener("timeout",R),i.addEventListener("abort",p),t.reportProgress&&(i.addEventListener("progress",G),c!==null&&i.upload&&i.upload.addEventListener("progress",z)),i.send(c),s.next({type:P.Sent}),()=>{i.removeEventListener("error",p),i.removeEventListener("abort",p),i.removeEventListener("load",g),i.removeEventListener("timeout",R),t.reportProgress&&(i.removeEventListener("progress",G),c!==null&&i.upload&&i.upload.removeEventListener("progress",z)),i.readyState!==i.DONE&&i.abort()}})))}static \u0275fac=function(r){return new(r||n)(M(X))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})(),Ie=new y(""),Ze="XSRF-TOKEN",Qe=new y("",{providedIn:"root",factory:()=>Ze}),He="X-XSRF-TOKEN",et=new y("",{providedIn:"root",factory:()=>He}),C=class{},tt=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=pe(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(M(fe),M(Qe))};static \u0275prov=O({token:n,factory:n.\u0275fac})}return n})();function rt(n,e){let t=n.url.toLowerCase();if(!_(Ie)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=_(C).getToken(),o=_(et);return r!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var se=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(se||{});function nt(n,e){return{\u0275kind:n,\u0275providers:e}}function ot(...n){let e=[Ne,re,W,{provide:S,useExisting:W},{provide:F,useFactory:()=>_($e,{optional:!0})??_(re)},{provide:ne,useValue:rt,multi:!0},{provide:Ie,useValue:!0},{provide:C,useClass:tt}];for(let t of n)e.push(...t.\u0275providers);return le(e)}var be=new y("");function st(){return nt(se.LegacyInterceptors,[{provide:be,useFactory:Ke},{provide:ne,useExisting:be,multi:!0}])}var qt={mY:18,mX:38,mZ:7,tileWidth:75,tileHeight:100},Zt={idle:0,run:1,pause:2},it="GAME_MODE_EASY",at="GAME_MODE_STANDARD",ct="GAME_MODE_EXPERT",Qt=[{id:it,features:[{title:"SHUFFLE"},{title:"HINT"},{title:"UNDO"}]},{id:at,features:[{title:"HINT"},{title:"UNDO"}]},{id:ct,features:[]}];var Ht=[{id:"ltgreen",name:"THEME_LIGHT_GREEN"},{id:"dkgreen",name:"THEME_DARK_GREEN"},{id:"ltblue",name:"THEME_LIGHT_BLUE"},{id:"dkblue",name:"THEME_DARK_BLUE"},{id:"brown",name:"THEME_BROWN"},{id:"black",name:"THEME_BLACK"},{id:"white",name:"THEME_WHITE"}],er=[{img:void 0,name:"BACK_NONE"},{img:"bamboo",name:"BACK_BAMBOO"},{img:"blueclouds",name:"BACK_BLUE_CLOUDS"},{img:"grayclouds",name:"BACK_GRAY_CLOUDS"},{img:"grass-1",name:"BACK_GRAY_GRASS"},{img:"stones-1",name:"BACK_GRAY_STONES"},{img:"wood",name:"BACK_GRAY_WOOD"},{img:"wood-grain-1",name:"BACK_GRAY_WOOD_GRAIN"}],tr=[{id:"riichi",type:"SVG",name:"Riichi 2"},{id:"picasso",type:"PNG",name:"Picasso"},{id:"modern",type:"PNG",name:"Modern"},{id:"animals",type:"SVG",name:"Animals"},{id:"open-fruits",type:"PNG",name:"Fruits"},{id:"riichi-old",type:"SVG",name:"Riichi"},{id:"uni",type:"SVG",name:"Uni"},{id:"cheshire137",type:"SVG",name:"Cheshire"},{id:"recri2",type:"SVG",name:"Recri 2"},{id:"unib",type:"SVG",name:"Black"},{id:"gleitz",type:"PNG",name:"Gleitz"},{id:"recri",type:"PNG",name:"Recri"},{id:"classic",type:"PNG",name:"Classic"}],rr="riichi",nr="ltgreen",or="auto",sr="auto",xe=[["t_do1","t_do1","t_do1","t_do1"],["t_do2","t_do2","t_do2","t_do2"],["t_do3","t_do3","t_do3","t_do3"],["t_do4","t_do4","t_do4","t_do4"],["t_do5","t_do5","t_do5","t_do5"],["t_do6","t_do6","t_do6","t_do6"],["t_do7","t_do7","t_do7","t_do7"],["t_do8","t_do8","t_do8","t_do8"],["t_do9","t_do9","t_do9","t_do9"],["t_ch1","t_ch1","t_ch1","t_ch1"],["t_ch2","t_ch2","t_ch2","t_ch2"],["t_ch3","t_ch3","t_ch3","t_ch3"],["t_ch4","t_ch4","t_ch4","t_ch4"],["t_ch5","t_ch5","t_ch5","t_ch5"],["t_ch6","t_ch6","t_ch6","t_ch6"],["t_ch7","t_ch7","t_ch7","t_ch7"],["t_ch8","t_ch8","t_ch8","t_ch8"],["t_ch9","t_ch9","t_ch9","t_ch9"],["t_ba1","t_ba1","t_ba1","t_ba1"],["t_ba2","t_ba2","t_ba2","t_ba2"],["t_ba3","t_ba3","t_ba3","t_ba3"],["t_ba4","t_ba4","t_ba4","t_ba4"],["t_ba5","t_ba5","t_ba5","t_ba5"],["t_ba6","t_ba6","t_ba6","t_ba6"],["t_ba7","t_ba7","t_ba7","t_ba7"],["t_ba8","t_ba8","t_ba8","t_ba8"],["t_ba9","t_ba9","t_ba9","t_ba9"],["t_se_spring","t_se_summer","t_se_fall","t_se_winter"],["t_wi_north","t_wi_north","t_wi_north","t_wi_north"],["t_wi_south","t_wi_south","t_wi_south","t_wi_south"],["t_wi_east","t_wi_east","t_wi_east","t_wi_east"],["t_wi_west","t_wi_west","t_wi_west","t_wi_west"],["t_fl_bamboo","t_fl_chrysanthemum","t_fl_orchid","t_fl_plum"],["t_dr_green","t_dr_green","t_dr_green","t_dr_green"],["t_dr_white","t_dr_white","t_dr_white","t_dr_white"],["t_dr_red","t_dr_red","t_dr_red","t_dr_red"]],Y=[];for(let n=1;n<19;n++)Y.push([`t_g${n}`,`t_g${n}`,`t_g${n}`,`t_g${n}`]);for(let n=1;n<10;n++)Y.push([`t_e${n}`,`t_e${n}`,`t_e${n}`,`t_e${n}`]);var ir=[{name:"TILES_SUITS",groups:[{name:"TILES_SUIT_CIRCLES",tiles:["t_do1","t_do2","t_do3","t_do4","t_do5","t_do6","t_do7","t_do8","t_do9"]},{name:"TILES_SUIT_BAMBOO",tiles:["t_ba1","t_ba2","t_ba3","t_ba4","t_ba5","t_ba6","t_ba7","t_ba8","t_ba9"]},{name:"TILES_SUIT_CHARACTERS",tiles:["t_ch1","t_ch2","t_ch3","t_ch4","t_ch5","t_ch6","t_ch7","t_ch8","t_ch9"]}]},{name:"TILES_BONUS",groups:[{name:"TILES_BONUS_SEASONS",tiles:["t_se_spring","t_se_summer","t_se_fall","t_se_winter"]},{name:"TILES_BONUS_FLOWERS",tiles:["t_fl_bamboo","t_fl_orchid","t_fl_plum","t_fl_chrysanthemum"]}]},{name:"TILES_HONORS",groups:[{name:"TILES_HONORS_WINDS",tiles:["t_wi_east","t_wi_south","t_wi_west","t_wi_north"]},{name:"TILES_HONORS_DRAGONS",tiles:["t_dr_red","t_dr_green","t_dr_white"]}]},{name:"TILES_JOKERS",groups:[{name:"TILES_JOKERS_GENERAL",tiles:["t_g1","t_g2","t_g3"]},{name:"TILES_JOKERS_BLUEGREEN",tiles:["t_g4","t_g5","t_g6","t_g7","t_g8"]},{name:"TILES_JOKERS_RED",tiles:["t_g9","t_g10","t_g11","t_g12","t_g13"]},{name:"TILES_JOKERS_RANK",tiles:["t_g14","t_g15","t_g16","t_g17","t_g18"]}]},{name:"TILES_EXTRA",groups:[{name:"TILES_EXTRA",tiles:["t_e1","t_e2","t_e3","t_e4","t_e5","t_e6","t_e7","t_e8","t_e9"]}]}];var cr=(()=>{let e=class e{constructor(){this.prefix="mah.",this.updateData()}getScore(r){return this.get(`score.${r}`)}getSettings(){return this.get("settings")}getState(){return this.get("state")}getCustomLayouts(){return this.get("boards")}setLastMirrorX(r){this.set("mirrorx",r)}setLastMirrorY(r){this.set("mirrory",r)}getLastMirrorX(){return this.get("mirrorx")}getLastMirrorY(){return this.get("mirrory")}getLastPlayed(){if(!(typeof localStorage>"u"))try{return localStorage.getItem("last")??void 0}catch(r){console.error(r)}}storeLastPlayed(r){if(!(typeof localStorage>"u"))try{r?localStorage.setItem("last",r):localStorage.removeItem("last")}catch(o){console.error(o)}}storeScore(r,o){this.set(`score.${r}`,o)}clearScore(r){this.set(`score.${r}`)}storeSettings(r){this.set("settings",r)}storeState(r){this.set("state",r)}storeCustomLayouts(r){this.set("boards",r)}get(r){if(typeof localStorage>"u")return;let o=`${this.prefix}${r}`;try{let s=localStorage.getItem(o);return s?JSON.parse(s):void 0}catch(s){try{localStorage.removeItem(o)}catch{}console.error("Failed to parse localStorage item",o,s);return}}set(r,o){if(typeof localStorage>"u")return;let s=`${this.prefix}${r}`;try{o===void 0?localStorage.removeItem(s):localStorage.setItem(s,JSON.stringify(o))}catch(i){console.error("Failed to write localStorage item",s,i)}}updateData(){if(!(typeof localStorage>"u"))try{let r=localStorage.getItem("state");r&&(localStorage.removeItem("state"),this.set("state",JSON.parse(r))),r=localStorage.getItem("settings"),r&&(localStorage.removeItem("settings"),this.set("settings",JSON.parse(r)))}catch(r){console.error(r)}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function lr(n){return n.length===0?0:dt(n)+2147483647}function dt(n){let e=0;for(let t=0;t<n.length;t++){let r=n.codePointAt(t)??0;e=(e<<5)-e+r,e|=0}return e}var w=class n{constructor(e,t,r,o,s){this.picked=!1,this.group=[],this.z=e,this.x=t,this.y=r,this.v=o,this.groupNr=s}toPosition(){return{z:this.z,x:this.x,y:this.y,v:this.v,groupNr:this.groupNr}}isBlocked(){return n.hasStone(this.nodes.top)||n.hasStone(this.nodes.left)&&n.hasStone(this.nodes.right)}static hasStone(e){return e.some(t=>!t.picked)}},j=(n,e,t,r)=>{for(let o of n)if(o.z===e&&o.x===t&&o.y===r)return o};var h=class n{static random(e){return Math.floor(Math.random()*e.length)}static randomExtract(e){let t=n.random(e);return e.splice(t,1)[0]}static collectNodes(e,t){let r={left:[],right:[],top:[],bottom:[]},o;for(let s=t.y-1;s<=t.y+1;s++){o=j(e,t.z,t.x-2,s),o&&r.left.push(o),o=j(e,t.z,t.x+2,s),o&&r.right.push(o);for(let i=t.x-1;i<=t.x+1;i++)o=j(e,t.z+1,i,s),o&&r.top.push(o),o=j(e,t.z-1,i,s),o&&r.bottom.push(o)}return r}static fillStones(e,t){let r={};for(let o of e){let s=t.list[o.v];o.img=s?s.img:{id:void 0},r[o.groupNr]=r[o.groupNr]||[],r[o.groupNr].push(o),o.nodes=n.collectNodes(e,o)}for(let o of Object.keys(r)){let s=r[Number(o)];for(let i of s)i.group=s.filter(c=>c!==i)}return e}getTilesInGame(e,t){return e.list.filter(r=>r!==void 0)}getTilesInPairs(e,t){let r=[];for(let o of e.groups)for(let s=0;s<o.tiles.length;s+=2)r.push([o.tiles[s],o.tiles[s+1]]);return r}};var k=class extends h{build(e,t){let r=this.getTilesInGame(t,e.length),o=[],s=[...e];for(;s.length>0;){let i=h.randomExtract(r),c=h.randomExtract(s);o.push(new w(c[0],c[1],c[2],i.v,i.groupNr))}return h.fillStones(o,t),o}};var q=class extends h{build(e,t){let r=[];for(let i of e)r.push(new w(i[0],i[1],i[2],0,0));h.fillStones(r,t);let o=1,s=this.solve(r,t);for(;s.length===0&&o<1e3;){for(let i of r)i.picked=!1,i.v=0,i.groupNr=0;s=this.solve(r,t),o++}if(s.length===0)return new k().build(e,t);for(let i of r)i.picked=!1;return h.fillStones(r,t),r.sort((i,c)=>i.v-c.v),r}solve(e,t){let r=[],o=[],s=e.length/2,i=[...t.groups];for(;i.length>0;){let a=[...h.randomExtract(i).tiles],u=h.randomExtract(a),g=h.randomExtract(a),p=h.randomExtract(a),R=a[0];o.length<s&&o.push([u,g]),o.length<s&&o.push([p,R])}for(;o.length>0;){let c=h.randomExtract(o),a=e.filter(p=>!p.picked&&!p.isBlocked());if(a.length<2)return[];let u=h.randomExtract(a),g=h.randomExtract(a);u.v=c[0].v,u.img=c[0].img,u.groupNr=c[0].groupNr,u.picked=!0,g.v=c[1].v,g.img=c[1].img,g.groupNr=c[1].groupNr,g.picked=!0,r.push(c)}return r}};var Z=class{build(e,t){let r=[];for(let o of e){let s=t.list[o[3]];if(s){let i=new w(o[0],o[1],o[2],o[3],s.groupNr);r.push(i)}}return h.fillStones(r,t),r}};var lt="MODE_SOLVABLE",ut="MODE_RANDOM",ht=[{id:lt,builder:q},{id:ut,builder:k}],Ae=class{constructor(e){this.tiles=e}load(e){return new Z().build(e,this.tiles)}build(e,t){let r,o=ht.find(s=>s.id===e);if(o&&(r=new o.builder),r)return r.build(t,this.tiles)}};var Se=class{constructor(e){this.list=[],this.groups=[];let t=0,r=xe.map(s=>s.map(i=>({id:i}))),o=Math.ceil(e/4);if(o>r.length){let s=Y.map(i=>i.map(c=>({id:c})));for(r=[...r,...s];r.length<o;)r.push([{id:`_${r.length}a`},{id:`_${r.length}b`},{id:`_${r.length}c`},{id:`_${r.length}d`}])}for(let[s,i]of r.entries()){let c={v:s,tiles:[]};this.groups.push(c);for(let a of i){t++;let u={groupNr:s,v:t,img:a};c.tiles.push(u),this.list[t]=u}}}};export{pe as a,X as b,F as c,Ne as d,ot as e,st as f,w as g,j as h,h as i,lt as j,ht as k,Ae as l,qt as m,Zt as n,it as o,at as p,ct as q,Qt as r,Ht as s,er as t,tr as u,rr as v,nr as w,or as x,sr as y,xe as z,ir as A,Se as B,cr as C,lr as D,dt as E};
